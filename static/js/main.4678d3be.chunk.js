(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(23).concat([function(e,t,n){},,function(e,t,n){e.exports=n.p+"static/media/diffuse.43f36ea2.jpg"},function(e,t,n){e.exports=n.p+"static/media/diffuse2.ba0af4a9.jpg"},function(e,t,n){e.exports=n.p+"static/media/glossy.316efeae.jpg"},function(e,t,n){e.exports=n.p+"static/media/cartoon.35183a92.jpg"},function(e,t,n){e.exports=n.p+"static/media/electron.1e49f830.jpg"},function(e,t,n){e.exports=n(75)},,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports={en:{cancel:"Cancel",close:"Close",ok:"Ok"},fr:{cancel:"Annuler",close:"Fermer",ok:"OK"}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(2),s=n(0),o=n.n(s),c=n(17),u=n.n(c),l=n(10),h={exec:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,s,o,c,u,l=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"",(r=new FormData).append("i",JSON.stringify(n)),i="/cgi-bin/".concat(t,".py"),s={method:"POST",body:r,credentials:"include"},e.next=7,fetch(i,s);case 7:if(!(o=e.sent).ok){e.next=20;break}return e.next=11,o.text();case 11:return c=e.sent,e.prev=12,u=JSON.parse(c),e.abrupt("return",u);case 17:throw e.prev=17,e.t0=e.catch(12),Error(c);case 20:throw{code:o.status,text:o.statusText};case 21:case"end":return e.stop()}},e,null,[[12,17]])}));return function(t){return e.apply(this,arguments)}}()},p=n(18),f={INITIAL_STATE:{current:0,delta:1,dt:1,frameCount:0,playing:!1,unit:""},reducer:function(e,t){var n=t.type;if(!n.startsWith("animation:"))return e;switch(t.type.substr("animation:".length)){case"update":return function(e,t){return Object.assign(e,t.animation)}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},update:function(e){return{type:"".concat("animation:","update"),animation:e}}};var d=n(8),m={INITIAL_STATE:{brayns:{id:-1,name:"",path:"",bounds:{max:[0,0,0],min:[0,0,0]},transformation:{rotation:[0,0,0,1],scale:[1,1,1],translation:[0,0,0]}},parent:-1,deleted:!1,selected:!1,technical:!1,materialIds:[]},reducer:function(e,t){var n=t.type;if(!n.startsWith("current-model:"))return e;switch(t.type.substr("current-model:".length)){case"reset":return function(e,t){return Object(d.a)({},t.model)}(0,t);case"update":return function(e,t){return Object(d.a)({state:e},t.model)}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},reset:function(e){return{type:"".concat("current-model:","reset"),model:e}},update:function(e){return{type:"".concat("current-model:","update"),model:e}}};var v={local:b(window.localStorage),session:b(window.sessionStorage)};function b(e){return{get:function(t,n){var r=e.getItem(t);if(null===r)return n;try{return JSON.parse(r)}catch(a){return console.error('storage["'.concat(t,'"] is not parsable as a JSON object!\n')+'Its value is: "'.concat(r,'".\nThis item will be deleted.')),e.removeItem(t),n}},set:function(t,n){e.setItem(t,JSON.stringify(n))},del:function(t){e.removeItem(t)}}}var g=n(4),y=n(3),w=n(6),x=n(5),k=n(7),C=n(9),L=n(11);n(42);function H(e,t){var n=typeof e;return"number"!==n||isNaN(e)?"string"===n?e:t:"".concat(e)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(typeof e){case"undefined":return t;case"boolean":return e;case"number":return 0!==e;case"string":var n=e.trim().toLowerCase();if("true"===n||"yes"===n)return!0;var r=parseInt(n);return!isNaN(r)&&0!==r;default:return!1}}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"string"===typeof e?[e]:Array.isArray(e)?"undefined"===typeof n?e:e.map(function(e){return H(e,n)}):t}var j=3,M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(g.a)(this,e),this._x0=0,this._y0=0,this._time0=0,this._x=new Array(j),this._y=new Array(j),this._time=new Array(j),this._cursor=0,this.init(t,n)}return Object(y.a)(e,[{key:"init",value:function(e,t){this._time0=this.now,this._x0=e,this._y0=t,this._x=this._x.fill(this._x0,0,j),this._y=this._y.fill(this._y0,0,j),this._time=this._time.fill(this._time0,0,j)}},{key:"_index",value:function(e){return(this._cursor+e)%j}},{key:"add",value:function(e,t){var n=(this._cursor+j-1)%j;this._time[n]=this.now,this._x[n]=e,this._y[n]=t,this._cursor=n}},{key:"now",get:function(){return Date.now()}},{key:"elapsedTime",get:function(){return this.now-this._time0}},{key:"x",get:function(){return this._x[this._cursor]}},{key:"y",get:function(){return this._y[this._cursor]}},{key:"startX",get:function(){return this._x0}},{key:"startY",get:function(){return this._y0}},{key:"speedX",get:function(){var e=this._cursor,t=this._index(1),n=this._time[e]-this._time[t];return n<=0?0:(this._x[e]-this._x[t])/n}},{key:"speedY",get:function(){var e=this._cursor,t=this._index(1),n=this._time[e]-this._time[t];return n<=0?0:(this._y[e]-this._y[t])/n}},{key:"accelX",get:function(){var e=this._index(0),t=this._time[e],n=this._index(1),r=this._time[n],a=t-r;if(a<=0)return 0;var i=this._index(2),s=r-this._time[i];if(s<=0)return 0;var o=this._x[e],c=this._x[n];return((o-c)/a-(c-this._x[i])/s)/a}},{key:"accelY",get:function(){var e=this._index(0),t=this._time[e],n=this._index(1),r=this._time[n],a=t-r;if(a<=0)return 0;var i=this._index(2),s=r-this._time[i];if(s<=0)return 0;var o=this._y[e],c=this._y[n];return((o-c)/a-(c-this._y[i])/s)/a}}]),e}(),A=function(){function e(){Object(g.a)(this,e),this.fingers=[]}return Object(y.a)(e,[{key:"getIndex",value:function(e){var t=this.fingers.indexOf(e);if(-1!==t)return t;var n=this.fingers.indexOf(null);return-1!==n?(this.fingers[n]=e,n):(this.fingers.push(e),this.fingers.length-1)}},{key:"remove",value:function(e){var t=this.fingers.indexOf(e);-1!==t&&(this.fingers[t]=null)}}]),e}(),E=[];window.addEventListener("mousemove",function(e){for(var t=0,n=E;t<n.length;t++){var r=n[t];if(!e.cancelBubble){var a=r.target,i=r.handleMove,s=r.x,o=r.y,c=r.index;if("function"===typeof i)try{i({x:e.clientX-s,y:e.clientY-o,index:c,event:e,pointer:"mouse",buttons:I(e),target:a,clear:P(e)})}catch(u){console.error("[tfw.gesture.basic-handler] window.mousemove",u),console.error("    handler=",i),console.error("    event=",e)}}}},!1),window.addEventListener("mouseup",function(e){for(var t=0,n=E;t<n.length;t++){var r=n[t];if(!e.cancelBubble){var a=r.target,i=r.handleUp,s=r.x,o=r.y,c=r.index;if("function"===typeof i)try{i({x:e.clientX-s,y:e.clientY-o,index:c,event:e,pointer:"mouse",buttons:I(e),target:a,clear:P(e)})}catch(u){console.error("[tfw.gesture.basic-handler] window.mouseup",u),console.error("    handler=",i),console.error("    event=",e)}}}E.splice(0,E.length)},!1);var S=function(){function e(t,n,r,a){Object(g.a)(this,e),this.element=void 0,this.mouseType="",this.mouseTypeTime=0,this.deviceHandlers={},this.fingers=new A,this.pressed=!1,this.element=t,function(e,t,n){(function(e,t,n){var r=this,a=this.element,i=this.deviceHandlers,s=function(i){if(r.checkMouseType("touch")){var s=a.getBoundingClientRect(),o=!0,c=!1,u=void 0;try{for(var l,h=i.changedTouches[Symbol.iterator]();!(o=(l=h.next()).done);o=!0){var p=l.value,f=r.fingers.getIndex(p.identifier),d=p.clientX-s.left,m=p.clientY-s.top;e({x:d,y:m,index:f,event:i,buttons:1,pointer:"touch",target:a,clear:P(i)}),E.push({handleUp:t,handleMove:n,index:f,target:a,x:d,y:m})}}catch(v){c=!0,u=v}finally{try{o||null==h.return||h.return()}finally{if(c)throw u}}}};i.touchstart=s,a.addEventListener("touchstart",s,!1)}).call(this,e,t,n),function(e,t,n){var r=this,a=this.element,i=this.deviceHandlers,s=function(i){if(r.checkMouseType("mouse")){var s=a.getBoundingClientRect();r.pressed=!0;var o=i.clientX-s.left,c=i.clientY-s.top;"function"===typeof e&&e({x:o,y:c,index:0,buttons:I(i),pointer:"mouse",event:i,target:a,clear:P(i)}),E.push({handleUp:t,handleMove:n,index:0,target:a,x:s.left,y:s.top})}};i.mousedown=s,a.addEventListener("mousedown",s,!1)}.call(this,e,t,n)}.call(this,n,r,a),function(e,t,n){var r=this,a=this.element,i=this.deviceHandlers,s=function(e){if(r.checkMouseType("touch")){var n=a.getBoundingClientRect(),i=!0,s=!1,o=void 0;try{for(var c,u=e.changedTouches[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value,h=r.fingers.getIndex(l.identifier),p=l.clientX-n.left,f=l.clientY-n.top;t({x:p,y:f,index:h,event:e,buttons:1,pointer:"touch",target:a,clear:P(e)})}}catch(d){s=!0,o=d}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}E.splice(0,E.length)}};i.touchend=s,a.addEventListener("touchend",s,!1)}.call(this,n,r,a)}return Object(y.a)(e,[{key:"checkMouseType",value:function(e){var t=Date.now(),n=t-this.mouseTypeTime;return this.mouseTypeTime=t,0===this.mouseType.length||n>500?(this.mouseType=e,!0):this.mouseType===e}},{key:"detachEvents",value:function(){var e=this.element,t=this.deviceHandlers,n=t.touchstart,r=t.touchend,a=t.mousedown;n&&e.removeEventListener("touchstart",n,!1),r&&e.removeEventListener("touchend",r,!1),a&&e.removeEventListener("mousedown",a,!1)}}]),e}();function P(e){return function(){e.preventDefault(),e.stopPropagation()}}function I(e){var t=e.buttons,n=e.metaKey,r=e.ctrlKey;return 1!==t?t:n&&!r?2:!n&&r?4:t}var N=Symbol("gesture"),T=0,_=function(){function e(t){Object(g.a)(this,e),this.handlers=void 0,this.element=void 0,this.pointers=void 0,this.id=void 0,t[N]=this,this.id=T++,this.element=t,this.handlers={},new S(t,this.handleDown.bind(this),this.handleUp.bind(this),this.handleMove.bind(this)),this.pointers=new Array(3),t.addEventListener("contextmenu",function(e){e.preventDefault()},!1)}return Object(y.a)(e,[{key:"on",value:function(e){e.wheel&&this.element.addEventListener("wheel",e.wheel),e.keyup&&this.element.addEventListener("keyup",e.keyup),e.keydown&&this.element.addEventListener("keydown",e.keydown),this.handlers=Object(d.a)({},this.handlers,e)}},{key:"hasHandlerFor",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,a=t;r<a.length;r++){var i=a[r];if(this.handlers[i])return!0}return!1}},{key:"getPointer",value:function(e){var t=this.pointers;return"undefined"===typeof t[e]&&(t[e]={isDown:!1,moves:new M(0,0),rect:{left:0,top:0,width:0,height:0}}),t[e]}},{key:"handleDown",value:function(e){if(!(e.index>2)){var t=e.x,n=e.y,r=this.element,a=this.getPointer(e.index);a.isDown=!0,a.moves.init(t,n),this.handlers.down&&this.handlers.down(Object.assign(e,{x:t,y:n,target:r}))}}},{key:"handleUp",value:function(e){if(!(e.index>2)){var t=e.x,n=e.y,r=this.getPointer(e.index);r.isDown=!1,r.moves.add(t,n),this.handlers.up&&this.handlers.up(Object.assign(e,{x:t,y:n,target:this.element})),this.recognizeTap(e,r),this.recognizeSwipe(e,r)}}},{key:"handleMove",value:function(e){if(!(e.index>2)){var t=this.getPointer(e.index),n=e.x,r=e.y;t.moves.add(n,r),this.recognizePan(e,t)}}},{key:"recognizeTap",value:function(e,t){if(this.handlers.tap&&!(t.moves.elapsedTime>400)){var n=t.moves;if(!(Math.abs(n.x-n.startX)>16))Math.abs(n.y-n.startY)>16||(e.clear(),this.handlers.tap(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})))}}},{key:"recognizePan",value:function(e,t){if(t.isDown&&(this.recognizePanDown(e,t),this.recognizePanUp(e,t),this.handlers.pan)){var n=t.moves,r=n.x,a=n.y,i=n.startX,s=n.startY;this.handlers.pan(Object(d.a)({},e,{x:r,y:a,startX:i,startY:s,target:this.element}))}}},{key:"recognizePanDown",value:function(e,t){if(this.hasHandlerFor("pandown","panvertical")){var n=t.moves,r=Math.abs(n.speedX);if(!(n.speedY<r)){var a=Math.abs(n.x-n.startX);n.y-n.startY<a||(this.handlers.pandown&&this.handlers.pandown(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})),this.handlers.panvertical&&this.handlers.panvertical(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})))}}}},{key:"recognizePanUp",value:function(e,t){if(this.hasHandlerFor("panup","panvertical")){var n=t.moves,r=Math.abs(n.speedX);if(!(-n.speedY<r)){var a=Math.abs(n.x-n.startX);n.startY-n.y<a||(this.handlers.panup&&this.handlers.panup(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})),this.handlers.panvertical&&this.handlers.panvertical(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})))}}}},{key:"recognizeSwipe",value:function(e,t){if(this.recognizeSwipeDown(e,t),this.recognizeSwipeUp(e,t),this.recognizeSwipeLeft(e,t),this.handlers.swipe){var n=t.moves,r=n.x,a=n.y,i=n.startX,s=n.startY;this.handlers.swipe(Object(d.a)({},e,{x:r,y:a,startX:i,startY:s,target:this.element}))}}},{key:"recognizeSwipeDown",value:function(e,t){if(this.hasHandlerFor("swipedown","swipevertical")){var n=t.moves,r=Math.abs(n.speedX);if(!(n.speedY<r)){var a=Math.abs(n.x-n.startX),i=n.y-n.startY;if(!(i<a))i/n.elapsedTime<.1||(this.handlers.swipedown&&this.handlers.swipedown(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})),this.handlers.swipevertical&&this.handlers.swipevertical(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})))}}}},{key:"recognizeSwipeUp",value:function(e,t){if(this.hasHandlerFor("swipeup","swipevertical")){var n=t.moves,r=Math.abs(n.speedX);if(!(n.speedY<r)){var a=Math.abs(n.x-n.startX),i=n.y-n.startY;if(!(i<a))i/n.elapsedTime<.1||(this.handlers.swipeup&&this.handlers.swipeup(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})),this.handlers.swipevertical&&this.handlers.swipevertical(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})))}}}},{key:"recognizeSwipeLeft",value:function(e,t){if(this.hasHandlerFor("swipeleft","swipehorizontal")){var n=t.moves;if(!(-n.speedX<Math.abs(n.speedY))){var r=n.startX-n.x;if(!(r<Math.abs(n.y-n.startY)))r/n.elapsedTime<.1||(this.handlers.swipeleft&&this.handlers.swipeleft(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})),this.handlers.swipehorizontal&&this.handlers.swipehorizontal(Object(d.a)({},e,{x:n.x,y:n.y,target:this.element})))}}}},{key:"identifier",get:function(){return this.id}}]),e}(),B=function(e){var t=e[N];return t||(t=new _(e),e[N]=t,t)},D=(n(43),function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000000";Object(g.a)(this,e),this.R=void 0,this.G=void 0,this.B=void 0,this.H=void 0,this.S=void 0,this.L=void 0,this.A=void 0,this.R=0,this.G=0,this.B=0,this.H=0,this.S=0,this.L=0,this.A=1,this.parse(t)}return Object(y.a)(e,[{key:"toArrayRGB",value:function(){return[this.R,this.G,this.B]}},{key:"toArrayRGBA",value:function(){return[this.R,this.G,this.B,this.A]}},{key:"parse",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000000").trim().toUpperCase();return!!this.parseHexa.call(this,e)||(!!this.parseRGB.call(this,e)||(!!this.parseRGBA.call(this,e)||!!this.parseHSL.call(this,e)))}},{key:"luminance",value:function(){return.2126*this.R+.7152*this.G+.0722*this.B}},{key:"luminanceStep",value:function(){return this.luminance()<.6?0:1}},{key:"stringify",value:function(){var e=X(255*this.R)+X(255*this.G)+X(255*this.B);return this.A<1&&(e+=X(255*this.A)),"#".concat(e)}},{key:"copy",value:function(){var t=new e;return t.R=this.R,t.G=this.G,t.B=this.B,t.A=this.A,t.H=this.H,t.S=this.S,t.L=this.L,t}},{key:"hsl2rgb",value:function(){var e=6*this.H,t=this.S,n=this.L,r=(1-Math.abs(2*n-1))*t,a=r*(1-Math.abs(e%2-1)),i=0,s=0,o=0;e<3?e<1?(i=r,s=a,o=0):e<2?(i=a,s=r,o=0):(i=0,s=r,o=a):e<4?(i=0,s=a,o=r):e<5?(i=a,s=0,o=r):(i=r,s=0,o=a);var c=n-.5*r;this.R=i+c,this.G=s+c,this.B=o+c}},{key:"rgb2hsl",value:function(){var e=this.R,t=this.G,n=this.B,r=Math.min(e,t,n),a=Math.max(e,t,n),i=a-r;this.L=.5*(a+r),i<1e-6?(this.H=0,this.S=0):(this.S=i/(1-Math.abs(2*this.L-1)),this.H=a===e?t>=n?R*((t-n)/i):1-R*((n-t)/i):a===t?R*(2+(n-e)/i):R*(4+(e-t)/i))}},{key:"parseHexa",value:function(e){if("#"!==e.charAt(0))return!1;var t=0,n=0,r=0,a=1;switch(e.length){case 4:t=parseInt(e.charAt(1),16)*z,n=parseInt(e.charAt(2),16)*z,r=parseInt(e.charAt(3),16)*z;break;case 5:t=parseInt(e.charAt(1),16)*z,n=parseInt(e.charAt(2),16)*z,r=parseInt(e.charAt(3),16)*z,a=parseInt(e.charAt(4),16)*z;break;case 7:t=parseInt(e.substr(1,2),16)*q,n=parseInt(e.substr(3,2),16)*q,r=parseInt(e.substr(5,2),16)*q;break;case 9:t=parseInt(e.substr(1,2),16)*q,n=parseInt(e.substr(3,2),16)*q,r=parseInt(e.substr(5,2),16)*q,a=parseInt(e.substr(7,2),16)*q}return isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)?this.R=this.G=this.B=this.A=0:(this.R=t,this.G=n,this.B=r,this.A=a),!0}},{key:"parseRGB",value:function(e){var t=W.exec(e);return!!t&&(this.R=Y(parseInt(t[1],10)*q),this.G=Y(parseInt(t[2],10)*q),this.B=Y(parseInt(t[3],10)*q),this.A=1,!0)}},{key:"parseRGBA",value:function(e){var t=G.exec(e);return!!t&&(this.R=Y(parseInt(t[1],10)*q),this.G=Y(parseInt(t[2],10)*q),this.B=Y(parseInt(t[3],10)*q),this.A=Y(parseFloat(t[4])),!0)}},{key:"parseHSL",value:function(e){var t=U.exec(e);return!!t&&(this.H=Y(parseInt(t[1],10)*F),this.S=Y(parseInt(t[2],10)*Z),this.L=Y(parseInt(t[3],10)*Z),this.A=1,this.hsl2rgb(),!0)}}],[{key:"isValid",value:function(e){if("string"!==typeof e)return!1;if("#"!==e.charAt(0))return!1;switch(e.length){case 4:case 5:case 7:case 9:return!0}return!1}},{key:"normalize",value:function(t){return new e(t).stringify()}},{key:"luminance",value:function(t){return new e(t).luminance()}},{key:"luminanceStep",value:function(t){return new e(t).luminanceStep()}},{key:"fromArrayRGB",value:function(e){var t=Object(C.a)(e,3),n=t[0],r=t[1],a=t[2];return this.newRGB(n,r,a)}},{key:"fromArrayRGBA",value:function(e){var t=Object(C.a)(e,4),n=t[0],r=t[1],a=t[2],i=t[3];return this.newRGBA(n,r,a,i)}},{key:"mix",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,a=1-r;return e.newRGBA(r*n.R+a*t.R,r*n.G+a*t.G,r*n.B+a*t.B,r*n.A+a*t.A)}},{key:"ramp",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(0===t.length)return e.newBlack();if(1===t.length)return t[0];var r=t.length-1,a=Math.floor(n*r),i=t[a];if(a===r)return i;var s=t[a+1],o=a+n/r;return e.mix(i,s,o)}},{key:"newBlack",value:function(){return e.newRGB(0,0,0)}},{key:"newWhite",value:function(){return e.newRGB(1,1,1)}},{key:"newRGB",value:function(t,n,r){var a=new e;return a.R=t,a.G=n,a.B=r,a.A=1,a}},{key:"newRGBA",value:function(t,n,r,a){var i=new e;return i.R=t,i.G=n,i.B=r,i.A=a,i}}]),e}()),R=1/6,z=1/15,Z=1/99,q=1/255,F=1/359,W=/^RGB[\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/,G=/^RGBA[\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9.]+([0-9.]+)/,U=/^HSL[\s(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;function Y(e){return e<0?0:e>1?1:e}function X(e){var t=Math.floor(e).toString(16);return t.length<2&&(t="0"+t),t}var K={register:ee,apply:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;if(!$.css[e])return void console.error("This theme has not been registered: ",e);var t=document.body;"string"===typeof $.current&&t.classList.remove("dom-theme-".concat($.current));$.current=e,t.classList.add("dom-theme-".concat($.current))},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return $.vars[e]},bg0:ce("bg0"),bg1:ce("bg1"),bg2:ce("bg2"),bg3:ce("bg3"),bgP:ce("bgP"),bgPD:ce("bgPD"),bgPL:ce("bgPL"),bgS:ce("bgS"),bgSD:ce("bgSD"),bgSL:ce("bgSL"),black:ce("black"),white:ce("white"),isDark:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===e)return function(){var e=$.vars[$.current||"default"],t=e.$isDark;if("boolean"===typeof t)return t;var n=new D(e.bg0),r=new D(e.bg1),a=new D(e.bg2),i=new D(e.bg3),s=D.mix(D.mix(n,r),D.mix(a,i));return e.$isDark=!s.luminanceStep(),e.$isDark}();var t=$.vars[$.current||"default"],n="$isDark/".concat(e),r=t[n];if("boolean"===typeof r)return r;var a=new D(t[e]);return t[n]=!a.luminanceStep(),t[n]},setFontSize:function(e){var t=document.documentElement;t.classList.remove("thm-font-size-small"),t.classList.remove("thm-font-size-medium"),t.classList.remove("thm-font-size-large"),t.classList.add("thm-font-size-".concat(e))},normalize:ae},J=new D,Q=["0","1","2","3","P","PD","PL","S","SD","SL"],$={css:{},vars:{},current:null};function ee(e,t){var n=ae(t);$.vars[e]=n;var r=function(e,t){var n="body.dom-theme-"+e+"{\n";Q.forEach(function(e){var r=t["bg".concat(e)];n+="  --thm-bg".concat(e,": ").concat(r,";\n");var a=!0,i=!1,s=void 0;try{for(var o,c=te[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value;n+="  --thm-bg".concat(e,"-").concat(u,": ").concat(oe(r,u),";\n")}}catch(b){i=!0,s=b}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}J.parse(r);var l=J.luminanceStep()?t.black||"#000":t.white||"#fff";n+="  --thm-fg".concat(e,": ").concat(l,";\n");var h=!0,p=!1,f=void 0;try{for(var d,m=te[Symbol.iterator]();!(h=(d=m.next()).done);h=!0){var v=d.value;n+="  --thm-fg".concat(e,"-").concat(v,": ").concat(oe(l,v),";\n")}}catch(b){p=!0,f=b}finally{try{h||null==m.return||m.return()}finally{if(p)throw f}}}),t.white=ue(t.white||"#fff"),t.black=ue(t.black||"#000"),n+="  --thm-white: ".concat(t.white,";\n"),n+="  --thm-black: ".concat(t.black,";\n");var r=!0,a=!1,i=void 0;try{for(var s,o=te[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;n+="  --thm-white-".concat(c,": ").concat(oe(t.white,c),";\n"),n+="  --thm-black-".concat(c,": ").concat(oe(t.black,c),";\n")}}catch(u){a=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n+="}\n"}(e,n);r+=function(e,t){var n="";return Q.forEach(function(r){n+="body.dom-theme-"+e+".thm-bg"+r+" { background-color: "+t["bg".concat(r)]+" }\n",n+="body.dom-theme-"+e+" .thm-fg"+r+" { color: "+t["fg".concat(r)]+" }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+" { background-color: "+t["bg".concat(r)]+" }\n",n+="body.dom-theme-".concat(e," .thm-bg").concat(r,"-text")+" { background-color: "+t["fg".concat(r)]+" }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-bottom { background: linear-gradient(to top,"+t["bg".concat(r)]+",transparent) }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-top { background: linear-gradient(to bottom,"+t["bg".concat(r)]+",transparent) }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-left { background: linear-gradient(to right,"+t["bg".concat(r)]+",transparent) }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-right { background: linear-gradient(to left,"+t["bg".concat(r)]+",transparent) }\n",isNaN(parseInt(r))&&(n+="body.dom-theme-"+e+" .thm-svg-fill"+r+" { fill: "+t["bg".concat(r)]+" }\n",n+="body.dom-theme-"+e+" .thm-svg-stroke"+r+" { stroke: "+t["bg".concat(r)]+" }\n")}),n}(e,n),r+=function(e,t){J.parse(t.bg2);var n=J.luminance()<.6?oe(t.white||"#fff","4"):oe(t.black||"#000","6"),r="";return Object.keys(ne).forEach(function(t){var a=parseInt(t,10);ne[t].forEach(function(t){r+="body.dom-theme-".concat(e," .thm-ele-").concat(t," {\n  box-shadow: 0 ").concat(a,"px ").concat(2*a,"px ").concat(n,"\n}\n")})}),r}(e,n),r+=function(e,t){for(var n="",r=1;r<=10;r++)for(var a=0,i=Q;a<i.length;a++)for(var s=i[a],o="fg".concat(s),c="bg".concat(s),u=t[o],l=t[c],h=".thm-bg"+s,p=".thm-fg"+s,f=1;f<=r;f++){for(var d=[],m=[],v=[],b=1;b<=r;b++)v.push(f===b?h:"*"),m.push(f===b?h:"*"),d.push(f===b?p:"*"),b===r&&(v.push(v.pop()+".thm-fg"),d.push(d.pop()+p));n+="body.dom-theme-"+e+" "+v.join(" > ")+" { color: "+u+" }\n",n+="body.dom-theme-"+e+" "+(g=v.join(" > "),y=".thm-fg",g.substr(0,g.length-y.length))+" { color: "+u+" }\n",n+="body.dom-theme-"+e+" "+d.join(" > ")+" { color: "+l+" }\n",n+="body.dom-theme-"+e+" "+m.join(" > ")+" .thm-svg-fill0 { fill: "+u+" }\n",n+="body.dom-theme-"+e+" "+m.join(" > ")+" .thm-svg-stroke0 { stroke: "+u+" }\n"}var g,y;return n}(e,n);var a=$.css[e];a||(a=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(a),$.css[e]=a),a.textContent=r}var te="123456789ABCDE";var ne={0:["none"],2:["button","card"],4:["bar"],6:["floating"],8:["button:active","button-raised","card-raised"],9:["sunmenu-0"],10:["sunmenu-1"],11:["sunmenu-2"],12:["floating:active"],16:["nav"],24:["dialog"]};function re(e){var t="string"===typeof e.bg0,n="string"===typeof e.bg1,r="string"===typeof e.bg2,a="string"===typeof e.bg3;if(!(t&&n&&r&&a)){if(!t&&!n&&!r&&!a)return e.bg0="#E0E0E0",e.bg1="#F5F5F5",e.bg2="#FAFAFA",void(e.bg3="#FFF");var i;!t||n||r||a||(e.bg3=(i=e.bg0,J.parse(i),J.rgb2hsl(),J.L=Math.min(1,J.L+.3),J.hsl2rgb(),J.stringify()),a=!0),t||n||r||!a||(e.bg0=function(e){return J.parse(e),J.rgb2hsl(),J.L=Math.max(0,J.L-.15),J.hsl2rgb(),J.stringify()}(e.bg3),a=!0);var s=new D(e.bg0),o=s.R,c=s.G,u=s.B,l=new D(e.bg3),h=l.R,p=l.G,f=l.B,d=D.newRGB((2*o+h)/3,(2*c+p)/3,(2*u+f)/3),m=D.newRGB((o+2*h)/3,(c+2*p)/3,(u+2*f)/3);e.bg1=d.stringify(),e.bg2=m.stringify()}}function ae(e){return"undefined"===typeof e&&(e={}),re(e),"string"!==typeof e.bgP&&(e.bgP="#3E50B4"),"string"!==typeof e.bgPD&&(e.bgPD=ie(e.bgP)),"string"!==typeof e.bgPL&&(e.bgPL=se(e.bgP)),"string"!==typeof e.bgS&&(e.bgS=function(e){J.parse(e),J.rgb2hsl(),J.H=J.H+.5,J.H>1&&J.H--;return J.hsl2rgb(),J.stringify()}(e.bgP)),"string"!==typeof e.bgSD&&(e.bgSD=ie(e.bgS)),"string"!==typeof e.bgSL&&(e.bgSL=se(e.bgS)),"string"!==typeof e.white&&(e.white="#fff"),"string"!==typeof e.black&&(e.black="#000"),Q.forEach(function(t){var n=e["bg".concat(t)]||"#000";J.parse(n);var r=J.luminance();e["fg".concat(t)]=r<.6?e.white:e.black}),e}function ie(e){return J.parse(e),J.rgb2hsl(),J.L*=.75,J.hsl2rgb(),J.stringify()}function se(e){return J.parse(e),J.rgb2hsl(),J.L=.4+.6*J.L,J.hsl2rgb(),J.stringify()}function oe(e,t){return e.length<5?e+t:e+t+t}function ce(e){return function(){return $.vars[$.current||"default"][e]}}function ue(e){return new D(e).stringify()}ee("default",{bgP:"#1e90ff"});var le=function(){};n(44);var he=function(){function e(t){Object(g.a)(this,e),this.removeTouchDisk=void 0,this._element=void 0,this._enabled=!0,this.color="#000",this.accent=!1,this.onTap=void 0,this.element=t.element,this.enabled=O(t.enabled,!0),this.color=H(t.color,""),this.onTap=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:le;return"function"===typeof e?e:t}(t.onTap)}return Object(y.a)(e,[{key:"fire",value:function(){if(this.enabled){var e=this.onTap;"function"===typeof e&&e()}}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}},{key:"element",get:function(){return this._element},set:function(e){var t=this;"undefined"!==typeof e&&B(e).on({keydown:function(e){if(t.enabled){var n=e.key;" "!==n&&"Enter"!==n||(e.preventDefault(),e.stopPropagation(),t.fire())}},down:function(){t.enabled},up:function(){t.removeTouchDisk&&(t.removeTouchDisk(),delete t.removeTouchDisk)},tap:function(n){if(t.enabled){t.fire();var r=e.getBoundingClientRect(),a=window.getComputedStyle(e),i=function(e){var t=document.createElement("div");return t.className="tfw-behavior-touchable",t.style.left="".concat(e.left,"px"),t.style.top="".concat(e.top,"px"),t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px"),document.body.appendChild(t),t}(r);i.style.borderRadius=a.getPropertyValue("border-radius");var s=n.x||0,o=n.y||0,c=Math.max(s,r.width-s),u=Math.max(o,r.height-o),l=Math.ceil(1.1*Math.sqrt(c*c+u*u)),h=document.createElement("div");i.appendChild(h),h.style.left="".concat(s-l,"px"),h.style.top="".concat(o-l,"px"),h.style.width="".concat(2*l,"px"),h.style.height="".concat(2*l,"px"),t.color.length>0?h.style.background=t.color:h.style.background=K.isDark()?"#fff":"#000",window.setTimeout(function(){return h.className="open"}),window.setTimeout(function(){return document.body.removeChild(i)},500)}}})}}]),e}();function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.floor(.5+t);switch(typeof e){case"boolean":return e?1:0;case"number":return Math.floor(.5+e);case"string":var r=e.trim().toLowerCase();if(r.startsWith("0x")){var a=parseInt(r.substr(2),16);return isNaN(a)?n:a}if(r.startsWith("0b")){var i=parseInt(r.substr(2),2);return isNaN(i)?n:i}if(r.startsWith("0o")){var s=parseInt(r.substr(2),8);return isNaN(s)?n:s}var o=parseFloat(r);return isNaN(o)?n:Math.floor(.5+o);default:return n}}var fe=/^(-?[.0-9]+)[ \n\r]*([a-z%]*)/;function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%";if("number"===typeof e)return"".concat(e,"px");if("string"!==typeof e)return t;var n="".concat(e).trim().toLowerCase();if("auto"===n||"inherit"===n)return n;if(n.startsWith("calc("))return n;var r=fe.exec(n);if(!r)return t;var a=parseFloat(r[1]);if(isNaN(a)||0===a)return"0";var i=r[2].length<1?"px":r[2];return"".concat(a).concat(i)}function me(e){return["path",{d:e,stroke:"none",fill:0}]}for(var ve={android:me("M15,-35H10V-40H15M-10,-35H-15V-40H-10M18,-49L24,-56C25,-57,25,-58,24,-59C23,-60,22,-60,21,-59L13,-52C9,-54,5,-55,0,-55C-5,-55,-9,-54,-13,-52L-21,-59C-22,-60,-23,-60,-24,-59C-25,-58,-25,-57,-24,-56L-18,-49C-25,-44,-30,-35,-30,-25H30C30,-35,25,-44,18,-49M43,-20A8,8,0,0,0,35,-12V23A8,8,0,0,0,43,30A8,8,0,0,0,50,23V-12A8,8,0,0,0,43,-20M-42,-20A8,8,0,0,0,-50,-12V23A8,8,0,0,0,-42,30A8,8,0,0,0,-35,23V-12A8,8,0,0,0,-42,-20M-30,30A5,5,0,0,0,-25,35H-20V53A8,8,0,0,0,-12,60A8,8,0,0,0,-5,53V35H5V53A8,8,0,0,0,13,60A8,8,0,0,0,20,53V35H25A5,5,0,0,0,30,30V-20H-30V30Z"),bug:me("M10,0H-10V-10H10M10,20H-10V10H10M40,-20H26C24,-24 21,-27 17,-30L25,-38L18,-45L7,-34C5,-35 3,-35 0,-35C-2,-35 -5,-35 -7,-34L-18,-45L-25,-38L-17,-30C-21,-27 -24,-24 -26,-20H-40V-10H-30C-30,-8 -30,-7 -30,-5V0H-40V10H-30V15C-30,17 -30,18 -30,20H-40V30H-26C-21,39 -11,45 0,45C11,45 21,39 26,30H40V20H30C30,18 30,17 30,15V10H40V0H30V-5C30,-7 30,-8 30,-10H40V-20Z"),camera:me("M-40,-40H-25L-15,-50H15L25,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M0,-25A25,25,0,0,0,-25,0A25,25,0,0,0,0,25A25,25,0,0,0,25,0A25,25,0,0,0,0,-25M0,-15A15,15,0,0,1,15,0A15,15,0,0,1,0,15A15,15,0,0,1,-15,0A15,15,0,0,1,0,-15Z"),cancel:me("M7,0L35,28V35H28L0,7L-28,35H-35V28L-7,0L-35,-28V-35H-28L0,-7L28,-35H35V-28L7,0Z"),center:me("M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M35,35H15V45H35A10,10,0,0,0,45,35V15H35M35,-45H15V-35H35V-15H45V-35A10,10,0,0,0,35,-45M-35,-35H-15V-45H-35A10,10,0,0,0,-45,-35V-15H-35M-35,15H-45V35A10,10,0,0,0,-35,45H-15V35H-35V15Z"),child:me("M5,-50V-10H45A40,40,0,0,0,5,-50M37,19C42,13,45,4,45,-5H-28L-32,-15H-50V-5H-39C-39,-5,-29,15,-28,17C-34,20,-37,26,-37,33A18,18,0,0,0,-20,50C-11,50,-4,44,-3,35H8C9,44,16,50,25,50A18,18,0,0,0,43,33C43,27,40,23,37,19M-20,40A8,8,0,0,1,-27,33A8,8,0,0,1,-20,25A8,8,0,0,1,-12,33A8,8,0,0,1,-20,40M25,40A8,8,0,0,1,18,33A8,8,0,0,1,25,25A8,8,0,0,1,33,33A8,8,0,0,1,25,40Z"),close:me("M0,-50C28,-50,50,-28,50,0C50,28,28,50,0,50C-28,50,-50,28,-50,0C-50,-28,-28,-50,0,-50M18,-25L0,-7L-18,-25L-25,-18L-7,0L-25,18L-18,25L0,7L18,25L25,18L7,0L25,-18L18,-25Z"),code:me("M13,23L36,0L13,-23L20,-30L50,0L20,30L13,23M-13,23L-36,0L-13,-23L-20,-30L-50,0L-20,30L-13,23Z"),copy:me("M35,45H-20V-25H35M35,-35H-20A10,10,0,0,0,-30,-25V45A10,10,0,0,0,-20,55H35A10,10,0,0,0,45,45V-25A10,10,0,0,0,35,-35M20,-55H-40A10,10,0,0,0,-50,-45V25H-40V-45H20V-55Z"),counter:me("M-40,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M-40,-30V30H-5V-30H-40M40,30V-30H34C35,-27,35,-25,35,-24C34,-21,32,-17,31,-16L20,-3L36,-4L36,3L10,2L10,-3C10,-3,25,-19,26,-20C27,-22,30,-30,23,-30C16,-30,17,-23,17,-23L9,-23C9,-23,9,-27,11,-30H5V30H18L18,26L23,26C23,26,27,25,27,20C28,15,23,15,23,15C22,15,17,16,17,20H10C10,20,10,9,23,9C36,9,35,20,35,20C35,20,35,26,29,28L32,30H40M-15,20H-23V-9L-32,-6V-12L-16,-18H-15V20Z"),cut:me("M35,-45L5,-15L15,-5L50,-40V-45M0,3A3,3,0,0,1,-2,0A3,3,0,0,1,0,-2A3,3,0,0,1,3,0A3,3,0,0,1,0,3M-30,40A10,10,0,0,1,-40,30C-40,24,-35,20,-30,20A10,10,0,0,1,-20,30C-20,36,-24,40,-30,40M-30,-20A10,10,0,0,1,-40,-30C-40,-36,-35,-40,-30,-40A10,10,0,0,1,-20,-30C-20,-24,-24,-20,-30,-20M-12,-22C-11,-24,-10,-27,-10,-30A20,20,0,0,0,-30,-50A20,20,0,0,0,-50,-30A20,20,0,0,0,-30,-10C-27,-10,-24,-11,-22,-12L-10,0L-22,12C-24,11,-27,10,-30,10A20,20,0,0,0,-50,30A20,20,0,0,0,-30,50A20,20,0,0,0,-10,30C-10,27,-11,24,-12,22L0,10L35,45H50V40L-12,-22Z"),delete:me("M35,-40H18L13,-45H-12L-17,-40H-35V-30H35M-30,35A10,10,0,0,0,-20,45H20A10,10,0,0,0,30,35V-25H-30V35Z"),direction:me("M10,13V0H-10V15H-20V-5A5,5,0,0,1,-15,-10H10V-22L28,-5M49,-4L4,-49H3C2,-50,-2,-50,-4,-49L-49,-4C-50,-2,-50,2,-49,4L-4,49C-2,50,2,51,4,49L49,4C51,2,51,-2,49,-4Z"),down:me("M-30,-30L0,30,30,-30"),"down-double":me("M-30,-40L0,-10,30,-40M-30,10L0,40,30,10"),edit:me("M24,-46C22,-46,20,-46,19,-44L8,-34L35,-7L45,-17C48,-21,48,-25,45,-28L29,-44C28,-46,26,-46,24,-46M5,-30L-36,11L-23,12L-22,23L-11,24L-9,37L31,-3M-39,15L-47,49L-14,40L-15,29L-27,28L-28,16"),eraser:me("M21,-42L46,-17C50,-14,50,-7,46,-3L0,43C-8,50,-20,50,-28,43L-46,25C-50,21,-50,15,-46,11L7,-42C11,-46,17,-46,21,-42M-39,18L-21,36C-17,39,-11,39,-7,36L11,18L-14,-7L-39,18Z"),export:me("M-35,40H35V30H-35M35,-15H15V-45H-15V-15H-35L0,20L35,-15Z"),file:me("M10,-50H-30A10,10,0,0,0,-40,-40V40A10,10,0,0,0,-30,50H30A10,10,0,0,0,40,40V-20L10,-50M30,40H-30V-40H5V-15H30V40Z"),"flag-jp":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#fff",d:"M-60,45h120v-90h-120z"}],["circle",{fill:"#bc002d",r:24}]]],"flag-fr":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#002395",d:"M-60,45h40v-90h-40z"}],["path",{fill:"#fff",d:"M-20,45h40v-90h-40z"}],["path",{fill:"#ed2939",d:"M20,45h40v-90h-40z"}]]],"flag-it":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#009246",d:"M-60,45h40v-90h-40z"}],["path",{fill:"#fff",d:"M-20,45h40v-90h-40z"}],["path",{fill:"#ce2b37",d:"M20,45h40v-90h-40z"}]]],"flag-de":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,41h130v-82h-130z"}],["path",{fill:"#ffce00",d:"M-60,36h120v-24h-120z"}],["path",{fill:"#dd0000",d:"M-60,12h120v-24h-120z"}]]],"flag-en":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,37h130v-75h-130z"}],["path",{fill:"#bb133e",d:"M-60,32h120v-65h-120z"}],["path",{fill:"#fff",d:"M-60,22h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,12h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,2h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-8h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-18h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-28h120v5h-120z"}],["path",{fill:"#002664",d:"M-60,-33h48v35h-48z"}]]],folder:me("M40,30H-40V-20H40M40,-30H0L-10,-40H-40C-46,-40,-50,-36,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-20C50,-26,46,-30,40,-30Z"),font:me("M25,-20H40V40H45V45H25V40H30V25H10L3,40H10V45H-10V40H-5L25,-20M30,-15L13,20H30V-15M-35,-45H-10C-4,-45,0,-41,0,-35V20H-15V-5H-30V20H-45V-35C-45,-41,-41,-45,-35,-45M-30,-35V-15H-15V-35H-30Z"),"format-align-center":me("M-45,-45H45V-35H-45V-45M-25,-25H25V-15H-25V-25M-45,-5H45V5H-45V-5M-25,15H25V25H-25V15M-45,35H45V45H-45V35Z"),"format-align-justify":me("M-45,-45H45V-35H-45V-45M-45,-25H45V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H45V25H-45V15M-45,35H45V45H-45V35Z"),"format-align-left":me("M-45,-45H45V-35H-45V-45M-45,-25H15V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H15V25H-45V15M-45,35H45V45H-45V35Z"),"format-align-right":me(" M-45,-45H45V-35H-45V-45M-15,-25H45V-15H-15V-25M-45,-5H45V5H-45V-5M-15,15H45V25H-15V15M-45,35H45V45H-45V35Z "),"format-bold":me("M8,18H-10V3H8A8,8,0,0,1,15,10A8,8,0,0,1,8,18M-10,-27H5A8,8,0,0,1,13,-20A8,8,0,0,1,5,-12H-10M18,-6C23,-9,26,-15,26,-20C26,-31,18,-40,6,-40H-25V30H10C21,30,29,22,29,11C29,3,24,-3,18,-6Z"),"format-italic":me("M-10,-40V-25H1L-16,15H-30V30H10V15H-1L16,-25H30V-40H-10Z"),"format-float-center":me("M-15,-25H15V5H-15V-25M-45,-45H45V-35H-45V-45M-45,15H45V25H-45V15M-45,35H25V45H-45V35Z"),"format-float-left":me("M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-25V-15H-5V-25H45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-float-none":me("M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-float-right":me("M15,-25H45V5H15V-25M-45,-45H45V-35H-45V-45M5,-25V-15H-45V-25H5M-15,-5V5H-45V-5H-15M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-header":me("M-40,-40H-30V-10H-10V-40H0V30H-10V0H-30V30H-40V-40M13,-23L31,-5L13,13L20,20L45,-5L20,-30L13,-23Z"),"format-underline":me("M-35,45H35V35H-35V45M0,25A30,30,0,0,0,30,-5V-45H18V-5A18,18,0,0,1,0,13A18,18,0,0,1,-17,-5V-45H-30V-5A30,30,0,0,0,0,25Z"),fullscreen:me("M-35,-35H-10V-25H-25V-10H-35V-35M10,-35H35V-10H25V-25H10V-35M25,10H35V35H10V25H25V10M-10,25V35H-35V10H-25V25H-10Z"),gear:me("M0,18A18,18,0,0,1,-17,0A18,18,0,0,1,0,-17A18,18,0,0,1,18,0A18,18,0,0,1,0,18M37,5C37,3,38,2,38,0C38,-2,37,-3,37,-5L48,-13C49,-14,49,-15,48,-16L38,-34C38,-35,36,-35,35,-35L23,-30C20,-32,18,-33,14,-35L13,-48C12,-49,11,-50,10,-50H-10C-11,-50,-12,-49,-12,-48L-14,-35C-17,-33,-20,-32,-23,-30L-35,-35C-36,-35,-38,-35,-38,-34L-48,-16C-49,-15,-49,-14,-48,-13L-37,-5C-37,-3,-37,-2,-37,0C-37,2,-37,3,-37,5L-48,13C-49,14,-49,15,-48,16L-38,34C-38,35,-36,35,-35,35L-23,30C-20,32,-17,33,-14,35L-12,48C-12,49,-11,50,-10,50H10C11,50,12,49,13,48L14,35C18,33,20,32,23,30L35,35C36,35,38,35,38,34L48,16C49,15,49,14,48,13L37,5Z"),gps:me("M0,-20A20,20,0,0,1,20,0A20,20,0,0,1,0,20A20,20,0,0,1,-20,0A20,20,0,0,1,0,-20M-45,5H-55V-5H-45C-42,-26,-26,-42,-5,-45V-55H5V-45C26,-42,43,-26,45,-5H55V5H45C43,26,26,43,5,45V55H-5V45C-26,43,-42,26,-45,5M0,-35A35,35,0,0,0,-35,0A35,35,0,0,0,0,35A35,35,0,0,0,35,0A35,35,0,0,0,0,-35Z"),hand:me("M-10,-50A10,10,0,0,1,0,-40V-17C0,-17,10,-19,10,-14C10,-14,20,-15,20,-10C20,-10,30,-11,30,-6C30,-6,40,-7,40,-2V15C40,20,25,45,25,50H-15C-15,50,-25,15,-40,5C-40,5,-45,-25,-20,0V-40A10,10,0,0,1,-10,-50Z"),heart:me("M0,47L-7,40C-33,17,-50,1,-50,-17C-50,-33,-38,-45,-22,-45C-14,-45,-5,-41,0,-35C5,-41,14,-45,23,-45C38,-45,50,-33,50,-17C50,1,33,17,7,40L0,47Z"),hide:me("M-1,-15L15,1C15,1,15,0,15,0A15,15,0,0,0,0,-15C0,-15,-1,-15,-1,-15M-22,-11L-15,-3C-15,-2,-15,-1,-15,0A15,15,0,0,0,0,15C1,15,2,15,3,15L11,22C8,24,4,25,0,25A25,25,0,0,1,-25,0C-25,-4,-24,-8,-22,-11M-50,-39L-39,-27L-36,-25C-45,-18,-51,-10,-55,0C-46,22,-25,38,0,38C8,38,15,36,22,33L24,35L39,50L45,44L-44,-45M0,-25A25,25,0,0,1,25,0C25,3,24,6,23,9L38,24C45,18,51,9,55,0C46,-22,25,-37,0,-37C-7,-37,-14,-36,-20,-34L-9,-23C-6,-24,-3,-25,0,-25Z"),home:me("M-10,40V10H10V40H35V0H50L0,-45L-50,0H-35V40H-10Z"),image:me("M5,-15H33L5,-42V-15M-30,-50H10L40,-20V40A10,10,0,0,1,30,50H-30C-36,50,-40,46,-40,40V-40C-40,-46,-36,-50,-30,-50M-30,40H15L30,40V0L10,20L0,10L-30,40M-20,-15A10,10,0,0,0,-30,-5A10,10,0,0,0,-20,5A10,10,0,0,0,-10,-5A10,10,0,0,0,-20,-15Z"),import:me("M-15,20V-10H-35L0,-45L35,-10H15V20H-15M-35,40V30H35V40H-35Z"),improvement:me("M0,50A50,50,0,0,1,-50,0A50,50,0,0,1,0,-50A50,50,0,0,1,50,0A50,50,0,0,1,0,50M0,-25L-25,0H-10V20H10V0H25L0,-25Z"),info:me("M8,-40A8,8,0,0,0,0,-32A8,8,0,0,0,8,-25A8,8,0,0,0,15,-32A8,8,0,0,0,8,-40M6,-16C0,-16,-17,-3,-17,-3C-17,-2,-17,-2,-16,-1C-16,1,-16,1,-15,0C-14,0,-12,-2,-9,-3C1,-10,-8,6,-12,32C-14,45,-2,39,1,37C4,35,12,29,13,28C14,28,13,27,12,26C12,25,11,26,11,26C8,28,2,32,1,29C0,27,6,7,9,-6C10,-10,12,-17,6,-16Z"),left:["path",{fill:0,d:"M40,-5V5H-20L8,33L0,40L-39,0L0,-40L8,-32L-20,-5H40Z"}],"left-double":me("M-10,-30L-40,0,-10,30M40,-30L10,0,40,30"),link:me("M-7,7C-5,9,-5,12,-7,14C-9,16,-12,16,-14,14C-24,4,-24,-11,-14,-21V-21L4,-39C13,-49,29,-49,39,-39C49,-29,49,-13,39,-4L31,4C32,0,31,-4,29,-8L32,-11C38,-16,38,-26,32,-32C26,-38,16,-38,11,-32L-7,-14C-13,-8,-13,1,-7,7M7,-14C9,-16,12,-16,14,-14C24,-4,24,11,14,21V21L-4,39C-13,49,-29,49,-39,39C-49,29,-49,13,-39,4L-31,-4C-31,0,-31,4,-29,8L-32,11C-38,16,-38,26,-32,32C-26,38,-16,38,-11,32L7,14C13,8,13,-1,7,-7C5,-9,5,-12,7,-14Z"),location:me("M0,-2A13,13,0,0,1,-12,-15A13,13,0,0,1,0,-27A13,13,0,0,1,13,-15A13,13,0,0,1,0,-2M0,-50A35,35,0,0,0,-35,-15C-35,11,0,50,0,50C0,50,35,11,35,-15A35,35,0,0,0,0,-50Z"),logout:me("M25,26V10H-10V-10H25V-26L51,0L25,26M5,-50A10,10,0,0,1,15,-40V-20H5V-40H-40V40H5V20H15V40A10,10,0,0,1,5,50H-40A10,10,0,0,1,-50,40V-40A10,10,0,0,1,-40,-50H5Z"),mail:me("M40,-40H-40A10,10,0,0,0,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-30A10,10,0,0,0,40,-40M40,30H-40V-20L0,5L40,-20V30M40,-30L0,-5L-40,-30V-30H40V-30Z"),map:me("M15,35L-15,24V-35L15,-24M43,-45C42,-45,42,-45,42,-45L15,-34L-15,-45L-43,-35C-44,-35,-45,-34,-45,-33V43A3,3,0,0,0,-42,45C-42,45,-42,45,-42,45L-15,34L15,45L43,36C44,35,45,34,45,33V-42A3,3,0,0,0,43,-45Z"),"map-layer":me("M0,20L37,-9L45,-15L0,-50L-45,-15L-37,-9M0,33L-37,4L-45,10L0,45L45,10L37,4L0,33Z"),menu:me("M-45,-30H45V-20H-45V-30M-45,-5H45V5H-45V-5M-45,20H45V30H-45V20Z"),minus:me("M35,5H-35V-5H35V5Z"),"minus-o":me("M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M-25,5H25V-5H-25"),"minus-small":me("M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M25,-5V5H-25V-5H25Z"),more:me("M20,0A10,10,0,0,1,30,-10A10,10,0,0,1,40,0A10,10,0,0,1,30,10A10,10,0,0,1,20,0M-10,0A10,10,0,0,1,0,-10A10,10,0,0,1,10,0A10,10,0,0,1,0,10A10,10,0,0,1,-10,0M-40,0A10,10,0,0,1,-30,-10A10,10,0,0,1,-20,0A10,10,0,0,1,-30,10A10,10,0,0,1,-40,0Z"),movie:me("M44,-49L25,-45L38,-27L48,-29L44,-49M10,-42L0,-40L14,-23L24,-25L10,-42M-15,-37L-24,-35L-11,-18L-1,-20L-15,-37M-39,-32L-44,-32A10,10,0,0,0,-52,-20L-50,-10L-25,-15L-39,-32M-50,-10V40C-50,46,-45,50,-40,50H40C46,50,50,46,50,40V-10H-50Z"),ok:me("M45,-25L-15,35L-42,8L-35,0L-15,21L38,-32L45,-25Z"),pack:["path",{fill:0,d:"M45,23C45,24,44,26,42,27L3,49C2,50,1,50,0,50C-1,50,-2,50,-3,49L-42,27C-44,26,-45,24,-45,23V-22C-45,-24,-44,-26,-42,-27L-3,-49C-2,-50,-1,-50,0,-50C1,-50,2,-50,3,-49L42,-27C44,-26,45,-24,45,-22V23M0,-39L-35,-20V20L0,39L35,20V-20L0,-39M0,-29L24,-15L0,-1L-24,-15L0,-29M25,14L5,26V8L25,-3V14M-5,26L-25,14V-3L-5,8V26Z"}],pause:me("M10,35H30V-35H10M-30,35H-10V-35H-30V35Z"),play:me("M-20,-34V36L35,1L-20,-34Z"),plug:me("M20,-25V-45H10V-25H-10V-45H-20V-25H-20C-25,-25,-30,-20,-30,-15V13L-12,30V45H13V30L30,13V-15C30,-20,25,-25,20,-25Z"),plus:me("M35,5H5V35H-5V5H-35V-5H-5V-35H5V-5H35V5Z"),"plus-o":me("M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M5,-25H-5V-5H-25V5H-5V25H5V5H25V-5H5V-25Z"),"plus-small":me("M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M-5,-25H5V-5H25V5H5V25H-5V5H-25V-5H-5V-25Z"),print:["path",{fill:0,d:"M30,-45H-30V-25H30M35,0A5,5,0,0,1,30,-5A5,5,0,0,1,35,-10A5,5,0,0,1,40,-5A5,5,0,0,1,35,0M20,35H-20V10H20M35,-20H-35A15,15,0,0,0,-50,-5V25H-30V45H30V25H50V-5A15,15,0,0,0,35,-20Z"}],question:me("M-10,35H5V50H-10V35M0,-50C27,-49,38,-22,23,-2C18,3,12,7,8,11C5,15,5,20,5,25H-10C-10,17,-10,10,-7,5C-3,0,3,-3,8,-7C20,-18,17,-34,0,-35A15,15,0,0,0,-15,-20H-30A30,30,0,0,1,0,-50Z"),redo:me("M32,-7C23,-15,11,-20,-2,-20C-26,-20,-45,-5,-52,16L-40,20C-35,4,-20,-7,-2,-7C7,-7,16,-4,23,2L5,20H50V-25L32,-7Z"),refresh:me("M28,-28C21,-35,11,-40,0,-40A40,40,0,0,0,-40,0A40,40,0,0,0,0,40C19,40,34,27,39,10H28C24,22,13,30,0,30A30,30,0,0,1,-30,0A30,30,0,0,1,0,-30C8,-30,16,-27,21,-21L5,-5H40V-40L28,-28Z"),report:me("M10,-50H-30A10,10,0,0,0,-40,-40V40A10,10,0,0,0,-30,50H30A10,10,0,0,0,40,40V-20L10,-50M30,40H-30V-40H5V-15H30V40M-10,5H-25V-5H-10V5M10,5H-5V-5H10V5M-10,20H-25V10H-10V20M10,20H-5V10H10V20M-10,35H-25V25H-10V35M10,35H-5V25H10V35Z"),right:["path",{fill:0,d:"M-40,-5V5H20L-7,33L0,40L39,0L0,-40L-7,-32L20,-5H-40Z"}],"right-double":me("M10,-30L40,0,10,30M-40,-30L-10,0,-40,30"),run:me("M23,-32A10,10,0,0,0,33,-42A10,10,0,0,0,23,-52A10,10,0,0,0,13,-42A10,10,0,0,0,23,-32M5,37L10,15L20,25V55H30V18L20,8L23,-7C29,0,39,5,50,5V-5C41,-5,33,-9,28,-17L23,-25C22,-28,18,-30,15,-30C13,-30,13,-29,11,-29L-15,-18V5H-5V-12L4,-15L-4,25L-28,20L-30,30L5,37M-40,-15A5,5,0,0,1,-45,-20A5,5,0,0,1,-40,-25H-25V-15H-40M-35,-35A5,5,0,0,1,-40,-40A5,5,0,0,1,-35,-45H-10V-35H-35M-45,5A5,5,0,0,1,-50,0A5,5,0,0,1,-45,-5H-25V5H-45Z"),search:me("M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z"),select:me("M35,35H-35V-35H15V-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-5H35M-20,-10L-27,-2L-5,20L45,-30L38,-37L-5,6L-20,-10Z"),sitemap:me("M-15,-50V-20H-5V-5H-35C-41,-5,-45,-1,-45,5V20H-55V50H-25V20H-35V5H-5V20H-15V50H15V20H5V5H35V20H25V50H55V20H45V5C45,-1,41,-5,35,-5H5V-20H15V-50H-15Z"),unselect:me("M35,-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-35C45,-41,41,-45,35,-45M35,-35V35H-35V-35H35Z"),share:me("M30,20C26,20,23,22,20,24L-15,3C-15,2,-15,1,-15,0C-15,-1,-15,-2,-15,-3L20,-24C23,-22,26,-20,30,-20A15,15,0,0,0,45,-35A15,15,0,0,0,30,-50A15,15,0,0,0,15,-35C15,-34,15,-33,15,-31L-20,-11C-22,-13,-26,-15,-30,-15A15,15,0,0,0,-45,0A15,15,0,0,0,-30,15C-26,15,-22,13,-20,11L16,32C16,33,15,34,15,35C15,43,22,50,30,50C38,50,45,43,45,35A15,15,0,0,0,30,20Z"),show:me("M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M0,25A25,25,0,0,1,-25,0A25,25,0,0,1,0,-25A25,25,0,0,1,25,0A25,25,0,0,1,0,25M0,-37C-25,-37,-46,-22,-55,0C-46,22,-25,38,0,38C25,38,46,22,55,0C46,-22,25,-37,0,-37Z"),"skip-next":me("M20,30H30V-30H20M-30,30L13,0L-30,-30V30Z"),"skip-next2":me("M-40,-35V35L-5,0M30,-35V35H40V-35M-5,-35V35L30,0"),"skip-prev":me("M-30,30V-30H-20V30H-30M-12,0L30,-30V30L-12,0Z"),"skip-prev2":me("M40,-35V35L5,0M-30,-35V35H-40V-35M5,-35V35L-30,0"),speaker:me("M40,35L33,28C41,21,45,11,45,0C45,-11,41,-21,33,-28L40,-35C49,-26,55,-14,55,0C55,14,49,26,40,35M26,21L19,14C23,11,25,6,25,0C25,-6,23,-11,19,-14L26,-21C32,-16,35,-8,35,0C35,8,32,16,26,21M-40,-45H0A10,10,0,0,1,10,-35V35A10,10,0,0,1,0,45H-40A10,10,0,0,1,-50,35V-35A10,10,0,0,1,-40,-45M-20,-35A10,10,0,0,0,-30,-25A10,10,0,0,0,-20,-15A10,10,0,0,0,-10,-25A10,10,0,0,0,-20,-35M-20,-5A20,20,0,0,0,-40,15A20,20,0,0,0,-20,35A20,20,0,0,0,0,15A20,20,0,0,0,-20,-5M-20,5A10,10,0,0,1,-10,15A10,10,0,0,1,-20,25A10,10,0,0,1,-30,15A10,10,0,0,1,-20,5Z"),"speaker-off":me("M-50,-34L-44,-40L45,49L39,55L31,48C30,49,28,50,25,50H-25C-31,50,-35,46,-35,40V-19L-50,-34M0,30A15,15,0,0,1,-15,15C-15,11,-14,8,-11,5L-18,-2C-22,3,-25,8,-25,15A25,25,0,0,0,0,40C7,40,13,38,17,33L10,26C7,29,4,30,0,30M25,15A25,25,0,0,0,0,-10H-1L-34,-43C-33,-47,-29,-50,-25,-50H25A10,10,0,0,1,35,-40V26L25,16V15M0,-40C-6,-40,-10,-36,-10,-30A10,10,0,0,0,0,-20A10,10,0,0,0,10,-30C10,-36,5,-40,0,-40Z"),"split-vertical":me("M30,20V5H15V50H5V-50H15V-5H30V-20L50,0L30,20M-50,0L-30,20V5H-15V50H-5V-50H-15V-5H-30V-20L-50,0Z"),"split-horizontal":me("M-20,30H-5V15H-50V5H50V15H5V30H20L0,50L-20,30M0,-50L-20,-30H-5V-15H-50V-5H50V-15H5V-30H20L0,-50Z"),star:me("M0,26L31,45L23,10L50,-14L14,-17L0,-50L-14,-17L-50,-14L-23,10L-31,45L0,26Z"),stat:me("M-45,50V-20H-25V50H-45M-10,50V-50H10V50H-10M25,50V10H45V50H25Z"),switch:me("M-45,-40V3L-30,-12L-15,5C-10,10,-10,15,-10,15V45H10V10C10,10,10,5,7,0C5,-5,0,-10,0,-10L-15,-27L-2,-40M30,-40L8,-18L10,-15C10,-15,15,-10,17,-5C18,-3,19,-1,19,1L45,-25"),"tri-down":me("M-23,-17L0,6L23,-17L30,-10L0,20L-30,-10L-23,-17Z"),"tri-left":me("M17,23L-6,0L17,-23L10,-30L-20,0L10,30L17,23Z"),"tri-right":me("M-17,23L6,0L-17,-23L-10,-30L20,0L-10,30L-17,23Z"),"tri-up":me("M-23,17L0,-6L23,17L30,10L0,-20L-30,10L-23,17Z"),twitter:me("M52,-30C48,-28,44,-27,40,-27C44,-29,48,-33,49,-38C45,-36,41,-34,36,-33C32,-37,26,-40,20,-40C8,-40,-1,-30,-1,-19C-1,-17,-1,-15,-1,-14C-19,-15,-34,-23,-45,-36C-47,-33,-48,-29,-48,-25C-48,-18,-44,-11,-38,-7C-42,-7,-45,-8,-48,-10C-48,-10,-48,-10,-48,-10C-48,1,-41,9,-31,11C-33,12,-35,12,-37,12C-38,12,-39,12,-41,12C-38,20,-30,26,-21,26C-28,32,-37,36,-47,36C-49,36,-51,36,-52,35C-43,41,-31,45,-19,45C20,45,42,12,42,-16C42,-17,42,-18,42,-19C46,-22,49,-26,52,-30Z"),undo:me("M3,-20C-11,-20,-23,-15,-32,-7L-50,-25V20H-5L-23,2C-16,-4,-7,-7,3,-7C20,-7,35,4,41,20L52,16C45,-5,26,-20,3,-20Z"),up:me("M-30,30L0,-30,30,30"),"up-double":me("M-30,40L0,10,30,40M-30,-10L0,-40,30,-10"),user:me("M0,-40A20,20,0,0,1,20,-20A20,20,0,0,1,0,0A20,20,0,0,1,-20,-20A20,20,0,0,1,0,-40M0,10C22,10,40,19,40,30V40H-40V30C-40,19,-22,10,0,10Z"),wait:me("M0,-5A5,5,0,0,0,-5,0A5,5,0,0,0,0,5A5,5,0,0,0,5,0A5,5,0,0,0,0,-5M3,-50C25,-50,26,-32,14,-26C9,-24,7,-19,6,-14C8,-13,10,-11,12,-9C30,-19,50,-15,50,3C50,25,32,26,26,14C24,9,19,7,14,6C13,8,11,10,9,12C19,30,15,50,-2,50C-25,50,-25,32,-14,26C-9,24,-7,19,-6,14C-8,13,-10,11,-12,9C-30,19,-50,15,-50,-2C-50,-25,-32,-26,-26,-14C-24,-9,-19,-7,-14,-6C-13,-8,-11,-10,-9,-12C-19,-30,-15,-50,3,-50Z"),"zoom-in":me("M18,10L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18M-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10M0,-10H-10V0H-15V-10H-25V-15H-15V-25H-10V-15H0V-10Z"),"zoom-out":me("M18,10H14L12,9C17,3,20,-4,20,-12A33,33,0,0,0,-12,-45A33,33,0,0,0,-45,-12A33,33,0,0,0,-12,20C-4,20,3,17,9,12L10,14V18L35,43L43,35L18,10M-12,10C-25,10,-35,0,-35,-12C-35,-25,-25,-35,-12,-35C0,-35,10,-25,10,-12C10,0,0,10,-12,10M-25,-15H0V-10H-25V-15Z"),warning:me("M0,-50L-55,45H55M0,-30L38,35H-38M-5,-10V10H5V-10M-5,20V30H5V20")},be={add:"plus",back:"left",help:"question",save:"export"},ge=0,ye=Object.keys(be);ge<ye.length;ge++){var we=ye[ge],xe=be[we];ve[we]=ve[xe]}var ke;n(45);!function(e){e[e.B=0]="B",e[e.W=1]="W",e[e.P=2]="P",e[e.PD=3]="PD",e[e.PL=4]="PL",e[e.S=5]="S",e[e.SD=6]="SD",e[e.SL=7]="SL"}(ke||(ke={}));var Ce=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).refIcon=void 0,n.visible=void 0,n.timeoutHandle=void 0,n.refIcon=s.createRef(),n.visible=!1,n.timeoutHandle=0,n}return Object(k.a)(t,e),Object(y.a)(t,null,[{key:"isValidIconName",value:function(e){return"undefined"!==typeof ve[e]}},{key:"getAllIconNames",value:function(){return Object.keys(ve).sort()}}]),Object(y.a)(t,[{key:"triggerVisibleAnimation",value:function(){var e=this,t=this.refIcon.current,n=this.visible;t&&(this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=0),requestAnimationFrame(function(){if(n)t.classList.remove("zero");else{t.classList.add("zero");var r=e.props.onHide;"function"===typeof r&&(e.timeoutHandle=window.setTimeout(r,300))}}))}},{key:"render",value:function(){var e=this,t=this.props,n=O(t.visible,!0),r=O(t.enabled,!0),a=O(t.animate,!1),i=O(t.flipH,!1),o=O(t.flipV,!1),c=de(t.size,"28px"),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ok";return Array.isArray(e)?e:ve[e]||[]}(t.content),l=pe(t.rotate,0),h=t.onClick,p=["tfw-view-icon"],f=Le(u,t);if(!f)return null;r||p.push("disabled"),a&&p.push("animate"),n&&p.push("zero"),"function"===typeof h&&r&&p.push("active");var d="";0!==l&&(d+="rotate(".concat(l,"deg) ")),(i||o)&&(d+="scale(".concat(i?-1:1,",").concat(o?-1:1,")"));var m={width:c,height:c};return d.length>0&&(m.transform=d),requestAnimationFrame(function(){return e.triggerVisibleAnimation()}),this.visible=n,s.createElement("svg",{className:p.join(" "),ref:this.refIcon,viewBox:"-65 -65 130 130",preserveAspectRatio:"xMidYMid",width:c,height:c,onClick:r?h:void 0,style:m},f,s.createElement("g",{strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},Le(u,t)))}}]),t}(s.Component);function Le(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e[0],a=function(e){var t,n,r=Object(C.a)(e,3),a=(r[0],r[1]),i=r[2];Array.isArray(a)?n=a:"undefined"!==typeof a&&(t=a);Array.isArray(i)?n=i:"undefined"!==typeof i&&(t=i);"undefined"===typeof t&&(t={});"undefined"===typeof n&&(n=[]);return{attributes:t,children:n}}(e),i=a.attributes,o=a.children;if("undefined"===typeof r)return s.createElement("g",{key:n});var c=function(e,t){var n=(e.className||"").split(" ");return["fill","stroke"].forEach(function(r){var a="".concat(e[r]);if("undefined"!==typeof a&&"undefined"!==a){var i="".concat(a).toUpperCase();if(-1!==He.indexOf(i)||-1!==Oe.indexOf(i)){if(-1!==Oe.indexOf(a)){var s=function(e,t){switch(e){case"0":return t.pen0||"#000";case"1":return t.pen1||"#fff";case"2":return t.pen2||"#f00";case"3":return t.pen3||"#0f0";case"4":return t.pen4||"#00f";case"5":return t.pen5||"#0ff";case"6":return t.pen6||"#f0f";case"7":return t.pen7||"#ff0"}return"#000"}(a,t);if("string"===typeof s)return void(-1===He.indexOf(s)?e[r]=s:(delete e[r],n.push("thm-svg-".concat(r).concat(s))))}delete e[r],n.push("thm-svg-".concat(r).concat(i))}}}),e.className=n.join(" ").trim(),e}(Object(d.a)({},i),t);return n.length>0&&(c.key=n),s.createElement(r,c,o.map(function(e,n){return Le(e,t,"".concat(n))}))}var He=["P","PL","PD","S","SL","SD"],Oe="01234567";n(46);var Ve=function(e){function t(){return Object(g.a)(this,t),Object(w.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.label;return"string"!==typeof e||0===e.trim().length?null:o.a.createElement("label",{className:"tfw-view-Label",htmlFor:this.props.htmlFor},this.props.label)}}]),t}(o.a.Component),je={add:function(e){Ae||(Ae=!0,document.addEventListener("keydown",function(e){"Escape"===e.key&&Ee()},!0));Me.push(e)},fire:Ee},Me=[],Ae=!1;function Ee(){if(0!==Me.length){var e=Me.pop();"function"===typeof e&&e()}}var Se=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).touchable=void 0,n.ref=s.createRef(),n.list=s.createRef(),n.button=s.createRef(),n.bigList=void 0,n.keys=[],n.selectedKey="",n.selectedIndex=-1,n.handleClick=n.handleClick.bind(Object(L.a)(Object(L.a)(n))),n.touchable=new he({onTap:n.handleClick}),n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"handleClick",value:function(){this.expand()}},{key:"_swapItems",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.keys[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value;if(this.props.value!==i){var s=this.props.onChange;return void("function"===typeof s&&s(i))}}}catch(o){t=!0,n=o}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"_computeDimensions",value:function(e,t){var n=e.getBoundingClientRect(),r=n.left,a=n.top,i=n.height,s=t.getBoundingClientRect().width;return a+(i=Math.min(i,window.innerHeight-32))>window.innerHeight&&(a-=32*Math.ceil(window.innerHeight-a-i/32)),a<0&&(a+=32*Math.ceil(-a/32)),{left:r,top:a,width:s,height:i}}},{key:"_showList",value:function(e,t,n,r,a){var i=document.createElement("div");i.className="tfw-view-combo-screen";var s=document.createElement("div");return s.className="thm-ele-nav thm-bg3",s.innerHTML=e.innerHTML,s.style.top="".concat(n,"px"),s.style.left="".concat(t,"px"),s.style.width="".concat(r,"px"),s.style.height="".concat(a,"px"),i.appendChild(s),document.body.appendChild(i),this.bigList=s,{screen:i,bigList:s}}},{key:"_ensureSelectionVisible",value:function(){var e=0,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0)||this.bigList;if(t){var n=t.querySelectorAll("div.item"),r=!0,a=!1,i=void 0;try{for(var s,o=this.keys[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=n[e];if(c===this.selectedKey){var l=t.getBoundingClientRect();t.scrollTop=32*e-l.height/2,this.selectedIndex=e,u.classList.add("thm-bgSL")}else u.classList.remove("thm-bgSL");e++}}catch(h){a=!0,i=h}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}}}},{key:"_handleKeyboard",value:function(e){switch(e.key){case"ArrowDown":return this.selectedIndex++,this.selectedKey=this.keys[this.selectedIndex%this.keys.length],this._ensureSelectionVisible(),e.preventDefault(),void e.stopPropagation();case"ArrowUp":return this.selectedIndex=(this.selectedIndex+this.keys.length-1)%this.keys.length,this.selectedKey=this.keys[this.selectedIndex],this._ensureSelectionVisible(),e.preventDefault(),void e.stopPropagation();case"Enter":case" ":var t=this.props.onChange;return"function"===typeof t&&t(this.selectedKey),je.fire(),e.preventDefault(),void e.stopPropagation()}}},{key:"expand",value:function(){var e=this;if(this.keys.length<3)this._swapItems();else{var t=this.list.current,n=this.button.current;if(t&&n){var r=this._computeDimensions(t,n),a=r.left,i=r.top,s=r.width,o=r.height,c=this._showList(t,a,i,s,o),u=c.screen,l=c.bigList;this.selectedKey=this.props.value||"",window.setTimeout(function(){return e._ensureSelectionVisible(l)},10);var h=this._handleKeyboard.bind(this);document.addEventListener("keydown",h,!0),je.add(function(){document.body.removeChild(u),document.removeEventListener("keydown",h,!0)}),B(u).on({tap:function(){je.fire()}}),B(l).on({tap:function(t){if(t&&"undefined"!==typeof t.y){var n=l.scrollTop,r=Math.floor((t.y+n)/32),a=e.keys[r];je.fire(),requestAnimationFrame(function(){"function"===typeof e.props.onChange&&e.props.onChange(a)})}}})}}}},{key:"componentDidMount",value:function(){var e=this.ref.current;e&&(this.touchable.element=e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=H(e.label,"").trim(),r=O(e.wide,!1),a=function(e,t){var n=V(e,[]),r=t.length;for(;n.length<r;)n.push("".concat(n.length));for(var a=0;a<n.length;a++)0===n[a].trim().length&&(n[a]="".concat(a));return t.forEach(function(e,t){var r=e.key;"string"===typeof r?n[t]=r:e.key=n[t]}),n}(e.keys,t),i=H(e.value,a[0]),o=["tfw-view-combo"],c=t.map(function(e,t){var n=e.key||"item-".concat(t);return s.createElement("div",{className:"item",key:n}," ",e," ")});r&&o.push("wide"),this.keys=a;var u=function(e,t){var n=e.indexOf(t);return Math.max(0,n)}(a,i);return s.createElement("button",{ref:this.ref,className:o.join(" ")},n.length>0?s.createElement(Ve,{label:n}):null,s.createElement("div",{ref:this.button,className:"button thm-bg3 thm-ele-button"},s.createElement("div",{className:"list-container",style:{transform:"translateY(-".concat(32*u,"px)")}},s.createElement("div",{ref:this.list,className:"tfw-view-combo-list"},c)),s.createElement("div",{className:"icon"},s.createElement(Ce,{size:"24px",content:"down"}))))}}]),t}(s.Component);n(47);var Pe=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(a)))).input=s.createRef(),n.handleKeyDown=function(e){if("Enter"===e.key){e.preventDefault(),e.stopPropagation();var t=n.props,r=t.onEnterPressed,a=t.value;"function"===typeof r&&r(a)}},n.onFocus=function(e){var t=n.input?n.input.current:null;t&&t.classList&&(t.classList.remove("thm-bg3"),t.classList.add("thm-bgSL"),"number"!==n.props.type&&t.setSelectionRange(0,t.value.length))},n.onBlur=function(e){var t=n.input?n.input.current:null;t&&t.classList&&(t.classList.add("thm-bg3"),t.classList.remove("thm-bgSL"))},n.onChange=function(e){var t=n.props.onChange;"function"===typeof t&&(e.preventDefault(),t(e.target.value))},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=H(e.type,"text"),n=H(e.label,""),r=H(e.value,""),a=H(e.placeholder,""),i=O(e.valid,!0),o=O(e.wide,!1),c=O(e.focus,!1),u=O(e.enabled,!0),l=Math.max(1,pe(e.size,8)),h=de(e.width,"auto"),p="tfw-view-input-".concat(Ie++),f=["tfw-view-input"];o&&f.push("wide"),i||f.push("invalid");var d="thm-ele-button "+(u?"thm-bg3":"thm-bg0");return s.createElement("div",{className:f.join(" "),style:{width:h,maxWidth:h}},s.createElement(Ve,{htmlFor:p,label:n}),s.createElement("input",{ref:this.input,autoFocus:c,className:d,placeholder:a,disabled:!u,type:t,id:p,size:l,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onKeyDown:this.handleKeyDown,value:r}))}}]),t}(s.Component),Ie=0;var Ne=n(12),Te=(n(48),function(e){function t(){return Object(g.a)(this,t),Object(w.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=O(e.wide,!0),n=H(e.dir,"row"),r={justifyContent:H(e.justifyContent,"space-around"),alignItems:H(e.alignItems,"center"),flexWrap:H(e.wrap,"wrap")},a=["tfw-view-flex","dir-".concat(n)];return a.push.apply(a,Object(Ne.a)(V(e.classes))),t&&a.push("wide"),s.createElement("div",{className:a.join(" "),style:r},e.children)}}]),t}(s.Component)),_e={fullHD:[1920,1080],thumbnail:[160,120],presentation:[800,600],ultraHD:[3840,2160]},Be={medium:50,quick:1,low:10,high:250,ultra:1250};function De(e){var t=_e[e];if(!t)return"";var n=Object(C.a)(t,2),r=n[0],a=n[1];return"(".concat(r," x ").concat(a,")")}var Re=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleWidthChange=function(e){var t=parseInt(e,10);isNaN(t)||n.props.onWidthChange(t)},n.handleHeightChange=function(e){var t=parseInt(e,10);isNaN(t)||n.props.onHeightChange(t)},n.handleSizeKeyChange=function(e){n.props.onSizeKeyChange(e)},n.handleSamplesChange=function(e){var t=parseInt(e,10);isNaN(t)||n.props.onSamplesChange(t)},n.handleSamplesKeyChange=function(e){n.props.onSamplesKeyChange(e)},n.handleFilenameChange=function(e){n.props.onFilenameChange(e)},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props;return o.a.createElement("div",{className:"webBrayns-dialog-screenshot"},o.a.createElement(Pe,{wide:!0,label:"File name",value:"".concat(e.filename),onChange:this.handleFilenameChange}),o.a.createElement(Se,{value:e.sizeKey,wide:!0,onChange:this.handleSizeKeyChange},o.a.createElement("div",{key:"ultraHD"},"Ultra HD ",o.a.createElement("em",null,De("ultraHD"))),o.a.createElement("div",{key:"fullHD"},"Full HD ",o.a.createElement("em",null,De("fullHD"))),o.a.createElement("div",{key:"presentation"},"Presentation ",o.a.createElement("em",null,De("presentation"))),o.a.createElement("div",{key:"thumbnail"},"Thumbnail ",o.a.createElement("em",null,De("thumbnail"))),o.a.createElement("div",{key:"custom"},"Custom...")),o.a.createElement(Te,null,o.a.createElement(Pe,{label:"Width",value:"".concat(e.width),enabled:"custom"===e.sizeKey,onChange:this.handleWidthChange}),o.a.createElement(Pe,{label:"Height",value:"".concat(e.height),enabled:"custom"===e.sizeKey,onChange:this.handleHeightChange})),o.a.createElement(Se,{value:e.samplesKey,wide:!0,onChange:this.handleSamplesKeyChange},o.a.createElement("div",{key:"quick"},"Quick and dirty"),o.a.createElement("div",{key:"low"},"Low quality"),o.a.createElement("div",{key:"medium"},"Medium quality"),o.a.createElement("div",{key:"high"},"High quality"),o.a.createElement("div",{key:"ultra"},"Very high quality"),o.a.createElement("div",{key:"custom"},"Custom...")),o.a.createElement(Pe,{wide:!0,label:"Sampling",value:"".concat(e.samples),enabled:"custom"===e.samplesKey,onChange:this.handleSamplesChange}))}}]),t}(o.a.Component),ze=Object.keys(_e)[0],Ze=Object.keys(Be)[0],qe={INITIAL_STATE:{snapshot:v.local.get("state/dialogs/snapshot",{filename:"snapshot",sizeKey:ze,width:_e[ze][0],height:_e[ze][1],samplesKey:Ze,samples:Be[Ze]})},reducer:function(e,t){var n=t.type;if(!n.startsWith("dialogs:"))return e;switch(t.type.substr("dialogs:".length)){case"update-snapshot":return function(e,t){var n=Object.assign(e,{snapshot:Object.assign(e.snapshot,t.snapshot)});return v.local.set("state/dialogs/snapshot",n.snapshot),n}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},updateSnapshot:function(e){return{type:"".concat("dialogs:","update-snapshot"),snapshot:e}}};var Fe={INITIAL_STATE:[],reducer:function(e,t){var n=t.type;if(!n.startsWith("models:"))return e;switch(t.type.substr("models:".length)){case"add":return function(e,t){var n=e.slice();return n.push(t.model),n}(e,t);case"reset":return function(e,t){var n=[];return t.models.filter(function(e){var t=e.id,r=n.includes(t);return!r&&(n.push(t),!0)})}(0,t);case"update":return function(e,t){var n=t.model,r=e.filter(function(e){return e.brayns.id!==n.brayns.id});return r.push(n),r}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},add:function(e){return{type:"".concat("models:","add"),model:e}},reset:function(e){return{type:"".concat("models:","reset"),models:e}},update:function(e){return{type:"".concat("models:","update"),model:e}}};var We={INITIAL_STATE:{panel:"models",showConsole:!1},reducer:function(e,t){var n=t.type;if(!n.startsWith("navigation:"))return e;switch(t.type.substr("navigation:".length)){case"set-panel":return function(e,t){return Object.assign(e,{panel:t.panel})}(e,t);case"toggle-console-visibility":return function(e){return Object.assign(e,{showConsole:!e.showConsole})}(e);default:throw Error('Unknown action "'.concat(n,'"!'))}},setPanel:function(e){return{type:"".concat("navigation:","set-panel"),panel:e}},toggleConsoleVisibility:function(){return{type:"".concat("navigation:","toggle-console-visibility")}}};var Ge={INITIAL_STATE:{path:"",root:"",files:[],folders:[]},reducer:function(e,t){var n=t.type;if(!n.startsWith("path:"))return e;switch(t.type.substr("path:".length)){case"update":return function(e,t){return Object(d.a)({},e,t.state)}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},update:function(e){return{type:"".concat("path:","update"),state:e}}};var Ue={INITIAL_STATE:{activated:!1,minX:0,maxX:1,latitude:0,longitude:0,collageDepth:1},reducer:function(e,t){var n=t.type;if(!n.startsWith("slicer:"))return e;switch(t.type.substr("slicer:".length)){case"update":return function(e,t){return Object.assign(e,t.sliceInfo)}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},update:function(e){return{type:"".concat("slicer:","update"),sliceInfo:e}}};var Ye={animation:f.INITIAL_STATE,currentModel:m.INITIAL_STATE,dialogs:qe.INITIAL_STATE,models:Fe.INITIAL_STATE,navigation:We.INITIAL_STATE,path:Ge.INITIAL_STATE,slicer:Ue.INITIAL_STATE};var Xe=Object(p.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;return{animation:f.reducer(e.animation,t),currentModel:m.reducer(e.currentModel,t),dialogs:qe.reducer(e.dialogs,t),models:Fe.reducer(e.models,t),navigation:We.reducer(e.navigation,t),path:Ge.reducer(e.path,t),slicer:Ue.reducer(e.slicer,t)}}),Ke={store:Xe,dispatch:Xe.dispatch,Animation:f,CurrentModel:m,Dialogs:qe,Models:Fe,Navigation:We,Path:Ge,Slicer:Ue},Je={browse:function(){return $e.apply(this,arguments)}},Qe="/gpfs/bbp.cscs.ch/project/";function $e(){return($e=Object(i.a)(a.a.mark(function e(){var t,n,r,i,s,o,c,u=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:"",e.next=3,h.exec("dir",{path:t});case 3:if("number"!==typeof(n=e.sent).code){e.next=6;break}throw n;case 6:return r=n.children,i=n.path,s=[],o=[],r.forEach(function(e){var t=e.name;"undefined"===typeof e.size?o.push(t):s.push(t)}),c={path:i,root:Qe,files:s,folders:o},Ke.dispatch(Ke.Path.update(c)),e.abrupt("return",c);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var et={parse:function(){var e={},t=location.search;return t.length<2?e:(t.substring(1).split("&").forEach(function(t,n){var r=t.split("+").join(" "),a=r.indexOf("=");if(-1===a)e["".concat(n)]=r;else{var i=r.substr(0,a),s=r.substr(a+1);e[i]=decodeURIComponent(s)}}),e)}};n(49),n(50);function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"undefined"===typeof e?t:Array.isArray(e)?e:[e]}var nt,rt=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).touchable=void 0,n.ref=void 0,n.handleClick=n.handleClick.bind(Object(L.a)(Object(L.a)(n))),n.touchable=new he({onTap:n.handleClick}),n.ref=s.createRef(),n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.ref.current;e&&(this.touchable.element=e)}},{key:"handleClick",value:function(){var e=this.props.onClick;"function"===typeof e&&e(this.props.tag)}},{key:"render",value:function(){var e=this.props,t=H(e.label,""),n=H(e.icon,""),r=O(e.wide,!1),a=O(e.wait,!1),i=O(e.flat,!1),o=O(e.small,!1),c=!a&&O(e.enabled,!0),u=O(e.warning,!1),l=["tfw-view-button"].concat(tt(e.classes));return r&&l.push("wide"),i?(l.push("flat"),l.push(u?"thm-fgS":"thm-fgP")):(c&&l.push("thm-ele-button"),l.push(u?"thm-bgS":"thm-bgP")),o&&l.push("small"),0===t.length&&l.push("floating"),this.touchable.enabled=c,s.createElement("button",{ref:this.ref,className:l.join(" "),disabled:!c},n.length>0?s.createElement(Ce,{content:n,animate:a,size:"".concat(o?1.375:1.875,"rem")}):null,t.length>0?s.createElement("div",{className:"text"}," ",t," "):null)}}]),t}(s.Component),at=n(15),it=localStorage.getItem("CurrentLanguage")||navigator.language.split("-")[0],st=function(){function e(t){Object(g.a)(this,e),this.translations=t}return Object(y.a)(e,[{key:"translate",value:function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.translations[it]){var a=this.translations[it][e];if(a)return ot(a,n)}for(var i=Object.keys(this.translations),s=0,o=i;s<o.length;s++){var c=o[s],u=this.translations[c][e];if("string"===typeof u)return ot(u,n)}return console.error('Missing translation for item "'.concat(e,'"!'),n),""}catch(l){throw Error('Error while looking for a translation of "'.concat(e,'":\n').concat(l))}}}],[{key:"make",value:function(t){var n=new e(t);return n.translate.bind(n)}},{key:"toIntl",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"string"!==typeof t?t:Object(at.a)({},n||e.lang,t):Object(at.a)({},n||e.lang,"")}},{key:"toText",value:function(t,n){if(!t)return"";if("string"===typeof t)return t;"undefined"===typeof n&&(n=e.lang);var r=t[n];if("string"===typeof r)return r;var a=t[Object.keys(t)[0]];return"string"===typeof a?a:""}},{key:"addTextToIntl",value:function(t,n,r){(r=e.toIntl(r,t))[t]=n;for(var a={},i=0,s=Object.keys(r);i<s.length;i++){var o=s[i],c=r[o];0!==c.trim().length&&(a[o]=c)}return a}},{key:"lang",get:function(){return it},set:function(e){if("string"===typeof e){var t=e.split("-")[0];it=t,localStorage.setItem("CurrentLanguage",t)}}}]),e}();function ot(e,t){for(var n="",r=0,a=nt.Text,i=-1,s=0;s<e.length;s++){var o=e.charAt(s);switch(a){case nt.Text:"\\"===o?(a=nt.Escape,n+=e.substr(r,s-r),r=s+1):"$"===o&&(a=nt.Placeholder,n+=e.substr(r,s-r),r=s+2);break;case nt.Escape:a=nt.Text;break;case nt.Placeholder:if(a=nt.Text,i=parseInt(o,10),isNaN(i))throw Error("Parsing error at position ".concat(s,' for translation "').concat(e,'"!\nEscape "$" if you don\'t want to use a placeholder.'));n+=t[i-1]||"";break;default:a=nt.Text}}return n+e.substr(r)}!function(e){e[e.Text=0]="Text",e[e.Escape=1]="Escape",e[e.Placeholder=2]="Placeholder"}(nt||(nt={}));var ct=st.make(n(51)),ut={alert:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(t,n){var r=new lt({onClose:t,content:e,maxWidth:420});r.footer=s.createElement(rt,{icon:"close",label:ct("close"),flat:!0,onClick:function(){try{t()}catch(e){console.error("Error in the resolution of tfw/factory/dialog/alert!",e),n(e)}finally{r.hide()}}}),r.show()})},confirm:function(e,t){return new Promise(function(n){var r=new lt({title:e,content:t}),a=function(e){r.hide(),n(e)};r.onClose=function(){return a(!1)};var i=s.createElement(rt,{key:"cancel",flat:!0,label:ct("cancel"),onClick:function(){return a(!1)}}),o=s.createElement(rt,{key:"ok",warning:!0,label:e,onClick:function(){return a(!0)}});r.footer=[i,o],r.show()})},show:function(e){var t=new lt(e);return t.show(),t},wait:function(e,t){return ht.apply(this,arguments)}},lt=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.a)(this,e),this._screen=void 0,this._options=void 0,this.footer=null,this._options=Object.assign({closeOnEscape:!0,footer:s.createElement(rt,{icon:"close",label:ct("close"),flat:!0,onClick:function(){return t.hide()}})},n),this._options.closeOnEscape=O(this._options.closeOnEscape,!0),this.footer=this._options.footer||null;var r=document.createElement("div");r.className="tfw-factory-dialog",document.body.appendChild(r),this._screen=r,this.hide=this.hide.bind(this),this._options.closeOnEscape&&je.add(function(){return t._hide()})}return Object(y.a)(e,[{key:"show",value:function(){var e=this,t=this._options,n=H(t.title,"").trim(),r=H(t.icon,"").trim(),a=this.footer?s.createElement("footer",{className:"thm-bg2 thm-ele-button"},this.footer):null,i=null;n.length>0&&(i=s.createElement("header",{className:"thm-bgPD"},r.length>0?s.createElement(Ce,{content:r}):null,s.createElement("div",null,n))),u.a.render(s.createElement("div",{className:"thm-ele-dialog thm-bg1",style:{maxWidth:"number"===typeof t.maxWidth?"".concat(t.maxWidth,"px"):"auto"}},i,s.createElement("div",null,t.content),a),this._screen),setTimeout(function(){return e._screen.classList.add("show")},10)}},{key:"hide",value:function(){this._options.closeOnEscape?je.fire():this._hide()}},{key:"_hide",value:function(){var e=this._screen;e.classList.remove("show"),setTimeout(function(){document.body.removeChild(e)},200);var t=this._options.onClose;"function"===typeof t&&requestAnimationFrame(t)}},{key:"onClose",set:function(e){this._options.onClose=e}}]),e}();function ht(){return(ht=Object(i.a)(a.a.mark(function e(t,n){var r,i,o,c=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>2&&void 0!==c[2])||c[2]){e.next=5;break}return e.next=4,n;case 4:return e.abrupt("return",e.sent);case 5:return r=s.createElement(Te,{dir:"row",justifyContent:"flex-start",alignItems:"center"},s.createElement(Ce,{content:"wait",animate:!0}),s.createElement("div",null,t)),(i=new lt({content:r,footer:null,closeOnEscape:!1})).show(),o=i.hide.bind(i),e.abrupt("return",new Promise(function(e,t){n.then(function(t){o(),e(t)},function(e){console.error(e),o(),t(e)})}));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var pt=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleChange=function(e){n.setState({hostName:e});var t=n.props.onChange;"function"===typeof t&&(t(e),v.local.set("brayns-host-name",e))},n.handleEnterPressed=function(){var e=n.props.onEnterPressed;"function"===typeof e&&e()},n.state={hostName:v.local.get("brayns-host-name","http://r1i7n13.bbp.epfl.ch:5000")},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.handleChange(this.state.hostName)}},{key:"render",value:function(){return o.a.createElement("div",{className:"webBrayns-view-inputHostName"},o.a.createElement(Pe,{wide:!0,focus:!0,label:"Brayns host name",value:this.state.hostName,onEnterPressed:this.handleEnterPressed,onChange:this.handleChange}))}}]),t}(o.a.Component),ft=5e3,dt={getHostName:function(e){return mt.apply(this,arguments)},connect:function(e,t){return vt.apply(this,arguments)}};function mt(){return(mt=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(a.a.mark(function e(n){var r,s,c,u,l,h,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}if(r=et.parse(),"string"!==typeof(s=r.host)){e.next=6;break}return n(s),e.abrupt("return");case 6:c="",u=!1,l=function(){u=!0,p.hide(),n(c)},h=o.a.createElement(pt,{onEnterPressed:l,onChange:function(e){return c=e}}),p=ut.show({closeOnEscape:!0,content:h,footer:o.a.createElement(rt,{label:"Connect to Brayns Service",onClick:l,icon:"plug"}),icon:"plug",title:"Connect to Brayns Service",onClose:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ut.alert(o.a.createElement("p",null,"Web-Brayns absolutly needs to be connected to the Brayns server..."));case 4:location.reload(),n("");case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vt(){return(vt=Object(i.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(a.a.mark(function e(r,i){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=window.setTimeout(function(){return i("Connection timeout!")},ft),e.prev=1,e.next=4,t.connect(n);case 4:e.sent&&(window.clearTimeout(s),r(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),i(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var bt={addClipPlane:function(e){return gt.apply(this,arguments)},addLightAmbient:function(e){return yt.apply(this,arguments)},addLightDirectional:function(e){return wt.apply(this,arguments)},addLightQuad:function(e){return xt.apply(this,arguments)},addLightSphere:function(e){return kt.apply(this,arguments)},addLightSpot:function(e){return Ct.apply(this,arguments)},addModel:function(e){return Lt.apply(this,arguments)},chunk:function(e){return Ht.apply(this,arguments)},clearLights:function(){return Ot.apply(this,arguments)},getAnimationParameters:function(){return Vt.apply(this,arguments)},getApplicationParameters:function(){return jt.apply(this,arguments)},getCamera:function(){return Mt.apply(this,arguments)},getCameraParams:function(){return At.apply(this,arguments)},getClipPlanes:function(){return Et.apply(this,arguments)},getEnvironmentMap:function(){return St.apply(this,arguments)},getInstances:function(e,t){return Pt.apply(this,arguments)},getLights:function(){return It.apply(this,arguments)},getLoaders:function(){return Nt.apply(this,arguments)},getModelProperties:function(e){return Tt.apply(this,arguments)},getModelTransferFunction:function(e){return _t.apply(this,arguments)},getRenderer:function(){return Bt.apply(this,arguments)},getRendererParams:function(){return Dt.apply(this,arguments)},getScene:function(){return Rt.apply(this,arguments)},getStatistics:function(){return zt.apply(this,arguments)},getVolumeParameters:function(){return Zt.apply(this,arguments)},imageJpeg:function(){return qt.apply(this,arguments)},inspect:function(e){return Ft.apply(this,arguments)},loadersSchema:function(){return Wt.apply(this,arguments)},modelPropertiesSchema:function(e){return Gt.apply(this,arguments)},quit:function(){return Ut.apply(this,arguments)},removeClipPlanes:function(e){return Yt.apply(this,arguments)},removeLights:function(e){return Xt.apply(this,arguments)},removeModel:function(e){return Kt.apply(this,arguments)},requestModelUpload:function(e){return Jt.apply(this,arguments)},resetCamera:function(){return Qt.apply(this,arguments)},schema:function(e){return $t.apply(this,arguments)},setAnimationParameters:function(e){return en.apply(this,arguments)},setApplicationParameters:function(e){return tn.apply(this,arguments)},setCamera:function(e){return nn.apply(this,arguments)},setCameraParams:function(e){return rn.apply(this,arguments)},setEnvironmentMap:function(e){return an.apply(this,arguments)},setModelProperties:function(e){return sn.apply(this,arguments)},setModelTransferFunction:function(e){return on.apply(this,arguments)},setRenderer:function(e){return cn.apply(this,arguments)},setRendererParams:function(e){return un.apply(this,arguments)},setScene:function(e){return ln.apply(this,arguments)},setVolumeParameters:function(e){return hn.apply(this,arguments)},snapshot:function(e){return pn.apply(this,arguments)},updateClipPlane:function(e){return fn.apply(this,arguments)},updateInstance:function(e){return dn.apply(this,arguments)},updateModel:function(e){return mn.apply(this,arguments)}};function gt(){return(gt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("add-clip-plane",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(){return(yt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("add-light-ambient",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wt(){return(wt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("add-light-directional",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xt(){return(xt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("add-light-quad",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kt(){return(kt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("add-light-sphere",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ct(){return(Ct=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("add-light-spot",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Lt(){return(Lt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("add-model",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(){return(Ht=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("chunk",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ot(){return(Ot=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("clear-lights");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vt(){return(Vt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-animation-parameters");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jt(){return(jt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-application-parameters");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mt(){return(Mt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-camera");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function At(){return(At=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-camera-params");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Et(){return(Et=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-clip-planes");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function St(){return(St=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-environment-map");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pt(){return(Pt=Object(i.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-instances",t,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function It(){return(It=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-lights");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nt(){return(Nt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-loaders");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tt(){return(Tt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-model-properties",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _t(){return(_t=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-model-transfer-function",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bt(){return(Bt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-renderer");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dt(){return(Dt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-renderer-params");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rt(){return(Rt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-scene");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(){return(zt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-statistics");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zt(){return(Zt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("get-volume-parameters");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qt(){return(qt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("image-jpeg");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ft(){return(Ft=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("inspect",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wt(){return(Wt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("loaders-schema");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gt(){return(Gt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("model-properties-schema",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ut(){return(Ut=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("quit");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yt(){return(Yt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("remove-clip-planes",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(){return(Xt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("remove-lights",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kt(){return(Kt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("remove-model",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jt(){return(Jt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("request-model-upload",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qt(){return(Qt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("reset-camera");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $t(){return($t=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("schema",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function en(){return(en=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-animation-parameters",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tn(){return(tn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-application-parameters",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nn(){return(nn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-camera",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(){return(rn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-camera-params",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function an(){return(an=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-environment-map",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sn(){return(sn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-model-properties",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function on(){return(on=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-model-transfer-function",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function cn(){return(cn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-renderer",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function un(){return(un=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-renderer-params",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ln(){return(ln=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-scene",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hn(){return(hn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("set-volume-parameters",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pn(){return(pn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("snapshot",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fn(){return(fn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("update-clip-plane",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dn(){return(dn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("update-instance",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mn(){return(mn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.request("update-model",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}n(52);var vn=function(e){function t(e){return Object(g.a)(this,t),Object(w.a)(this,Object(x.a)(t).call(this,e))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"webBrayns-view-Wait thm-bg1"},o.a.createElement("div",null,o.a.createElement(Ce,{content:"wait",animate:!0}),o.a.createElement("div",null,this.props.label),o.a.createElement("div",null,"".concat(Math.ceil(100*this.props.progress),"%"))),o.a.createElement("div",{className:"thm-bg2"},o.a.createElement(rt,{flat:!0,small:!0,icon:"cancel",label:"Cancel",onClick:this.props.onCancel})))}}]),t}(o.a.Component),bn={addVectors:gn,deg2rad:Hn,makeQuaternionAsAxisRotation:yn,makeQuaternionFromLatLngTilt:function(e,t,n){var r=yn(Hn(-e),[1,0,0]),a=wn(yn(Hn(t),[0,1,0]),r),i=Cn([0,0,1],a);return wn(yn(Hn(-n),i),a)},makeVector:function(e,t){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]},multiplyQuaternions:wn,normalize:xn,plane6to4:function(e,t){var n=Ln(t,-1),r=kn(e,xn(n));return[-n[0],-n[1],-n[2],r]},rotateBounds:function(e,t){var n=e.min,r=e.max,a=Cn(n,t),i=Cn(r,t);return{min:[Math.min(a[0],i[0]),Math.min(a[1],i[1]),Math.min(a[2],i[2])],max:[Math.max(a[0],i[0]),Math.max(a[1],i[1]),Math.max(a[2],i[2])]}},rotateWithQuaternion:Cn,scaleBounds:function(e,t){return{min:[e.min[0]*t[0],e.min[1]*t[1],e.min[2]*t[2]],max:[e.max[0]*t[0],e.max[1]*t[1],e.max[2]*t[2]]}},scalarProduct:kn,scale:Ln,translateBounds:function(e,t){return{min:gn(e.min,t),max:gn(e.max,t)}}};function gn(e,t){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]}function yn(e,t){var n=.5*e,r=Math.cos(n),a=Math.sin(n),i=Object(C.a)(t,3);return[i[0]*a,i[1]*a,i[2]*a,r]}function wn(e,t){var n=Object(C.a)(e,4),r=n[0],a=n[1],i=n[2],s=n[3],o=Object(C.a)(t,4),c=o[0],u=o[1],l=o[2],h=o[3];return[h*r+c*s-u*i+l*a,h*a+c*i+u*s-l*r,h*i-c*a+u*r+l*s,h*s-c*r-u*a-l*i]}function xn(e){var t=Object(C.a)(e,3),n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;if(i<1e-9)return[0,0,0];var s=1/Math.sqrt(i);return[n*s,r*s,a*s]}function kn(e,t){var n=Object(C.a)(e,3),r=n[0],a=n[1],i=n[2],s=Object(C.a)(t,3);return r*s[0]+a*s[1]+i*s[2]}function Cn(e,t){var n=t,r=Object(C.a)(e,3),a=r[0],i=r[1],s=r[2],o=Object(C.a)(n,4),c=wn(n,wn([a,i,s,0],[-o[0],-o[1],-o[2],o[3]]));return[c[0],c[1],c[2]]}function Ln(e,t){return e.map(function(e){return e*t})}function Hn(e){return e*Math.PI/180}var On=function(){function e(t){Object(g.a)(this,e),this.model=t,this.center=[0,0,0]}return Object(y.a)(e,[{key:"locate",value:function(e){var t=this.model.brayns.bounds,n=this.model.brayns.transformation.translation,r=bn.makeVector(n,e),a=bn.translateBounds(t,r);this.model.brayns.transformation.rotation_center=e,this.model.brayns.transformation.translation=e,this.model.brayns.bounds=a}},{key:"scale",value:function(e){var t=this.model.brayns.bounds,n=this.model.brayns.transformation.translation,r=this.model.brayns.transformation.scale,a=bn.makeVector(n,[0,0,0]),i=bn.translateBounds(t,a),s=bn.scaleBounds(i,[e[0]/r[0],e[1]/r[1],e[2]/r[2]]),o=bn.translateBounds(s,bn.scale(a,-1));this.model.brayns.transformation.scale=e,this.model.brayns.bounds=o}},{key:"rotate",value:function(e){var t=this.model.brayns.bounds,n=this.model.brayns.transformation.translation,r=bn.makeVector(n,[0,0,0]),a=bn.translateBounds(t,r),i=bn.rotateBounds(a,e),s=bn.translateBounds(i,bn.scale(r,-1));this.model.brayns.transformation.rotation=e,this.model.brayns.bounds=s}},{key:"getMaterialIds",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 5:return e.next=7,qn.request("getMaterialIds",{id:void 0});case 7:return t=e.sent,this.model.materialIds=t.ids.filter(function(e){return e<18e18}),e.abrupt("return",this.model.materialIds);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.model.brayns.id,e.next=3,qn.Api.removeModel([t]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setSelected",value:function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.model.selected=t,this.model.brayns.bounding_box=t,e.next=4,qn.Api.updateModel({id:this.model.brayns.id,bounding_box:t});case 4:this.updateState();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setVisible",value:function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.Api.updateModel({id:this.model.brayns.id,visible:t});case 2:this.model.brayns.visible=!0,this.updateState();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"focus",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.camera.lookAtBounds(this.model.brayns.bounds);case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"applyTransfo",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.model.brayns.transformation).rotation_center=bn.addVectors(t.translation,this.center),e.next=4,qn.Api.updateModel({id:this.model.brayns.id,transformation:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateState",value:function(){Ke.dispatch(Ke.Models.update(this.model))}},{key:"rotationCenter",get:function(){return this.center},set:function(e){this.center=e}},{key:"id",get:function(){return this.model.brayns.id}},{key:"seleted",get:function(){return this.model.selected}},{key:"visible",get:function(){return!0===this.model.brayns.visible}}]),e}(),Vn={createModelFromBraynsData:function(e){return{brayns:Object(d.a)({},e),parent:0,deleted:!1,selected:!1,technical:!1}},getAllModels:jn,getModelsBounds:function(e){var t={min:[-10,-10,-10],max:[10,10,10]},n=e.filter(Mn);if(0===n.length)return t;for(var r=Object(d.a)({},n[0].brayns.bounds),a=1;a<n.length;a++){var i=n[a],s=i.brayns.bounds||t;r.min[0]=Math.min(r.min[0],s.min[0]),r.min[1]=Math.min(r.min[1],s.min[1]),r.min[2]=Math.min(r.min[2],s.min[2]),r.max[0]=Math.max(r.max[0],s.max[0]),r.max[1]=Math.max(r.max[1],s.max[1]),r.max[2]=Math.max(r.max[2],s.max[2])}return r},getVisibleModels:function(){return jn().filter(function(e){return!1===e.deleted&&!1===e.technical&&!0===e.brayns.visible})}};function jn(){return Ke.store.getState().models}function Mn(e){if(!e.brayns)return!1;if(!e.brayns.bounds)return!1;var t=e.brayns.bounds;return!(t.min[0]>t.max[0])&&(!(t.min[1]>t.max[1])&&!(t.min[2]>t.max[2]))}var An=function(){function e(t){Object(g.a)(this,e),this.params=t,this.states=[]}return Object(y.a)(e,[{key:"applyCamera",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t,n,r,i,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.params,n=t.orientation,r=t.position,i=t.target,s=t.current,o=t.height,e.next=3,qn.Api.setCamera({orientation:n,position:r,target:i,current:s||"perspective"});case 3:if("orthographic"!==s){e.next=6;break}return e.next=6,qn.Api.setCameraParams({height:o});case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"saveState",value:function(){this.states.push(this.params)}},{key:"restoreState",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=this.states).length){e.next=4;break}return console.error(Error("[web-brayns/scene/camera/restoreState()] Trying to restore a state which has not been saved!")),e.abrupt("return");case 4:return this.params=t.pop(),e.next=7,this.applyCamera();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setPosition",value:function(e){this.params.position=e,this.applyCamera()}},{key:"setOrientation",value:function(e){this.params.orientation=e,this.applyCamera()}},{key:"setPositionAndOrientation",value:function(e,t){this.params.position=e,this.params.orientation=t,this.applyCamera()}},{key:"setOrthographic",value:function(){var e=Object(i.a)(a.a.mark(function e(t,n,r,i){var s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(s=this.params).current="orthographic",s.position=r,s.orientation=i,s.height=n,e.next=7,this.applyCamera();case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"setTarget",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,s=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(s.length>1&&void 0!==s[1])||s[1],r=this.direction,i=bn.scalarProduct(bn.makeVector(this.params.position,t),r),this.params.position=bn.addVectors(t,bn.scale(r,-i)),this.params.target=t,!n){e.next=9;break}return e.next=8,this.applyCamera();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getCloser",value:function(){var e=Object(i.a)(a.a.mark(function e(t,n){var r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.direction,i=bn.scalarProduct(bn.makeVector(this.params.position,t),r)*n,this.params.position=bn.addVectors(t,bn.scale(r,-i)),this.params.target=t,e.next=6,this.applyCamera();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTargetDistance",value:function(){var e=this.axis.z;return bn.scalarProduct(e,bn.makeVector(this.params.target,this.params.position))}},{key:"moveForward",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.direction,r=this.params,i=r.position,s=r.target,this.params.position=[i[0]+n[0]*t,i[1]+n[1]*t,i[2]+n[2]*t],this.params.target=[s[0]+n[0]*t,s[1]+n[1]*t,s[2]+n[2]*t],e.next=6,this.applyCamera();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"moveBackward",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.direction,r=this.params,i=r.position,s=r.target,this.params.position=[i[0]-n[0]*t,i[1]-n[1]*t,i[2]-n[2]*t],this.params.target=[s[0]-n[0]*t,s[1]-n[1]*t,s[2]-n[2]*t],e.next=6,this.applyCamera();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"lookAtWholeScene",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Vn.getVisibleModels(),n=Vn.getModelsBounds(t),e.next=4,this.lookAtBounds(n);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"lookAtBounds",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,s,o,c,u,l,h,p,f,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.min[0],r=t.min[1],i=t.min[2],s=t.max[0],o=t.max[1],c=t.max[2],u=(n+s)/2,l=(r+o)/2,h=(i+c)/2,p=s-n,f=o-r,d=c+.5*Math.max(p+f),this.params.orientation=[0,0,0,1],this.params.position=[u,l,d],this.params.target=[u,l,h],e.next=17,this.applyCamera();case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"position",get:function(){return this.params.position.slice()}},{key:"orientation",get:function(){return this.params.orientation.slice()}},{key:"axis",get:function(){var e=Object(C.a)(this.orientation,4),t=e[0],n=e[1],r=e[2],a=e[3],i=a*a,s=t*t,o=n*n,c=r*r,u=2*a*t,l=2*a*n,h=2*a*r,p=2*t*n,f=2*t*r,d=2*n*r;return{x:[i+s+o+c,h+p,f-l],y:[p-h,i-s+o-c,u+d],z:[l+f,d-u,i-s-o+c]}}},{key:"target",get:function(){return this.params.target.slice()}},{key:"direction",get:function(){var e=this.params.orientation;return bn.rotateWithQuaternion([0,0,1],e)}}]),e}(),En=function(){function e(){var t=this;Object(g.a)(this,e),this._canvas=null,this.ctx=null,this.blob=null,this.blobIndex=0,this.lastRederedBlobIndex=0,this.paint=Object(i.a)(a.a.mark(function e(){var n,r,i,s,o,c,u,l,h,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.lastRederedBlobIndex!==t.blobIndex){e.next=3;break}return e.abrupt("return");case 3:if(n=t.blob){e.next=6;break}return e.abrupt("return");case 6:if(r=t.canvas){e.next=9;break}return e.abrupt("return");case 9:if(i=t.ctx){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,Sn(n);case 14:s=e.sent,o=s.naturalWidth,c=s.naturalHeight,u=r.width,l=r.height,h=(u-o)/2,p=(l-c)/2,i.drawImage(s,h,p,o,c),t.lastRederedBlobIndex=t.blobIndex;case 23:return e.prev=23,requestAnimationFrame(t.paint),e.finish(23);case 26:case"end":return e.stop()}},e,null,[[0,,23,26]])}))}return Object(y.a)(e,[{key:"init",value:function(e){}},{key:"canvas",get:function(){return this._canvas},set:function(e){this._canvas=e,e&&(this.ctx=e.getContext("2d"))}}]),e}();function Sn(e){var t=URL.createObjectURL(e),n=new Image;return new Promise(function(e){n.src=t,n.decode?n.decode().then(function(){return e(n)}):n.onload=function(){return e(n)}})}var Pn=function(){function e(){Object(g.a)(this,e),this.loaders=new Map}return Object(y.a)(e,[{key:"init",value:function(e){var t=this.loaders;console.info("[loader/init()] params=",e),t.clear(),e.forEach(function(e){e.extensions.forEach(function(n){if(t.has(n)){var r=t.get(n);Array.isArray(r)&&r.push(e)}else t.set(n,[e])})}),console.info("this.loaders=",this.loaders)}},{key:"listLoadersForPath",value:function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var i,s=this.loaders.keys()[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;if(e.endsWith(o)){var c=this.loaders.get(o);if(!Array.isArray(c))continue;t.push.apply(t,Object(Ne.a)(c))}}}catch(u){r=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return t}}]),e}(),In={isFloat:function(e){return!isNaN(parseFloat(e))},isInteger:function(e){return!isNaN(parseInt(e))}};n(53);var Nn=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).touchable=void 0,n.ref=void 0,n.handleChange=n.handleChange.bind(Object(L.a)(Object(L.a)(n))),n.touchable=new he({onTap:n.handleChange}),n.ref=s.createRef(),n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.ref.current;e&&(this.touchable.element=e)}},{key:"handleChange",value:function(){var e=this.props.onChange;"function"===typeof e&&e(!O(this.props.value,!1))}},{key:"render",value:function(){var e=H(this.props.label,""),t=O(this.props.value,!1),n=O(this.props.wide,!1),r=O(this.props.reverse,!1),a=["tfw-view-checkbox"];return t&&a.push("ok"),n&&a.push("wide"),r&&a.push("reverse"),s.createElement("button",{ref:this.ref,className:a.join(" ")},s.createElement("div",{className:"pin"},s.createElement("div",{className:"thm-ele-button bar ".concat(t?"thm-bgSL":"thm-bg1")}," "),s.createElement("div",{className:"thm-ele-button btn ".concat(t?"thm-bgS":"thm-bg0")}," ")),s.createElement("label",null,e))}}]),t}(s.Component),Tn=(n(54),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleOK=function(){var e=n.props,t=e.path,r=e.onOK,a=n.state,i=a.density,s=a.report,o=a.targets,c=n.state,u=c.soma,l=c.axon,h=c.dendrite,p=c.apicalDendrite;r({path:t,bounding_box:!1,loader_name:"Circuit viewer with meshes use-case",visible:!0,loader_properties:{"001_density":parseFloat(i)/100,"002_random_seed":0,"010_targets":o,"011_gids":"","020_report":s,"023_synchronous_mode":!1,"040_mesh_folder":"","041_mesh_filename_pattern":"mesh_{gid}.obj","042_mesh_transformation":!1,"052_section_type_soma":u,"053_section_type_axon":l,"054_section_type_dendrite":h,"055_section_type_apical_dendrite":p}})},n.state={density:"1",densityValid:!0,report:"",reports:[""],targets:"",soma:!0,axon:!1,dendrite:!0,apicalDendrite:!0},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.path,r=t.onCancel,a=this.state,i=a.density,s=a.densityValid,c=a.report,u=a.reports,l=a.targets,h=this.state,p=h.soma,f=h.axon,d=h.dendrite,m=h.apicalDendrite;return o.a.createElement("div",{className:"webBrayns-view-loader-Circuit thm-bg1"},o.a.createElement("div",null,o.a.createElement("span",null,"Path: ")," ",o.a.createElement("code",null,n)),o.a.createElement("div",null,o.a.createElement(Pe,{label:"Cells density (%)",value:i,focus:!0,valid:s,validator:In.isFloat,onValidation:function(t){return e.setState({densityValid:t})},onChange:function(t){return e.setState({density:t})}}),o.a.createElement(Se,{label:"Report",value:c,onChange:function(t){return e.setState({report:t})}},u.map(function(e){return 0===e.length?o.a.createElement("div",{key:""},o.a.createElement("em",null,"Don't load any simulation")):o.a.createElement("div",{key:e},e)})),o.a.createElement(Pe,{label:"Targets (comma separated list)",value:l,onChange:function(t){return e.setState({targets:t})}})),o.a.createElement("div",null,o.a.createElement(Nn,{label:"Soma",value:p,onChange:function(t){return e.setState({soma:t})}}),o.a.createElement(Nn,{label:"Axon",value:f,onChange:function(t){return e.setState({axon:t})}}),o.a.createElement(Nn,{label:"Dendrite",value:d,onChange:function(t){return e.setState({dendrite:t})}}),o.a.createElement(Nn,{label:"Apical Dendrite",value:m,onChange:function(t){return e.setState({apicalDendrite:t})}})),o.a.createElement("footer",{className:"thm-bg0"},o.a.createElement(rt,{flat:!0,label:"Cancel",onClick:r}),o.a.createElement(rt,{flat:!1,label:"Load Circuit",onClick:this.handleOK})))}}]),t}(o.a.Component)),_n={getLoaderParams:function(e){return new Promise(function(t,n){try{var r=qn.loader.listLoadersForPath(e),a={path:e,visible:!0,bounding_box:!1},i=r.find(function(e){return e.name===Bn});if(!i)return void t(a);var s=ut.show({title:"Loading a Circuit",closeOnEscape:!1,footer:null,content:o.a.createElement(Tn,{path:e,onCancel:function(){console.info("onCancel"),s.hide(),t(null)},onOK:function(e){console.info("onOK"),s.hide(),t(Object(d.a)({},a,e))}})})}catch(c){console.error("service/loader/getLoaderParams()",c),n(c)}})}},Bn="Circuit viewer with meshes use-case";var Dn=function(e,t){var n=0,r=0,a=function(){},i=[],s=function(){n=0,a.apply(void 0,Object(Ne.a)(i))};return function(){a=e;for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];i=c;var l=Date.now(),h=l-r;r=l,h>t?s():0===n&&(n=window.setTimeout(s,t-h))}},Rn=function(){function e(){var t=this;Object(g.a)(this,e),this.savedTarget=[0,0,0],this.savedPosition=[0,0,0],this.savedOrientation=[0,0,0,0],this.savedAxis={x:[0,0,0],y:[0,0,0],z:[0,0,0]},this.savedScreenPoint={screenX:0,screenY:0},this.savedTargetDistance=0,this.handlePanStart=function(){var e=Object(i.a)(a.a.mark(function e(n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.computeCurrentTarget(n.screenX,n.screenY);case 2:r=qn.camera.axis,t.savedTarget=qn.camera.target,t.savedPosition=qn.camera.position,t.savedOrientation=qn.camera.orientation,t.savedAxis=r,t.savedScreenPoint={screenX:n.screenX,screenY:n.screenY,aspect:n.aspect},t.savedTargetDistance=qn.camera.getTargetDistance();case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),this.handlePan=Dn(function(e){2===e.button?t.translateCamera(e):1===e.button&&t.orbitCamera(e)},20)}return Object(y.a)(e,[{key:"computeCurrentTarget",value:function(){var e=Object(i.a)(a.a.mark(function e(t,n){var r,i,s,o,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.Api.inspect([t,n]);case 2:r=e.sent,console.info("screenX, screenY=",t,n),console.info("hitPoint=",r),r.hit?qn.camera.setTarget(r.position,!1):(i=Vn.getModelsBounds(Vn.getVisibleModels()),s=(i.min[0]+i.max[0])/2,o=(i.min[1]+i.max[1])/2,c=(i.min[2]+i.max[2])/2,qn.camera.setTarget([s,o,c],!1));case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"translateCamera",value:function(e){var t=this.savedAxis,n=e.screenX-this.savedScreenPoint.screenX,r=e.screenY-this.savedScreenPoint.screenY,a=this.savedPosition.slice(),i=1*qn.camera.getTargetDistance(),s=bn.addVectors(a,bn.addVectors(bn.scale(t.x,-i*n*e.aspect),bn.scale(t.y,-i*r)));qn.camera.setPosition(s)}},{key:"orbitCamera",value:function(e){var t=this.savedAxis,n=e.screenX-this.savedScreenPoint.screenX,r=e.screenY-this.savedScreenPoint.screenY,a=this.savedOrientation.slice(),i=Math.PI*r,s=-2*Math.PI*n,o=bn.makeQuaternionAsAxisRotation(i,t.x),c=bn.makeQuaternionAsAxisRotation(s,t.y),u=bn.multiplyQuaternions(c,o),l=bn.multiplyQuaternions(u,a),h=bn.makeVector(this.savedTarget,this.savedPosition),p=bn.rotateWithQuaternion(h,u),f=bn.addVectors(this.savedTarget,p);qn.camera.setPositionAndOrientation(f,l)}}]),e}(),zn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Listener";Object(g.a)(this,e),this.name=t,this.listeners=[]}return Object(y.a)(e,[{key:"add",value:function(e){this.remove(e),this.listeners.push(e)}},{key:"remove",value:function(e){this.listeners=this.listeners.filter(function(t){return t!==e})}},{key:"fire",value:function(e){var t=this;this.listeners.forEach(function(n){try{n(e)}catch(r){console.error("[".concat(t.name,"] Error in a listener!")),console.error(">  ex.: ",r),console.error(">  arg.: ",e)}})}},{key:"length",get:function(){return e.length}}]),e}(),Zn={brayns:new(function(){function e(){var t=this;Object(g.a)(this,e),this.debug=!1,this.ws=void 0,this.autogeneratedId=1,this.queries={},this.readyListeners=new zn,this.binaryListeners=new zn,this.subscribers={},this.host="",this.handleOpen=function(e){t.readyListeners.fire(!0)},this.handleMessage=function(e){"string"===typeof e.data?t.handleStringMessage(e.data):t.binaryListeners.fire(e.data)},this.handleClose=function(e){console.log("### [WS] Close:",e),t.readyListeners.fire(!1),window.setTimeout(function(){return t.connect()},150)},this.handleError=function(e){console.error("### [WS] Error:",e)}}return Object(y.a)(e,[{key:"connect",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.host=t,n="ws://".concat(t,"/ws"),e.abrupt("return",new Promise(function(e){var t=function t(r){console.error("Unable to connect to ".concat(n,"!"),r),a.removeEventListener("close",t),a.removeEventListener("error",t),e(!1)},a=new WebSocket(n,["rockets"]);a.binaryType="arraybuffer",a.addEventListener("open",r.handleOpen),a.addEventListener("open",function t(){a.removeEventListener("open",t),e(!0)}),a.addEventListener("message",r.handleMessage),a.addEventListener("close",r.handleClose),a.addEventListener("close",t),a.addEventListener("error",r.handleError),a.addEventListener("error",t),r.ws=a}));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"exec",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(r,a){try{var i=btoa("".concat(t.autogeneratedId++)),s={jsonrpc:"2.0",id:i,method:e,params:n};if(!t.ws)return;t.queries[i]={id:i,resolve:r,reject:a},t.ws.send(JSON.stringify(s))}catch(o){console.error("WS: ",o),a(o)}})}},{key:"execAsync",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=new zn,a=btoa("".concat(this.autogeneratedId++)),i=new Promise(function(i,s){var o=n.ws;if(o){var c=function(e){r.fire({label:e.operation||"Loading...",progress:e.amount})};n.subscribe("progress",c);var u={jsonrpc:"2.0",id:a,method:e,params:t};n.queries[a]={id:a,resolve:function(e){console.info("[onMessage] arg=",e),n.unsubscribe("progress",c),i({status:"ok",message:e})},reject:function(e){-31002===e.code?i({status:"cancel",message:e.message}):s(e)}},o.send(JSON.stringify(u))}else s("Brayns is not connected!")});return{cancel:function(){var e=n.ws;e&&e.send(JSON.stringify({jsonrpc:"2.0",method:"cancel",params:{id:a}}))},get progress(){return r},get promise(){return i}}}},{key:"subscribe",value:function(e,t){this.subscribers[e]||(this.subscribers[e]=new zn),this.subscribers[e].add(t)}},{key:"unsubscribe",value:function(e,t){this.subscribers[e]&&this.subscribers[e].remove(t)}},{key:"log",value:function(e){this.debug&&console.log(e)}},{key:"handleStringMessage",value:function(e){try{var t=JSON.parse(e),n=t.id,r=t.method,a=t.result,i=t.params,s=t.error;"undefined"===typeof n?this.handleUpdate(r,i):"undefined"!==typeof s?this.handleResponseError(n,s):this.handleResponse(n,a)}catch(o){console.error("Unable to parse websocket incoming message:",o),console.error("    text = ",e)}}},{key:"handleUpdate",value:function(e,t){var n=this.subscribers[e];n&&n.fire(t)}},{key:"handleResponse",value:function(e,t){var n=this.queries[e];"undefined"!==typeof n&&(delete this.queries[e],n.resolve(t))}},{key:"handleResponseError",value:function(e,t){var n=this.queries[e];"undefined"!==typeof n&&(delete this.queries[e],n.reject({code:t.code||0,message:t.message||"Unknown error!"}))}},{key:"hostname",get:function(){return this.host}}]),e}()),camera:null,host:"",renderer:new En,gestures:new Rn,loader:new Pn},qn={Api:bt,clear:function(){return Xn.apply(this,arguments)},connect:function(e){return Fn.apply(this,arguments)},loadMeshFromPath:function(e){return Jn.apply(this,arguments)},request:Un,setMaterial:function(e,t,n){return Qn.apply(this,arguments)},setViewPort:function(e,t){return Kn.apply(this,arguments)},get brayns(){return Zn.brayns},get camera(){return Zn.camera||new An({})},get host(){return Zn.host},get renderer(){return Zn.renderer},get gestures(){return Zn.gestures},get loader(){return Zn.loader}};function Fn(){return(Fn=Object(i.a)(a.a.mark(function e(t){var n,r,i,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("hostName=",t),Zn.host=t,e.next=4,dt.connect(Zn.brayns,t);case 4:return e.next=6,Un("get-loaders");case 6:return n=e.sent,Array.isArray(n)&&Zn.loader.init(n),e.next=10,Wn();case 10:return r=e.sent,console.info("videostreamAvailable=",r),e.next=14,Un("get-camera");case 14:return i=e.sent,e.next=17,Un("get-camera-params");case 17:return s=e.sent,Zn.camera=new An(Object(d.a)({},s,i)),Zn.renderer.init(Zn.brayns),e.next=22,bt.getAnimationParameters();case 22:return o=e.sent,Ke.dispatch(Ke.Animation.update(o)),e.abrupt("return",Zn.brayns);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wn(){return Gn.apply(this,arguments)}function Gn(){return(Gn=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Un("set-videostream",{enabled:!1});case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function Un(e){return Yn.apply(this,arguments)}function Yn(){return(Yn=Object(i.a)(a.a.mark(function e(t){var n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",new Promise(function(e,r){try{if(!Zn.brayns)return console.error("No BraynsService!"),void r();Zn.brayns.exec(t,n).then(function(t){e(t)},function(e){r(e)})}catch(a){console.error("Brayns request exception!",a),console.error("   >>> method =",t),console.error("   >>> params =",n),r(a)}}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xn(){return(Xn=Object(i.a)(a.a.mark(function e(){var t,n,r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Un("get-scene");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:if(n=t.models){e.next=8;break}return e.abrupt("return",!1);case 8:return r=n.map(function(e){return e.id}),e.next=11,Un("remove-model",r);case 11:return Ke.dispatch(Ke.Models.reset([])),e.next=14,Un("get-renderer-params",{});case 14:if(!(i=e.sent)){e.next=21;break}return i.pixel_alpha=1,i.shadows=1,i.soft_shadows=.5,e.next=21,Un("set-renderer-params",i);case 21:return e.next=23,bt.setRenderer({accumulation:!0,background_color:[.3,.4,.5],current:"advanced_simulation",head_light:!0,max_accum_frames:16,samples_per_pixel:1,subsampling:1});case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kn(){return(Kn=Object(i.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<32||n<32)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Un("set-application-parameters",{viewport:[t,n]});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jn(){return(Jn=Object(i.a)(a.a.mark(function e(t){var n,r,i,s,c,u,l,h,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("AAA"),e.next=3,_n.getLoaderParams(t);case 3:return n=e.sent,console.info("params=",n),r=Zn.brayns.execAsync("add-model",n),i=o.a.createElement(vn,{label:"Loading...",progress:0,onCancel:function(){r.cancel(),s.hide()}}),s=ut.show({content:i,footer:null}),r.progress.add(function(e){}),e.next=11,r.promise;case 11:if(c=e.sent,s.hide(),console.info("result=",c),c&&"ok"===c.state){e.next=17;break}return console.error(c),e.abrupt("return",null);case 17:return e.next=19,$n(c.message);case 19:return u=e.sent,l=Object(d.a)({brayns:Object(d.a)({name:t,bounds:{min:[-10,-10,-10],max:[10,10,10]},transformation:{rotation:[0,0,0,1],scale:[1,1,1],translation:[0,0,0]}},c),materialIds:[],deleted:!1,selected:!1,technical:!1,parent:-1},u),(h=new On(l)).locate(l.brayns.transformation.translation),h.applyTransfo(),e.next=26,h.getMaterialIds();case 26:return p=e.sent,l.materialIds=p,Ke.dispatch(Ke.Models.add(l)),e.abrupt("return",new On(l));case 30:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qn(){return(Qn=Object(i.a)(a.a.mark(function e(t,n,r){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.exec("phaneron/set-material",Object(d.a)({},r,{modelId:t,materialId:n,host:Zn.host}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $n(e){return er.apply(this,arguments)}function er(){return(er=Object(i.a)(a.a.mark(function e(t){var n,r,i,s,o,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.bounds,r=n.min,i=n.max,!(r[0]<i[0])){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,bt.getScene();case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return",t);case 8:if(o=s.models){e.next=11;break}return e.abrupt("return",t);case 11:if(c=o.find(function(e){return e&&e.id===t.id})){e.next=14;break}return e.abrupt("return",t);case 14:return t.bounds=Object(d.a)({},t.bounds,c.bounds),e.abrupt("return",t);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}var tr="/gpfs/bbp.cscs.ch/project/proj3/.tolokoban/clipping-plane.ply",nr=function(){function e(t){var n=this;Object(g.a)(this,e),this.partialState=t,this.state=void 0,this.attached=!1,this.model=null,this.isActivated=!1,this.frontPlaneId=-1,this.backPlaneId=-1,this.updateClippingPlanes=Object(i.a)(a.a.mark(function e(){var t,r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.computeClippingPlanes(),r=t.frontPlane,i=t.backPlane,!n.isActivated){e.next=6;break}return e.next=4,qn.Api.updateClipPlane({id:n.frontPlaneId,plane:r});case 4:return e.next=6,qn.Api.updateClipPlane({id:n.backPlaneId,plane:i});case 6:case"end":return e.stop()}},e)})),this.state=Object(d.a)({width:32,height:24,depth:2,center:[0,0,0],orientation:[0,0,0,1],color:[0,1,0]},t)}return Object(y.a)(e,[{key:"setCameraForSnapshot",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t,n,r,i,s,o,c,u,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,n=t.depth,r=t.center,i=t.orientation,s=t.width,o=t.height,c=bn.rotateWithQuaternion([0,0,1],i),u=bn.scale(c,3*n),l=bn.addVectors(r,u),e.next=6,qn.camera.setOrthographic(3*s,3*o,l,i);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setActivated",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActivated!==t){e.next=2;break}return e.abrupt("return");case 2:if(!1!==t){e.next=7;break}return e.next=5,qn.Api.removeClipPlanes([this.frontPlaneId,this.backPlaneId]);case 5:return this.isActivated=!1,e.abrupt("return");case 7:return n=this.computeClippingPlanes(),r=n.frontPlane,i=n.backPlane,e.next=10,qn.Api.addClipPlane(r);case 10:return s=e.sent,this.frontPlaneId=s.id,e.next=14,qn.Api.addClipPlane(i);case 14:o=e.sent,this.backPlaneId=o.id,this.isActivated=!0;case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setTransformation",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.model,r=t.location,i=t.scale,s=t.rotation,!n){e.next=10;break}return o=this.state,r&&(n.locate(r),o.center=r),i&&(n.scale(i),o.width=i[0],o.height=i[1],o.depth=i[2]),s&&(n.rotate(s),o.orientation=s),this.updateClippingPlanes(),e.next=10,n.applyTransfo();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setLocation",value:function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setTransformation({location:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"computeClippingPlanes",value:function(){var e=this.state,t=e.depth,n=e.center,r=e.orientation,a=bn.rotateWithQuaternion([0,0,1],r);return{frontPlane:bn.plane6to4(bn.addVectors(n,bn.scale(a,.5*t+.001)),bn.scale(a,-1)),backPlane:bn.plane6to4(bn.addVectors(n,bn.scale(a,.5*-t-.001)),a)}}},{key:"attach",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,e.next=3,qn.loadMeshFromPath(tr,{technical:!0,brayns:{path:tr,transformation:{rotation:t.orientation,scale:[t.width,t.height,t.depth],translation:t.center}}});case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return this.model=n,e.next=9,this.setColor(D.fromArrayRGB(this.state.color));case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setColor",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.toArrayRGB(),r=D.mix(t,D.newWhite(),.8).toArrayRGB(),this.state.color=n,this.model){e.next=5;break}return e.abrupt("return");case 5:return i=this.model.id,e.next=8,qn.setMaterial(i,0,{diffuseColor:n,specularColor:r,shadingMode:"diffuse"});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"detach",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.model){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,qn.Api.removeModel([t.id]);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"activated",get:function(){return this.isActivated}}]),e}(),rr={getAstrocytePath:ir,test:function(){return ar.apply(this,arguments)}};function ar(){return(ar=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qn.clear();case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ir(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return"/gpfs/bbp.cscs.ch/project/proj3/resources/meshes/astrocytes/GLIA_".concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n="".concat(e);for(;n.length<t;)n="0".concat(n);return n}(e),".h5").concat(t?"_decimated":"",".off")}var sr=n(16),or={getCanvas:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={animation_parameters:Ke.store.getState().animation,samples_per_pixel:t.samples,size:[t.width,t.height],format:"JPEG",camera:{position:qn.camera.position,orientation:qn.camera.orientation,target:qn.camera.target}},e.next=3,qn.Api.snapshot(n);case 3:return r=e.sent,i="data:;base64,".concat(r.data),e.abrupt("return",new Promise(function(e,t){var n=new Image;n.onload=function(){var r=document.createElement("canvas");r.width=n.width,r.height=n.height;var a=r.getContext("2d");a?(a.drawImage(n,0,0),e(r)):t()},n.onerror=t,n.src=i}));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),saveCanvasToFile:function(){var e=Object(i.a)(a.a.mark(function e(t,n){var r,s=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=s.length>2&&void 0!==s[2]?s[2]:"image/jpeg",t.toBlob(function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(sr.a)(t,n);case 4:e.sent;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r,100);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()};var cr=Object(l.b)(function(e){return{filename:e.dialogs.snapshot.filename,sizeKey:e.dialogs.snapshot.sizeKey,width:e.dialogs.snapshot.width,height:e.dialogs.snapshot.height,samplesKey:e.dialogs.snapshot.samplesKey,samples:e.dialogs.snapshot.samples}},function(e){return{onFilenameChange:function(t){e(Ke.Dialogs.updateSnapshot({filename:t}))},onSizeKeyChange:function(t){e(Ke.Dialogs.updateSnapshot({sizeKey:t}));var n=_e[t];if(n){var r=Object(C.a)(n,2),a=r[0],i=r[1];e(Ke.Dialogs.updateSnapshot({width:a,height:i}))}},onWidthChange:function(t){e(Ke.Dialogs.updateSnapshot({width:t}))},onHeightChange:function(t){e(Ke.Dialogs.updateSnapshot({height:t}))},onSamplesKeyChange:function(t){e(Ke.Dialogs.updateSnapshot({samplesKey:t}));var n=Be[t];n&&e(Ke.Dialogs.updateSnapshot({samples:n}))},onSamplesChange:function(t){e(Ke.Dialogs.updateSnapshot({samples:t}))}}})(Re),ur={show:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut.confirm("Take snapshot",o.a.createElement(l.a,{store:Ke.store},o.a.createElement(cr,null)));case 2:if(e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",Ke.store.getState().dialogs.snapshot);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},lr=function(e,t){var n=0;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];n&&window.clearTimeout(n),n=window.setTimeout(function(){n=0,e.apply(void 0,a)},t)}};function hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(typeof e){case"boolean":return e?1:0;case"number":return e;case"string":var n=e.trim().toLowerCase();if(n.startsWith("0x")){var r=parseInt(n.substr(2),16);return isNaN(r)?t:r}if(n.startsWith("0b")){var a=parseInt(n.substr(2),2);return isNaN(a)?t:a}if(n.startsWith("0o")){var i=parseInt(n.substr(2),8);return isNaN(i)?t:i}var s=parseFloat(n);return isNaN(s)?t:s;default:return t}}n(55);var pr=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(a)))).ref=o.a.createRef(),n.handleTapOrMove=function(e){var t=n.ref.current;if(t){var r=t.getBoundingClientRect(),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e}(e.x/r.width),i=n.props,s=pe(i.min,0),o=pe(i.max,100),c=Math.min(s,o),u=Math.max(s,o),l=Math.max(1e-9,hr(i.step,(u-c)/1e3)),h=n.constrainValue(c+(u-c)*a,c,u,l);i.onChange(h)}},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.ref.current;e&&B(e).on({tap:this.handleTapOrMove,pan:this.handleTapOrMove})}},{key:"render",value:function(){var e=this.props,t=pe(e.min,0),n=pe(e.max,100),r=Math.min(t,n),a=Math.max(t,n),i=Math.max(1e-9,hr(e.step,(a-r)/1e3)),s=H(e.label,""),c=this.constrainValue(e.value,r,a,i),u=H(e.text,"".concat(c));return o.a.createElement("div",{className:"tfw-view-Slider",ref:this.ref},o.a.createElement(Ve,{label:s}),o.a.createElement("div",{className:"thm-ele-button thm-bgPD"},o.a.createElement("div",{className:"thm-ele-nav thm-bgPL thm-fg",style:{marginLeft:"calc(".concat(100*(c-r)/(a-r),"% - 16px)")}},u)))}},{key:"constrainValue",value:function(e,t,n,r){var a=Math.max(t,Math.min(e,n));return r>0?t+r*Math.floor(r/2+(a-t)/r):a}}]),t}(o.a.Component);var fr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e},dr=(n(56),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleCurrentChange=function(e){var t={current:e};Ke.dispatch(Ke.Animation.update(t)),n.setAnimationParameters(t)},n.setAnimationParameters=lr(function(e){qn.Api.setAnimationParameters(e)},300),n.handleSpeedChange=function(e){n.setState({speedKey:e}),Ke.dispatch(Ke.Animation.update({delta:br(e)}))},n.handleNextClick=function(){n.shift(1)},n.handleNext2Click=function(){n.shift(10)},n.handlePrevClick=function(){n.shift(-1)},n.handlePrev2Click=function(){n.shift(-10)},n.state={speedKey:vr(e.delta||1)},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"shift",value:function(e){var t=this.props.current||1,n=this.props.frameCount||1,r=br(this.state.speedKey),a=fr(t+r*e,1,n);if(a!==t){var i={current:a};Ke.dispatch(Ke.Animation.update(i)),this.setAnimationParameters(i)}}},{key:"render",value:function(){var e=this.props,t=e.current||0,n=e.frameCount||0;if(n<2)return null;var r=Math.floor(.5+100*(e.current||0)/n);return o.a.createElement("div",{className:"webBrayns-view-AnimationControl thm-bgPD-C"},o.a.createElement("div",{className:"thm-bgPD flex"},o.a.createElement(Ce,{content:"skip-prev2",enabled:t>1,onClick:this.handlePrev2Click}),o.a.createElement(Ce,{content:"skip-prev",enabled:t>1,onClick:this.handlePrevClick}),o.a.createElement(rt,{icon:"play",small:!0}),o.a.createElement(Ce,{content:"skip-next",enabled:t<n,onClick:this.handleNextClick}),o.a.createElement(Ce,{content:"skip-next2",enabled:t<n,onClick:this.handleNext2Click})),o.a.createElement("div",{className:"label"},o.a.createElement("b",null,e.current),o.a.createElement("span",{className:"hint"}," / ".concat(n," (").concat(e.unit,")"))),o.a.createElement(pr,{min:0,max:n,value:e.current||0,step:1,text:"".concat(r," %"),onChange:this.handleCurrentChange}),o.a.createElement(Se,{value:this.state.speedKey,label:"Speed",onChange:this.handleSpeedChange},o.a.createElement("div",{key:"NORMAL"},"x1"),o.a.createElement("div",{key:"x2"},"x2"),o.a.createElement("div",{key:"x4"},"x4"),o.a.createElement("div",{key:"x8"},"x8"),o.a.createElement("div",{key:"x16"},"x16"),o.a.createElement("div",{key:"x32"},"x32")))}}]),t}(o.a.Component)),mr=[["NORMAL",1],["x2",2],["x4",4],["x8",8],["x16",16],["x32",32]];function vr(e){var t=mr.find(function(t){return t[1]===e});return t?t[0]:"NORMAL"}function br(e){var t=mr.find(function(t){return t[0]===e});return t?t[1]:1}var gr=Object(l.b)(function(e){return Object(d.a)({},e.animation)},function(e){return{}})(dr),yr={canvasFromSVG:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return new Promise(function(){var s=Object(i.a)(a.a.mark(function i(s,o){var c,u,l;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,xr(e);case 2:if(c=a.sent,(u=document.createElement("canvas")).setAttribute("width","".concat(t)),u.setAttribute("height","".concat(n)),l=u.getContext("2d")){a.next=10;break}return o("Unable to create a 2D context!"),a.abrupt("return");case 10:r&&(l.fillStyle=r,l.fillRect(0,0,t,n)),l.drawImage(c,0,0,t,n),s(u);case 13:case"end":return a.stop()}},i)}));return function(e,t){return s.apply(this,arguments)}}())},canvasToImageJPG:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.92,n=e.toDataURL("image/jpg",t),r=new Image;return new Promise(function(e){r.onload=function(){return e(r)},r.src=n})},canvasToImagePNG:function(e){var t=e.toDataURL("image/png"),n=new Image;return new Promise(function(e){n.onload=function(){return e(n)},n.src=t})},canvasToImageWEBP:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.92,n=e.toDataURL("image/webp",t),r=new Image;return new Promise(function(e){r.onload=function(){return e(r)},r.src=n})},fromArrayBuffer:function(e){return wr(new Blob([e]))},fromBlob:wr,fromSVG:xr,saveCanvasAsJPG:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.92;return new Promise(function(r){e.toBlob(function(){var n=Object(i.a)(a.a.mark(function n(i){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,Object(sr.a)(i,t);case 4:r(e);case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}(),"image/jpg",n)})},saveCanvasAsPNG:function(e,t){return new Promise(function(n){e.toBlob(function(){var r=Object(i.a)(a.a.mark(function r(i){return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Object(sr.a)(i,t);case 4:n(e);case 5:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}(),"image/png",100)})}};function wr(e){var t=URL.createObjectURL(e),n=new Image;return new Promise(function(e){n.src=t,n.decode?n.decode().then(function(){return e(n)}):n.onload=function(){return e(n)}})}function xr(e){var t="data:image/svg+xml;base64,".concat(btoa(e.outerHTML)),n=new Image;return new Promise(function(e,r){n.onload=function(){return e(n)},n.onerror=r,n.src=t})}n(57);var kr=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).canvasRef=o.a.createRef(),n.orientation=[0,0,0,1],n.handleImage=function(){var e=Object(i.a)(a.a.mark(function e(t){var r,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.canvas){e.next=3;break}return e.abrupt("return");case 3:if(i=r.getContext("2d")){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,yr.fromArrayBuffer(t);case 8:s=e.sent,i.drawImage(s,0,0,r.clientWidth,r.clientHeight);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleDown=function(e){var t=n.props.onPanStart;"function"===typeof t&&(e.clear(),t(Object.assign({button:e.buttons},n.getScreenPoint(e.x,e.y))))},n.handlePan=function(e){var t=n.props.onPan;"function"===typeof t&&t(Object.assign({button:e.buttons},n.getScreenPoint(e.x,e.y)))},n.updateViewPort=Object(i.a)(a.a.mark(function e(){var t,r,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.canvasRef.current){e.next=3;break}return e.abrupt("return");case 3:return r=t.getBoundingClientRect(),i=Math.floor(r.width),s=Math.floor(r.height),t.width=i,t.height=s,e.next=10,qn.setViewPort(i,s);case 10:case"end":return e.stop()}},e)})),n.handleScreenShot=Object(i.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur.show();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,or.getCanvas(t);case 7:return n=e.sent,e.next=10,or.saveCanvasToFile(n,"".concat(t.filename,".jpg"));case 10:case"end":return e.stop()}},e)})),n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){if(this.canvas){var e=qn.brayns;if(e){e.binaryListeners.add(this.handleImage);B(this.canvas).on({down:this.handleDown,wheel:function(e){qn.camera&&(e.deltaY<0?qn.camera.moveForward(10):e.deltaY>0&&qn.camera.moveBackward(10))},pan:this.handlePan}),this.updateViewPort(),window.onfocus=this.updateViewPort}}}},{key:"getScreenPoint",value:function(e,t){if(!this.canvas)return{screenX:-1,screenY:-1,aspect:1};var n=this.canvas.clientWidth,r=this.canvas.clientHeight;return{screenX:e/n,screenY:1-t/r,aspect:n/r}}},{key:"render",value:function(){return o.a.createElement("div",{className:"webBrayns-view-ImageStream"},o.a.createElement("canvas",{ref:this.canvasRef,className:"","moz-opaque":"true"}),o.a.createElement("div",{className:"icons"},o.a.createElement(rt,{icon:"camera",onClick:this.handleScreenShot,warning:!0})),o.a.createElement(gr,null))}},{key:"canvas",get:function(){return this.canvasRef.current}}]),t}(o.a.Component),Cr=function(){function e(t){var n=this;Object(g.a)(this,e),this.slot=t,this.intervalId=0,this.targets=[],this.checkSize=function(){var e=[],t=!0,r=!1,a=void 0;try{for(var i,s=n.targets[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value,c=o.target.getBoundingClientRect();if(Or(c,o.rect)){var u={inlineSize:c.width,blockSize:c.height};e.push({target:o.target,borderBoxSize:u,contentBoxSize:u,contentRect:c}),o.rect=c}}}catch(l){r=!0,a=l}finally{try{t||null==s.return||s.return()}finally{if(r)throw a}}e.length>0&&n.slot(e)}}return Object(y.a)(e,[{key:"observe",value:function(e){var t=this.targets;-1===t.map(Hr).indexOf(e)&&(0===t.length&&(this.intervalId=window.setInterval(this.checkSize,200)),t.push({target:e,rect:e.getBoundingClientRect()}))}},{key:"unobserve",value:function(e){var t=this.targets,n=t.map(Hr).indexOf(e);-1!==n&&(t.splice(n,1),0===t.length&&window.clearInterval(this.intervalId))}}]),e}(),Lr=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;Object(g.a)(this,e),this.element=t,this.debouncerDelay=r,this.listeners=new zn,this.observer=void 0,this.fire=function(e,t){n.listeners.fire({width:e,height:t})},this.onEntries=function(e){var t=e.filter(function(e){return e.target===n.element});if(t.length>0){var r=t[0].contentBoxSize;n.fire(r.inlineSize,r.blockSize)}},this.observer=new Cr(this.onEntries),this.fire=lr(this.fire,r)}return Object(y.a)(e,[{key:"subscribe",value:function(e){0===this.listeners.length&&this.attach(),this.listeners.add(e)}},{key:"unsubscribe",value:function(e){this.listeners.remove(e),0===this.listeners.length&&this.detach()}},{key:"attach",value:function(){this.observer.observe(this.element)}},{key:"detach",value:function(){this.observer.unobserve(this.element)}}]),e}();function Hr(e){return e.target}function Or(e,t){return e.width!==t.width||e.height!==t.height}n(58);var Vr='video/mp4; codecs="avc1.42E032"',jr=function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(w.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(s)))).refVideo=o.a.createRef(),n.sourceBuffer={},n.lastWidth=-1,n.lastHeight=-1,n.arraySize=0,n.bufArray=[],n.mediaSource=null,n.resizeWatcher=null,n.handleGestureWheel=function(e){},n.handleGestureDown=function(e){var t=n.props.onPanStart;"function"===typeof t&&(e.clear(),t(Object.assign({button:e.buttons},n.getScreenPoint(e.x,e.y))))},n.handleGesturePan=function(e){var t=n.props.onPan;"function"===typeof t&&t(Object.assign({button:e.buttons},n.getScreenPoint(e.x,e.y)))},n.createMediaSource=function(){var e=n.refVideo.current;if(e){var t=new MediaSource;t.id=Date.now(),t.addEventListener("sourceclose",function(){console.log("Source CLOSE",t.id)}),t.addEventListener("sourceended",function(){console.log("Source ENDED",t.id)}),t.addEventListener("sourceopen",Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Source OPEN",t.id),n.bufArray=[],n.sourceBuffer=t.addSourceBuffer(Vr),e.next=5,n.enableVideoStream();case 5:case"end":return e.stop()}},e)}))),n.mediaSource=t,e.src&&window.URL.revokeObjectURL(e.src),e.src=window.URL.createObjectURL(t)}},n.handleResize=function(){var e=Object(i.a)(a.a.mark(function e(t){var r,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.refVideo.current){e.next=3;break}return e.abrupt("return");case 3:return i=t.width,s=t.height,console.log(">>> handleResize(",i,", ",s,")"),e.next=7,n.disableVideoStream();case 7:return r.width=i,r.height=s,e.next=11,qn.setViewPort(i,s);case 11:n.createMediaSource(),console.log("<<< handleResize(",i,", ",s,")");case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleWebSocketMessage=function(){var e=Object(i.a)(a.a.mark(function e(t){var r,i,s,o,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.refVideo.current){e.next=3;break}return e.abrupt("return");case 3:if(i=new Uint8Array(t),n.bufArray.push(i),n.arraySize+=i.length,!r.error){e.next=9;break}return console.error("VIDEO ERROR: ",r.error),e.abrupt("return");case 9:if(!n.sourceBuffer.updating){for(s=new Uint8Array(n.arraySize),o=0;n.bufArray.length>0;)c=n.bufArray.shift(),s.set(c,o),o+=c.length;n.arraySize=0,n.sourceBuffer.appendBuffer(s)}r.paused&&r.play(),r.width=r.videoWidth,r.height=r.videoHeight;case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleVideoError=function(){var e=Object(i.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.refVideo.current){e.next=3;break}return e.abrupt("return");case 3:return console.error("Video ERROR: ",r.error,t),e.next=6,n.disableVideoStream();case 6:requestAnimationFrame(n.createMediaSource);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.refVideo.current;if(e){B(e).on({wheel:this.handleGestureWheel,down:this.handleGestureDown,pan:this.handleGesturePan}),this.resizeWatcher=new Lr(e,500);var t=e.getBoundingClientRect();this.handleResize(t)}}},{key:"getScreenPoint",value:function(e,t){var n=this.refVideo.current;if(!n)return{screenX:e,screenY:t,aspect:1};var r=n.getBoundingClientRect(),a=r.width,i=r.height;return{screenX:e/a,screenY:1-t/i,aspect:a/i}}},{key:"componentWillUnmount",value:function(){qn.brayns&&this.disableVideoStream()}},{key:"enableVideoStream",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=qn.brayns){e.next=3;break}return e.abrupt("return");case 3:return console.log("videostream","ON"),this.resizeWatcher&&this.resizeWatcher.subscribe(this.handleResize),t.binaryListeners.add(this.handleWebSocketMessage),e.next=8,qn.request("set-videostream",{enabled:!0});case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"disableVideoStream",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=qn.brayns){e.next=3;break}return e.abrupt("return");case 3:if(this.refVideo.current){e.next=6;break}return e.abrupt("return");case 6:return console.log("videostream","OFF"),this.resizeWatcher&&this.resizeWatcher.unsubscribe(this.handleResize),t.binaryListeners.remove(this.handleWebSocketMessage),e.next=11,qn.request("set-videostream",{enabled:!1});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("video",{ref:this.refVideo,onError:this.handleVideoError,autoPlay:!1,crossOrigin:"anonymous",className:"webBrayns-view-VideoStream"})}}]),t}(o.a.Component),Mr=(n(59),function(e){function t(){return Object(g.a)(this,t),Object(w.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=tt(this.props.children),n=O(this.props.scrollable,!1),r=O(this.props.fullscreen,!1),a=["tfw-layout-stack"];return a.push.apply(a,Object(Ne.a)(V(this.props.classNames))),n&&a.push("scrollable"),r&&a.push("fullscreen"),o.a.createElement("div",{className:a.join(" ")},t.filter(function(t){return t.key==e.props.value}))}}]),t}(o.a.Component)),Ar=(n(60),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleMethodChange=function(e){n.setState({method:e})},n.handleParamsChange=function(e){n.setState({params:e.target.value})},n.handleExecute=Object(i.a)(a.a.mark(function e(){var t,r,i,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,r=t.method,i=t.params,Pr("method",r),Pr("params",i),n.setState({querying:!0,output:"".concat(Date.now()),error:null}),e.prev=4,s=Ir(i),e.next=8,qn.request(r,s);case 8:o=e.sent,n.setState({error:null,output:JSON.stringify(o,null,"  ")}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("WebSocket console error:",e.t0),n.setState({error:Nr(e.t0)});case 16:return e.prev=16,n.setState({querying:!1}),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[4,12,16,19]])})),n.state={method:Sr("method","get-renderer-params"),params:Sr("params","{}"),output:"",error:null,querying:!1},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=["webBrayns-view-WebsocketConsole","thm-bg0"];return this.props.visible&&e.push("visible"),o.a.createElement("div",{className:e.join(" ")},o.a.createElement("div",{className:"head"},o.a.createElement(Pe,{label:"Method",value:this.state.method,onChange:this.handleMethodChange,onEnterPressed:this.handleExecute,wide:!0})),o.a.createElement("textarea",{className:"input",onChange:this.handleParamsChange,defaultValue:this.state.params}),o.a.createElement("div",{className:"button"},o.a.createElement(rt,{label:"Execute request",wide:!0,wait:this.state.querying,icon:"gear",onClick:this.handleExecute})),this.state.error?o.a.createElement("div",{className:"error"},this.state.error):o.a.createElement("textarea",{className:"output thm-bgPL",readOnly:!0,value:this.state.output}))}}]),t}(o.a.Component)),Er="websocket-console::";function Sr(e,t){return v.local.get("".concat(Er).concat(e),t)}function Pr(e,t){return v.local.set("".concat(Er).concat(e),t)}function Ir(e){try{return JSON.parse(e)}catch(t){throw Error("This parameter is not in valid JSON format:\n".concat(e,"\n\nReason: ").concat(t,"!"))}}function Nr(e){var t=JSON.stringify(e,null,"  ");return e&&"function"===typeof e.toString&&(t+="\n\n"+e.toString()),t}n(61);var Tr=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).touchable=void 0,n.ref=s.createRef(),n.handleClick=n.handleClick.bind(Object(L.a)(Object(L.a)(n))),n.touchable=new he({onTap:n.handleClick,color:e.color}),n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=this.ref.current;e&&(this.touchable.element=e)}},{key:"handleClick",value:function(){var e=this.props.onClick;"function"===typeof e&&e()}},{key:"render",value:function(){var e=this.props,t=O(e.enabled,!0),n=["tfw-view-touchable"].concat(tt(e.classNames));return t&&n.push("enabled"),s.createElement("div",{ref:this.ref,tabIndex:0,className:n.join(" "),title:e.title},e.children)}}]),t}(s.Component),_r=(n(62),function(e){function t(){return Object(g.a)(this,t),Object(w.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){for(var e=this,t=this.props,n=t.path,r=t.root,a=[r].concat(Object(Ne.a)(n.substr(r.length).split("/"))).filter(function(e){return e.length>0}),i=a.length-1,s=[],c=function(t){var n=a[t],r=a.slice(0,t+1).join("/");if(t===i)s.push(o.a.createElement("div",null,n));else{var c=o.a.createElement("div",{key:r,className:"thm-bgPL thm-ele-button"},o.a.createElement(Tr,{onClick:function(){e.props.onClick(r)}},o.a.createElement("div",null,n)));s.push(c)}},u=0;u<a.length;u++)c(u);return o.a.createElement("div",{className:"webBrayns-view-PathBar"},o.a.createElement("header",null,n),o.a.createElement("div",null,s))}}]),t}(o.a.Component)),Br=(n(63),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).refMain=void 0,n.refHead=void 0,n.refBody=void 0,n.refTail=void 0,n.lastFirstItemIndex=void 0,n.lastVisibleItemsCount=void 0,n.lastItemsArray=void 0,n.itemHeight=36,n.refMain=s.createRef(),n.refHead=s.createRef(),n.refBody=s.createRef(),n.refTail=s.createRef(),n.onScroll=lr(n.onScroll.bind(Object(L.a)(Object(L.a)(n))),30),n.onPanDown=n.onPanDown.bind(Object(L.a)(Object(L.a)(n))),n.lastFirstItemIndex=-1,n.lastVisibleItemsCount=-1,n.lastItemsArray=[],n.state={items:[]},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"onPanDown",value:function(){var e=this.refMain.current;if(e&&!(e.scrollTop>0)){var t=this.props.onRefreshAsked;"function"===typeof t&&t()}}},{key:"onScroll",value:function(){var e=this.refMain.current,t=this.refHead.current,n=this.refBody.current,r=this.refTail.current;if(e&&t&&n&&r){this.props.animateRefresh&&(e.scrollTop=0);var a=e.getBoundingClientRect(),i=Math.floor(e.scrollTop),s=Math.floor(a.height),o=this.props.items.length,c=Math.min(o,Math.floor(i/this.itemHeight)),u=Math.min(o-c,1+Math.ceil(s/this.itemHeight)),l=this.props.items.length-c-u;t.style.height="".concat(this.itemHeight*c,"px"),n.style.height="".concat(this.itemHeight*u,"px"),r.style.height="".concat(this.itemHeight*l,"px"),e.scrollTop=i,this.lastFirstItemIndex===c&&this.lastVisibleItemsCount===u||(this.lastFirstItemIndex=c,this.lastVisibleItemsCount=u,this.setState({items:this.props.items.slice(c,c+u)}));var h="".concat(e.clientWidth,"px ").concat(this.itemHeight,"px");t.style.backgroundSize=h,r.style.backgroundSize=h}}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.onScroll,!1);var t=this.refMain.current;t&&B(t).on({pandown:function(e){t.scrollTop>0||(e.clear(),t.classList.add("animate-refresh"))},swipedown:function(n){t.scrollTop>0||(n.clear(),e.onPanDown())},up:function(){return t.classList.remove("animate-refresh")}})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onScroll,!1)}},{key:"render",value:function(){var e=this;if(this.itemHeight=pe(this.props.itemHeight,36),this.lastItemsArray!==this.props.items&&(this.lastVisibleItemsCount=-1,this.lastItemsArray=this.props.items),this.onScroll(),"function"!==typeof this.props.mapper)throw console.error("props =",this.props),Error('<List mapper="..." ...> Attribute mapper must be a function which returns a ReactElement!');var t=null;try{t=this.state.items.map(this.props.mapper).map(function(t,n){return s.createElement("div",{className:"item",key:t.key||"item-".concat(n),style:{height:"".concat(e.itemHeight,"px"),minHeight:"".concat(e.itemHeight,"px"),maxHeight:"".concat(e.itemHeight,"px")}},t)})}catch(o){throw Error('<List mapper="..." ...> Attribute mapper returns an exception:\n'.concat(o))}var n=de(this.props.width,"auto"),r=de(this.props.height,"auto"),a=["tfw-view-list"];O(this.props.animateRefresh,!1)&&a.push("animate-refresh","refreshing");var i="".concat(a.join(" ")," ").concat(H(this.props.className,""));return s.createElement("div",{className:i,style:{width:n,height:r},onScroll:this.onScroll,ref:this.refMain},s.createElement("div",{className:"space",ref:this.refHead}),s.createElement("div",{className:"body",ref:this.refBody},t),s.createElement("div",{className:"space",ref:this.refTail}))}}]),t}(s.Component)),Dr=(n(64),function(e){function t(e){return Object(g.a)(this,t),Object(w.a)(this,Object(x.a)(t).call(this,e))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.files,n=e.folders,r=e.onFileClick,a=e.onFolderClick;return o.a.createElement("div",{className:"webBrayns-view-PathList"},o.a.createElement("div",null,o.a.createElement("h1",null,"Folders (".concat(n.length,")")),o.a.createElement(Br,{itemHeight:32,height:"60vh",width:"45%",items:n.sort(),mapper:function(e){return o.a.createElement("div",{className:"folder-button thm-bg0"},o.a.createElement(Tr,{key:e,onClick:function(){return a(e)},classNames:["thm-ele-button","thm-bgPD"]},o.a.createElement(Ce,{content:"folder",size:"24px"}),o.a.createElement("div",{className:"label",title:e},e)))}})),o.a.createElement("div",null,o.a.createElement("h1",null,"Files (".concat(t.length,")")),o.a.createElement(Br,{itemHeight:32,height:"60vh",width:"45%",items:t.sort(),mapper:function(e){return o.a.createElement("div",{className:"folder-button thm-bg0"},o.a.createElement(Tr,{key:e,onClick:function(){return r(e)},classNames:["thm-ele-button","thm-bgPD"]},o.a.createElement(Ce,{content:"file",size:"24px"}),o.a.createElement("div",{className:"label",title:e},e)))}})))}}]),t}(o.a.Component)),Rr=(n(65),function(e){function t(){return Object(g.a)(this,t),Object(w.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.path,n=e.root,r=e.files,a=e.folders,i=e.onFileClick,s=e.onFolderClick;return o.a.createElement("div",{className:"webBrayns-view-PathSelector"},o.a.createElement(_r,{path:t,root:n,onClick:s}),o.a.createElement(Dr,{files:r,folders:a,onFileClick:function(e){return i(zr(t,e))},onFolderClick:function(e){s(zr(t,e))}}))}}]),t}(o.a.Component));function zr(e,t){return e.endsWith("/")?"".concat(e).concat(t):"".concat(e,"/").concat(t)}var Zr=Object(l.b)(function(e){return Object(d.a)({},e.path)},function(e){return{onFolderClick:function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.browse(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(Rr),qr=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(g.a)(this,e),this.prefix=t}return Object(y.a)(e,[{key:"get",value:function(e,t){return v.local.get(this.key(e),t)}},{key:"set",value:function(e,t){v.local.set(this.key(e),t)}},{key:"key",value:function(e){return 0===this.prefix.length?e:"".concat(this.prefix,":\t").concat(e)}}]),e}())("input-path"),Fr=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleChange=function(e){var t=n.props.onChange;n.setState({path:e}),qr.set("path",e),"function"===typeof t&&t(e)},n.state={path:qr.get("path","")},n.handleChange(n.state.path),n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(Pe,{label:"Please type a model path",size:100,value:this.state.path,onChange:this.handleChange,wide:!0}),o.a.createElement("hr",null),o.a.createElement(l.a,{store:Ke.store},o.a.createElement(Zr,{onFileClick:this.handleChange})))}}]),t}(o.a.Component),Wr=(n(66),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleToggleSelection=function(){var e=n.props.onToggleSelection;"function"===typeof e&&e(n.props.model)},n.handleFocus=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new On(n.props.model),e.next=3,t.focus();case 3:case"end":return e.stop()}},e)})),n.handleShow=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new On(n.props.model),e.next=3,t.setVisible(!0);case 3:case"end":return e.stop()}},e)})),n.handleHide=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new On(n.props.model),e.next=3,t.setVisible(!1);case 3:case"end":return e.stop()}},e)})),n.handleMore=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.model,Ke.dispatch(Ke.CurrentModel.reset(t)),Ke.dispatch(Ke.Navigation.setPanel("model")),qn.camera.saveState(),e.next=6,qn.camera.lookAtBounds(t.brayns.bounds);case 6:case"end":return e.stop()}},e)})),n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.model,t=["webBrayns-view-ModelButton","thm-ele-button"];return e.brayns.visible?t.push(e.selected?"thm-bgSL":"thm-bg2"):t.push(e.selected?"thm-bgSD":"thm-bg0"),o.a.createElement(Tr,{classNames:t,onClick:this.handleToggleSelection,title:e.brayns.path},o.a.createElement("div",{className:"name"},o.a.createElement("div",{className:e.brayns.visible?"visible":"invisible"},e.brayns.name),o.a.createElement("div",{className:"id"},"#".concat(e.brayns.id))),o.a.createElement("div",{className:"icons"},o.a.createElement("div",null,o.a.createElement(rt,{small:!0,icon:"gps",onClick:this.handleFocus}),o.a.createElement(rt,{onClick:this.handleMore,enabled:!0,small:!0,icon:"more"})),e.brayns.visible?o.a.createElement(rt,{small:!0,icon:"hide",onClick:this.handleHide}):o.a.createElement(rt,{small:!0,icon:"show",onClick:this.handleShow}),o.a.createElement(rt,{enabled:!1,small:!0,icon:"delete",warning:!0})))}}]),t}(o.a.Component)),Gr=/[ \t\n\r,.|<>:]+/g,Ur=function(){function e(t){Object(g.a)(this,e),this.items=void 0,this.items=t.split(Gr).map(function(e){return e.trim().toLowerCase()}).filter(function(e){return e.length>0})}return Object(y.a)(e,[{key:"matches",value:function(e){if(0===this.items.length)return!0;var t=e.toLowerCase(),n=!0,r=!1,a=void 0;try{for(var i,s=this.items[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;if(-1===t.indexOf(o))return!1}}catch(c){r=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return!0}}]),e}(),Yr=(n(67),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleToggleSelection=function(e){var t=n.props.models.find(function(e){return e.selected});t&&new On(t).setSelected(!1);e!==t&&new On(e).setSelected(!0)},n.handleFilterInputChange=function(e){var t=e.trim().toLowerCase();n.setState({filterInput:t}),n.handleFilterChange(t)},n.handleFilterChange=lr(function(e){var t=e.trim().toLowerCase();n.setState({filter:t})},200),n.handleSortChange=function(e){n.setState({sort:e})},n.state={filterInput:"",filter:"",sort:"name"},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"filter",value:function(){var e=this.state.filter,t=this.props.models,n=new Ur(e);return t.filter(function(e){return n.matches(e.brayns.name)}).sort("name"===this.state.sort?Xr:Kr)}},{key:"render",value:function(){var e=this,t=this.props.models,n=this.filter();return o.a.createElement("div",{className:"webBrayns-view-ModelList"},o.a.createElement("header",null,o.a.createElement(Pe,{label:"Filter by name (".concat(n.length," / ").concat(t.length,")"),value:this.state.filterInput,onChange:this.handleFilterInputChange,wide:!0}),o.a.createElement(Se,{label:"Sorting",value:this.state.sort,onChange:this.handleSortChange},o.a.createElement("div",{key:"name"},"Name"),o.a.createElement("div",{key:"volume"},"Volume"))),o.a.createElement(Br,{itemHeight:100,items:n,width:"100%",mapper:function(t){return o.a.createElement(Wr,{key:t.brayns.id,onToggleSelection:e.handleToggleSelection,model:t})}}))}}]),t}(o.a.Component));function Xr(e,t){var n=e.brayns.name.toLowerCase(),r=t.brayns.name.toLowerCase();return n<r?-1:n>r?1:0}function Kr(e,t){return Jr(t.brayns.bounds)-Jr(e.brayns.bounds)}function Jr(e){var t=e.max,n=e.min;return(t[0]-n[0])*(t[1]-n[1])*(t[2]-n[2])}var Qr=Object(l.b)(function(e){return{models:e.models}},function(e){return{}})(Yr),$r=(n(23),function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(w.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(s)))).handleClip=function(){Ke.dispatch(Ke.Navigation.setPanel("clip"))},n.handleLoadMesh=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,ut.confirm("Load Model",o.a.createElement(Fr,{onChange:function(e){return t=e}}));case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,qn.loadMeshFromPath(t);case 8:case"end":return e.stop()}},e)})),n.toggleConsoleVisibility=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ke.dispatch(Ke.Navigation.toggleConsoleVisibility());case 1:case"end":return e.stop()}},e)})),n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"webBrayns-view-Panel"},o.a.createElement("header",{className:"thm-bgPD thm-ele-nav"},o.a.createElement("p",null,"Web-Brayns"),o.a.createElement("div",null,o.a.createElement(Ce,{content:"cut",onClick:this.handleClip}),o.a.createElement(Ce,{content:"import",onClick:this.handleLoadMesh}),o.a.createElement(Ce,{content:"gps",onClick:function(){return qn.camera.lookAtWholeScene()}}),o.a.createElement(Ce,{content:"bug",onClick:this.toggleConsoleVisibility}))),o.a.createElement(Qr,null))}}]),t}(o.a.Component)),ea=n(25),ta=n.n(ea),na=n(26),ra=n.n(na),aa=n(27),ia=n.n(aa),sa=n(28),oa=n.n(sa),ca=n(29),ua=n.n(ca),la=(n(68),[[ta.a,{shadingMode:"diffuse",glossiness:0}],[ra.a,{shadingMode:"diffuse",glossiness:.75}],[ia.a,{shadingMode:"diffuse",glossiness:1}],[oa.a,{shadingMode:"cartoon",glossiness:0}],[ua.a,{shadingMode:"electron",glossiness:0}]]),ha=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleHueChange=function(e){n.setState({hue:e}),n.fire()},n.handleShaderChange=function(e){n.setState({shaderIndex:e}),n.fire()},n.state={hue:30*Math.floor(12*Math.random()),shaderIndex:0},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"fire",value:function(){var e=Object(C.a)(la[this.state.shaderIndex],2)[1],t=this.props.onSelect;if("function"===typeof t){var n=new D;n.H=this.state.hue/360,n.S=1,n.L=.5,n.hsl2rgb(),t(Object(d.a)({diffuseColor:[n.R,n.G,n.B],opacity:1,glossiness:0,shadingMode:"none"},e))}else console.error("<Material> component must have a function as 'onSelect' attribute!")}},{key:"render",value:function(){var e=this,t=this.state,n=t.hue,r=t.shaderIndex;return o.a.createElement("div",{className:"webBrayns-view-Material"},o.a.createElement(pr,{label:"Diffuse color",min:0,max:360,step:1,value:n,text:"".concat(n),onChange:this.handleHueChange}),o.a.createElement("div",{className:"shading-mode"},la.map(function(t,a){var i=Object(C.a)(t,1)[0],s=["shading-mode-button","thm-ele-btn"];return a===r&&s.push("selected"),o.a.createElement(Tr,{key:"S".concat(a),classNames:s,onClick:function(){return e.handleShaderChange(a)}},o.a.createElement("div",{style:{backgroundImage:"url(".concat(i,")"),filter:"hue-rotate(".concat(n,"deg)")}}))})))}}]),t}(o.a.Component),pa={show:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=null,e.next=3,ut.confirm("Apply Material",o.a.createElement(ha,{onSelect:function(e){return t=e}}));case 3:if(e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},fa=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleBack=function(){Ke.dispatch(Ke.Navigation.setPanel("models")),qn.camera.restoreState()},n.handleMaterial=function(){var e=Object(i.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pa.show();case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,qn.setMaterial(n.props.model.brayns.id,t,r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.error(e.t0);case 13:case"end":return e.stop()}},e,null,[[5,10]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.props.model,n=t.materialIds,r=t.brayns,a=r.name,i=r.id,s=r.path,c=r.bounds,u=r.transformation;return o.a.createElement("div",{className:"webBrayns-view-Panel"},o.a.createElement("header",{className:"thm-bgPD thm-ele-nav"},o.a.createElement(Ce,{content:"back",onClick:this.handleBack}),o.a.createElement("p",null,a," ",o.a.createElement("em",null,"#".concat(i)))),o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("em",null,"Path: "),s),o.a.createElement("p",null,o.a.createElement("em",null,"Location: "),o.a.createElement("code",null,JSON.stringify(u.translation,null,"  "))),o.a.createElement("p",null,o.a.createElement("em",null,"Bounds: "),o.a.createElement("pre",null,JSON.stringify(c,null,"  "))),o.a.createElement("hr",null),o.a.createElement("div",null,n.map(function(t){return o.a.createElement(rt,{key:"".concat(t),wide:!0,onClick:function(){return e.handleMaterial(t)},label:"Set material #".concat(t)})}))))}}]),t}(o.a.Component);var da=Object(l.b)(function(e){return{model:e.currentModel}},function(e){return{}})(fa),ma=(n(69),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).handleLatitudeChange=function(e){var t=n.props,r=t.longitude,a=t.tilt;(0,t.onChange)(e,r,a)},n.handleLongitudeChange=function(e){var t=n.props,r=t.latitude,a=t.tilt;(0,t.onChange)(r,e,a)},n.handleTiltChange=function(e){var t=n.props,r=t.longitude,a=t.latitude;(0,t.onChange)(a,r,e)},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.latitude,n=e.longitude,r=e.tilt;return o.a.createElement("div",{className:"webBrayns-view-Orientation"},o.a.createElement(pr,{label:"Latitude",min:-90,max:90,value:t,step:1,text:"".concat(t),onChange:this.handleLatitudeChange}),o.a.createElement(pr,{label:"Longitude",min:-180,max:180,value:n,step:1,text:"".concat(n),onChange:this.handleLongitudeChange}),o.a.createElement(pr,{label:"Tilt",min:-180,max:180,value:r,step:1,text:"".concat(r),onChange:this.handleTiltChange}))}}]),t}(o.a.Component)),va=(n(70),function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(a)))).handleXChange=function(e){var t=n.props,r=t.y,a=t.z;(0,t.onChange)(parseFloat(e),r,a)},n.handleYChange=function(e){var t=n.props,r=t.x,a=t.z;(0,t.onChange)(r,parseFloat(e),a)},n.handleZChange=function(e){var t=n.props,r=t.y,a=t.x;(0,t.onChange)(a,r,parseFloat(e))},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,r=e.z;return o.a.createElement("div",{className:"webBrayns-view-Location"},o.a.createElement(Pe,{label:"X",width:"110px",type:"number",onChange:this.handleXChange,value:"".concat(t)}),o.a.createElement(Pe,{label:"Y",width:"110px",type:"number",onChange:this.handleYChange,value:"".concat(n)}),o.a.createElement(Pe,{label:"Z",width:"110px",type:"number",onChange:this.handleZChange,value:"".concat(r)}))}}]),t}(o.a.Component)),ba=(n(71),function(e){function t(){var e,n;Object(g.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(w.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(a)))).handleWidthChange=function(e){var t=n.props,r=t.height,a=t.depth;(0,t.onChange)(Math.abs(parseFloat(e)),r,a)},n.handleHeightChange=function(e){var t=n.props,r=t.width,a=t.depth;(0,t.onChange)(r,Math.abs(parseFloat(e)),a)},n.handleDepthChange=function(e){var t=n.props,r=t.width,a=t.height;(0,t.onChange)(r,a,Math.abs(parseFloat(e)))},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.depth;return o.a.createElement("div",{className:"webBrayns-view-Scale"},o.a.createElement(Pe,{label:"Width",width:"110px",type:"number",onChange:this.handleWidthChange,value:"".concat(t)}),o.a.createElement(Pe,{label:"Height",width:"110px",type:"number",onChange:this.handleHeightChange,value:"".concat(n)}),o.a.createElement(Pe,{label:"Depth",width:"110px",type:"number",onChange:this.handleDepthChange,value:"".concat(r)}))}}]),t}(o.a.Component)),ga=(n(72),[D.newRGB(0,1,0),D.newRGB(1,1,0),D.newRGB(1,0,1)]),ya=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).clipPlanes=[],n.clipPlaneObject=new nr({color:[0,1,0],width:32,height:24,depth:4}),n.updatePlanes=Dn(Object(i.a)(a.a.mark(function e(){var t,r,i,s,o,c,u,l,h,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state,r=t.x,i=t.y,s=t.z,o=t.width,c=t.height,u=t.depth,l=t.latitude,h=t.longitude,p=t.tilt,n.clipPlaneObject.setTransformation({location:[r,i,s],scale:[o,c,u],rotation:bn.makeQuaternionFromLatLngTilt(l,h,p)});case 3:case"end":return e.stop()}},e)})),50),n.handlePlaneOrientationChange=function(e,t,r){n.setState({latitude:e,longitude:t,tilt:r},n.updatePlanes)},n.handlePlaneLocationChange=function(e,t,r){n.setState({x:e,y:t,z:r})},n.handlePlaneScaleChange=function(e,t,r){n.setState({width:e,height:t,depth:r})},n.handleBack=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ke.dispatch(Ke.Navigation.setPanel("models")),e.next=3,n.clipPlaneObject.setActivated(!1);case 3:return e.next=5,n.clipPlaneObject.detach();case 5:case"end":return e.stop()}},e)})),n.handleActivatedChange=function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.info("activated=",t),n.setState({activated:t}),e.next=4,n.clipPlaneObject.setActivated(t);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={width:32,height:24,depth:4,activated:!0,latitude:0,longitude:0,tilt:0,x:0,y:0,z:0,currentPlaneIndex:-1},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.clipPlanes=v.session.get("web-brayns/clipping-planes",[{x:0,y:0,z:0,width:32,height:24,depth:4,latitude:0,longitude:0,tilt:0}]),this.setCurrentPlaneIndex(0),this.clipPlaneObject.setActivated(this.state.activated),this.clipPlaneObject.attach(),this.updatePlanes();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.updatePlanes();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setCurrentPlaneIndex",value:function(e){if(e!==this.state.currentPlaneIndex){var t=D.ramp(ga,e/this.clipPlanes.length);console.info("planeColor=",t),this.clipPlaneObject.setColor(t)}var n=this.clipPlanes[e];this.setState(Object(d.a)({},n,{currentPlaneIndex:e}))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.latitude,n=e.longitude,r=e.tilt,a=e.x,i=e.y,s=e.z,c=e.width,u=e.height,l=e.depth;return o.a.createElement("div",{className:"webBrayns-view-panel-Clip"},o.a.createElement("header",{className:"thm-bgPD thm-ele-nav"},o.a.createElement("div",null,o.a.createElement(Ce,{content:"back",onClick:this.handleBack})),o.a.createElement("p",null,"Slicing")),o.a.createElement("div",null,o.a.createElement(Nn,{label:"Activate slicing",onChange:this.handleActivatedChange,value:this.state.activated}),o.a.createElement("hr",null),o.a.createElement("h1",null,"Plane size"),o.a.createElement(ba,{width:c,height:u,depth:l,onChange:this.handlePlaneScaleChange}),o.a.createElement("hr",null),o.a.createElement("h1",null,"Plane center"),o.a.createElement(va,{x:a,y:i,z:s,onChange:this.handlePlaneLocationChange}),o.a.createElement("hr",null),o.a.createElement("h1",null,"Plane orientation"),o.a.createElement(ma,{latitude:t,longitude:n,tilt:r,onChange:this.handlePlaneOrientationChange}),o.a.createElement("hr",null),o.a.createElement("h1",null,"Snapshot configuration"),o.a.createElement(cr,null)))}}]),t}(o.a.Component);var wa=Object(l.b)(function(e){return{activated:e.slicer.activated,minX:e.slicer.minX,maxX:e.slicer.maxX,minY:e.slicer.minY,maxY:e.slicer.maxY,minZ:e.slicer.minZ,maxZ:e.slicer.maxZ,latitude:e.slicer.latitude,longitude:e.slicer.longitude,collageDepth:e.slicer.collageDepth}},function(e){return{}})(ya),xa=(n(73),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(w.a)(this,Object(x.a)(t).call(this,e))).state={blob:new Blob},n}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{rr.test()}catch(t){console.error(t)}case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"panel"},o.a.createElement(Mr,{value:this.props.panel},o.a.createElement($r,{key:"models"}),o.a.createElement(da,{key:"model"}),o.a.createElement(wa,{key:"clip"}))),o.a.createElement("div",{className:"view"},"image"===this.props.stream&&o.a.createElement(kr,{key:"image-stream",onPan:qn.gestures.handlePan,onPanStart:qn.gestures.handlePanStart}),"video"===this.props.stream&&o.a.createElement(jr,{key:"video-stream",onPan:qn.gestures.handlePan,onPanStart:qn.gestures.handlePanStart}),o.a.createElement(Ar,{visible:this.props.showConsole})))}}]),t}(o.a.Component));var ka=Object(l.b)(function(e){return{panel:e.navigation.panel,showConsole:e.navigation.showConsole}},function(e){return{}})(xa);n(74);function Ca(){return(Ca=Object(i.a)(a.a.mark(function e(){var t,n,r,i,s,c,h,p,f;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.getHostName(!1);case 2:return t=e.sent,e.prev=3,e.next=6,Je.browse();case 6:e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(3),console.error(e.t0),e.next=13,ut.alert(o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("b",null,"Cannot reach GPFS!")),o.a.createElement("code",{style:{opacity:.5}},e.t0.text)));case 13:location.reload();case 14:return e.prev=14,e.next=17,ut.wait("Contacting Brayns...",qn.connect(t),!1);case 17:return n=e.sent,e.next=20,ut.wait("Loading models...",qn.Api.getScene(),!1);case 20:return r=e.sent,e.next=23,qn.Api.getClipPlanes();case 23:return i=e.sent,s=i.filter(function(e){return null!==e}),c=s.map(function(e){return e.id}),qn.Api.removeClipPlanes(c),Ke.dispatch(Ke.Models.reset(r.models.map(function(e){return{brayns:e,parent:-1,deleted:!1,selected:!1,technical:!1}}))),e.next=30,La();case 30:h=e.sent,console.info("Stream type:",h.toUpperCase()),p=document.getElementById("root"),u.a.render(o.a.createElement(l.a,{store:Ke.store},o.a.createElement(ka,{brayns:n,stream:h})),p),(f=document.getElementById("splash-screen"))&&(f.classList.add("vanish"),window.setTimeout(function(){return document.body.removeChild(f)},600)),e.next=44;break;case 38:return e.prev=38,e.t1=e.catch(14),console.error("Unable to connect Brayns: ",e.t1),e.next=43,ut.alert("Seems like Brayns is not reachable on ".concat(t,"!"));case 43:location.reload();case 44:case"end":return e.stop()}},e,null,[[3,8],[14,38]])}))).apply(this,arguments)}function La(){return Ha.apply(this,arguments)}function Ha(){return(Ha=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qn.request("get-videostream");case 3:if(t=e.sent,console.info("result=",t),t){e.next=7;break}return e.abrupt("return","image");case 7:return e.abrupt("return","video");case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return","image");case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}K.apply("default"),function(){Ca.apply(this,arguments)}()}]),[[30,1,2]]]);
//# sourceMappingURL=main.4678d3be.chunk.js.map