{"version":3,"sources":["tfw/factory/dialog.yaml","tfw/view/input.yaml","tfw/url-args.ts","tfw/converter/boolean.ts","tfw/converter/integer.ts","tfw/converter/unit.ts","tfw/icons.ts","tfw/view/icon.tsx","tfw/converter/string.ts","tfw/layout/flex.tsx","tfw/converter/string-array.ts","tfw/escape-handler.ts","tfw/gesture/moves.ts","tfw/gesture/finger.ts","tfw/gesture/basic-handler.ts","tfw/gesture/gesture.ts","tfw/color.ts","tfw/theme.ts","tfw/converter/function.ts","tfw/behavior/touchable.ts","tfw/intl.ts","tfw/view/button.tsx","tfw/converter/array.ts","tfw/factory/dialog.tsx","tfw/debouncer.ts","tfw/view/input.tsx","tfw/storage.ts","web-brayns/view/input-host-name/input-host-name.tsx","web-brayns/service/host.tsx","web-brayns/state/models.ts","web-brayns/state/index.ts","web-brayns/scene/model.ts","web-brayns/scene/scene.ts","web-brayns/view/image-stream/image-stream.tsx","web-brayns/view/input-path/input-path.tsx","web-brayns/service/local-storage.ts","web-brayns/view/websocket-console/websocket-console.tsx","web-brayns/view/model-button/model-button.tsx","web-brayns/view/model-list/model-list.tsx","web-brayns/view/model-list/container.ts","app.tsx","index.tsx"],"names":["module","exports","en","cancel","close","ok","fr","nan","it","UrlArgs","parse","args","t","location","search","length","substring","split","forEach","item","index","itemWithSpacesInsteadOfPlus","join","indexOfEqual","indexOf","concat","key","substr","val","decodeURIComponent","castBoolean","v","defaultValue","arguments","undefined","text","trim","toLowerCase","num","parseInt","isNaN","castInteger","defVal","Math","floor","startsWith","hexa","parseFloat","RX_CSS_UNIT","draw","d","stroke","fill","iconsBook","android","bug","camera","center","child","code","copy","counter","delete","direction","down","down-double","edit","eraser","export","flag-jp","r","flag-fr","flag-it","flag-de","flag-en","font","format-align-center","format-align-justify","format-align-left","format-align-right","format-bold","format-italic","format-float-center","format-float-left","format-float-none","format-float-right","format-header","format-underline","fullscreen","gear","gps","hand","heart","hide","home","image","import","improvement","info","left","left-double","link","logout","mail","map","map-layer","menu","minus","minus-o","minus-small","pack","plug","plus","plus-o","plus-small","print","question","redo","refresh","right","right-double","run","select","sitemap","unselect","share","show","speaker","speaker-off","split-vertical","split-horizontal","star","stat","switch","tri-down","tri-left","tri-right","tri-up","twitter","undo","up","up-double","user","wait","zoom-in","zoom-out","warning","synonyms","add","back","help","save","_i2","_Object$keys2","Object","keys","EnumPenColor","Icon","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","refIcon","visible","timeoutHandle","React","name","sort","_this2","elemIcon","current","window","clearTimeout","requestAnimationFrame","classList","remove","slot","onHide","setTimeout","_this3","p","animate","flipH","flipV","size","m","exec","scalar","unit","castUnit","content","Array","isArray","castContent","rotate","onClick","classes","svgContent","createSvgContent","push","transform","style","width","height","triggerVisibleAnimation","react","className","ref","viewBox","preserveAspectRatio","strokeWidth","strokeLinecap","strokeLinejoin","def","elementName","_parseDef","_ref","attributes","children","_ref2","slicedToArray","arg1","arg2","parseDef","attribs","attribName","attribValue","toUpperCase","CLASSES","PENS","pen","manageColors","objectSpread","castString","value","Flex","wide","dir","justifyContent","alignItems","flexWrap","wrap","apply","toConsumableArray","defaultArray","defaultString","castStringArray","escape_handler","listener","initialized","document","addEventListener","evt","fire","handlers","handler","pop","CAPACITY","Moves","x","y","_x0","_y0","_time0","_x","_y","_time","_cursor","init","now","shift","idx","Date","idx0","idx1","_index","time","time0","time1","time01","idx2","time12","x0","x1","y0","y1","Finger","fingers","identifier","indexOfFirstNull","BasicHandler","element","handleDown","handleUp","handleMove","pointerType","pointerTypeTime","deviceHandlers","checkPointerType","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","changedTouches","Symbol","iterator","next","done","touch","clientX","clientY","getIndex","buttons","pointer","clear","createClear","err","return","touchstart","mousedown","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","touchend","_this4","mouseup","_this5","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","touchmove","_this6","mousemove","delay","_this$deviceHandlers","removeEventListener","preventDefault","stopPropagation","SYMBOL","ID","STANDARD_EVENTS","Gesture","elem","pointers","id","bind","assign","eventName","_len","names","_key","_i","_names","isDown","moves","rect","top","event","ptr","getPointer","getBoundingClientRect","target","recognizeTap","recognizeSwipe","recognizePan","tap","elapsedTime","abs","startX","startY","recognizePanDown","recognizePanUp","pan","_ptr$moves","hasHandlerFor","sx","speedX","speedY","dx","pandown","panvertical","panup","recognizeSwipeDown","recognizeSwipeUp","recognizeSwipeLeft","swipe","_ptr$moves2","dy","swipedown","swipevertical","swipeup","swipeleft","swipehorizontal","Color","codeCSS","R","G","B","H","S","L","A","input","parseHexa","parseRGB","parseRGBA","parseHSL","luminance","color","hexa2","newColor","chroma","min","max","delta","INV6","charAt","INV15","INV255","RX_RGB","clamp01","RX_RGBA","RX_HSL","INV359","INV99","hsl2rgb","stringify","luminanceStep","color1","color2","alpha","beta","newRGBA","newRGB","red","green","blue","out","toString","tfw_theme","register","registerTheme","body","THEMES","css","console","error","get","vars","bg0","makeGetCurrentColor","bg1","bg2","bg3","bgP","bgPD","bgPL","bgS","bgSD","bgSL","black","white","isDark","colorName","$isDark","average","mix","isThemeGloballyDark","varName","setFontSize","html","documentElement","normalize","completeWithDefaultValues","COLOR","THEME_COLOR_NAMES","themeName","_style","s","ALPHA_HEXA","a","letter","codeVariables","codeBackground","elevationColor","addAlpha","ELEVATIONS","elevationKey","elevation","codeElevation","_loop","depth","tail","fgColorName","bgColorName","styleFgColorName","styleBgColorName","bgClass","fgClass","position","piecesFG","piecesSVG","piecesBG","codeText","styleElement","createElement","getElementsByTagName","appendChild","textContent","0","2","4","6","8","9","10","11","12","16","24","completeBackgrounds","has0","has1","has2","has3","rgb2hsl","darkenBackground","color0","r0","g0","b0","color3","r3","g3","b3","dark","light","rotateHue","bg","EMPTY_FUNCTION","Touchable","_element","_enabled","accent","onTap","enabled","castFunction","that","gesture","on","keydown","getComputedStyle","screen","div","createScreen","borderRadius","getPropertyValue","w","h","radius","ceil","sqrt","ripple","background","Theme","removeChild","Mode","Button","touchable","handleClick","assertThisInitialized","tag","label","icon","flat","small","castArray","disabled","icon_Icon","gCurrentLanguage","localStorage","getItem","navigator","language","Intl","translations","params","translation","addParams","languages","_languages","lang","ex","Error","instance","translate","defineProperty","intl","defaultText","toIntl","result","_Object$keys","_value","setItem","output","mark","mode","Text","paramIndex","c","Escape","Placeholder","tfw_factory_dialog","alert","Promise","resolve","dialog","Dialog","onClose","maxWidth","footer","button_Button","_","confirm","caption","title","confirmed","btnCancel","btnOK","options","task","flex_Flex","closeOnEscape","reject","then","make","require","_screen","_options","EscapeHandler","_hide","opt","header","ReactDOM","render","debouncer","action","timer","arg","Input","timerId","state","onFocus","onBlur","onChange","setFocus","Debouncer","focus","type","setSelectionRange","checkValidity","validator","setState","NUMBER_VALIDATOR","oldProps","globalId","htmlFor","storage","local","makeStorage","session","sessionStorage","JSON","removeItem","set","del","HostNameInput","handleChange","hostName","handle","Storage","react_default","input_Input","Component","CONNECTION_TIMEOUT","host","getHostName","connect","_callee2","ignoreQueryString","regenerator_default","_context2","prev","abrupt","asyncToGenerator","_callee","urlArgs","hostFromQueryString","_context","input_host_name_HostNameInput","sent","reload","stop","_x3","_callee3","_context3","timeout","client","BraynsClient","ready","subscribe","isReady","state_models","INITIAL_STATE","reducer","models","slice","model","Models","store","createStore","web_brayns_state","dispatch","Model","brayns","Scene","transformation","applyTransfo","request","scene_scene","loadMeshFromPath","setViewPort","ServiceHost","method","_args2","scene","rendererParams","pixelAlpha","shadows","softShadows","filename","_callee4","_context4","viewport","_callee5","path","_context5","State","ImageStream","canvasRef","createRef","updateViewPort","canvas","ctx","observe","IMAGE_JPEG","blob","img","srcW","srcH","dstW","dstH","dstX","dstY","blobToImg","naturalWidth","naturalHeight","drawImage","onfocus","moz-opaque","getContext","url","URL","createObjectURL","Image","src","decode","onload","prefix","_default","WebsocketConsole","handleMethodChange","handleParamsChange","handleExecute","_this$state","querying","t0","finish","STORAGE_PREFIX","ModelButton","modelList","model_button_ModelButton","ModelList","App","handleLoadMesh","input_path_default","loadAstrocyte","locate","container","image_stream_ImageStream","websocket_console_WebsocketConsole","pad","root","splash","getElementById","es","app_App","start"],"mappings":"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","file":"static/js/main.058383c7.chunk.js","sourcesContent":["module.exports = {\"en\":{\"cancel\":\"Cancel\",\"close\":\"Close\",\"ok\":\"Ok\"},\"fr\":{\"cancel\":\"Annuler\",\"close\":\"Fermer\",\"ok\":\"OK\"}}","module.exports = {\"en\":{\"nan\":\"Not a number!\"},\"fr\":{\"nan\":\"Ce n'est pas un nombre !\"},\"it\":{\"nan\":\"Non è un numero !\"}}","interface IMap {\r\n    [key: string]: string;\r\n}\r\n\r\nconst UrlArgs = {\r\n    parse(): IMap {\r\n        const\r\n            args: IMap = {},\r\n            t = location.search;\r\n\r\n        if (t.length < 2) return args;\r\n        const items = t.substring(1).split('&');\r\n        items.forEach((item, index) => {\r\n            const itemWithSpacesInsteadOfPlus = item.split(\"+\").join(\" \");\r\n            const indexOfEqual = itemWithSpacesInsteadOfPlus.indexOf(\"=\");\r\n            if (indexOfEqual === -1) {\r\n                args[`${index}`] = itemWithSpacesInsteadOfPlus;\r\n            } else {\r\n                const key = itemWithSpacesInsteadOfPlus.substr(0, indexOfEqual);\r\n                const val = itemWithSpacesInsteadOfPlus.substr(indexOfEqual + 1);\r\n                args[key] = decodeURIComponent(val);\r\n            }\r\n        });\r\n\r\n        return args;\r\n    }\r\n};\r\n\r\nexport default UrlArgs;\r\n","export default function castBoolean(v: any, defaultValue = false): boolean {\r\n    switch (typeof v) {\r\n        case \"undefined\":\r\n            return defaultValue;\r\n        case \"boolean\":\r\n            return v;\r\n        case \"number\":\r\n            return v != 0;\r\n        case \"string\":\r\n            const text = v.trim().toLowerCase();\r\n            if (text === 'true' || text === 'yes') return true;\r\n            const num = parseInt(text);\r\n            if (!isNaN(num)) return num !== 0;\r\n            return false;\r\n        default:\r\n            return false;\r\n    }\r\n}\r\n","export default function castInteger(v: any, defaultValue = 0): number {\r\n    const defVal = Math.floor(.5 + defaultValue);\r\n\r\n    switch (typeof v) {\r\n        case \"boolean\":\r\n            return v ? 1 : 0;\r\n        case \"number\":\r\n            return Math.floor(.5 + v);\r\n        case \"string\":\r\n            const text = v.trim().toLowerCase();\r\n            if (text.startsWith(\"0x\")) {\r\n                const hexa = parseInt(text.substr(2), 16);\r\n                return isNaN(hexa) ? defVal : hexa;\r\n            }\r\n            if (text.startsWith(\"0b\")) {\r\n                const hexa = parseInt(text.substr(2), 2);\r\n                return isNaN(hexa) ? defVal : hexa;\r\n            }\r\n            if (text.startsWith(\"0o\")) {\r\n                const hexa = parseInt(text.substr(2), 8);\r\n                return isNaN(hexa) ? defVal : hexa;\r\n            }\r\n            const num = parseFloat(text);\r\n            if (isNaN(num)) return defVal;\r\n            return Math.floor(.5 + num);\r\n        default:\r\n            return defVal;\r\n    }\r\n}\r\n","\"use strict\";\r\n\r\nconst RX_CSS_UNIT = /^(-?[.0-9]+)[ \\n\\r]*([a-z%]*)/;\r\n\r\nexport default function castUnit(v: any, defaultValue: string = \"100%\") {\r\n    if (typeof v === 'number') return `${v}px`;\r\n    if (typeof v !== 'string') return defaultValue;\r\n    const text = `${v}`.trim().toLowerCase();\r\n    if (text === 'auto' || text === 'inherit') return text;\r\n    if (text.startsWith(\"calc(\")) return text;\r\n    const m = RX_CSS_UNIT.exec(text);\r\n    if (!m) return defaultValue;\r\n    const scalar = parseFloat(m[1]);\r\n    if (isNaN(scalar) || scalar === 0) return \"0\";\r\n    const unit = m[2].length < 1 ? \"px\" : m[2];\r\n    return `${scalar}${unit}`;\r\n}\r\n","\"use strict\";\r\n\r\n/**\r\n * @module\r\n * This module provides a list of SVG icons definitions.\r\n * You can register new one if you wish.\r\n */\r\n\r\n\r\nexport type TIconDefinition =\r\n    [string, {}] |\r\n    [string, TIconDefinitionArray] |\r\n    [string, {}, TIconDefinitionArray] |\r\n    [string, TIconDefinitionArray, {}];\r\n\r\ninterface TIconDefinitionArray extends Array<TIconDefinition> { }\r\n\r\nexport interface IIconsDefinition {\r\n    [name: string]: TIconDefinition\r\n}\r\n\r\n\r\n\r\n/**\r\n * Register new icons.\r\n * @param {object}  icons - The  keys are the  name of the  icons, the\r\n * value is the object representing an SVG image.\r\n * @returns {undefined}\r\n */\r\nexport function register(icons: IIconsDefinition): void {\r\n    for (const key of Object.keys(icons)) {\r\n        const val: TIconDefinition = icons[key];\r\n        iconsBook[key] = val;\r\n    }\r\n};\r\n\r\n/**\r\n * @param {string} d - Path definition, as in the attribute `d` of the\r\n * SVG tag `path`.\r\n * @returns {array} SVG description.\r\n */\r\nfunction draw(d: string): TIconDefinition {\r\n    return ['path', { d, stroke: 'none', fill: 0 }];\r\n}\r\n\r\n\r\nexport const iconsBook: IIconsDefinition = {\r\n    android: draw('M15,-35H10V-40H15M-10,-35H-15V-40H-10M18,-49L24,-56C25,-57,25,-58,24,-59C23,-60,22,-60,21,-59L13,-52C9,-54,5,-55,0,-55C-5,-55,-9,-54,-13,-52L-21,-59C-22,-60,-23,-60,-24,-59C-25,-58,-25,-57,-24,-56L-18,-49C-25,-44,-30,-35,-30,-25H30C30,-35,25,-44,18,-49M43,-20A8,8,0,0,0,35,-12V23A8,8,0,0,0,43,30A8,8,0,0,0,50,23V-12A8,8,0,0,0,43,-20M-42,-20A8,8,0,0,0,-50,-12V23A8,8,0,0,0,-42,30A8,8,0,0,0,-35,23V-12A8,8,0,0,0,-42,-20M-30,30A5,5,0,0,0,-25,35H-20V53A8,8,0,0,0,-12,60A8,8,0,0,0,-5,53V35H5V53A8,8,0,0,0,13,60A8,8,0,0,0,20,53V35H25A5,5,0,0,0,30,30V-20H-30V30Z'),\r\n    bug: draw(\"M10,0H-10V-10H10M10,20H-10V10H10M40,-20H26C24,-24 21,-27 17,-30L25,-38L18,-45L7,-34C5,-35 3,-35 0,-35C-2,-35 -5,-35 -7,-34L-18,-45L-25,-38L-17,-30C-21,-27 -24,-24 -26,-20H-40V-10H-30C-30,-8 -30,-7 -30,-5V0H-40V10H-30V15C-30,17 -30,18 -30,20H-40V30H-26C-21,39 -11,45 0,45C11,45 21,39 26,30H40V20H30C30,18 30,17 30,15V10H40V0H30V-5C30,-7 30,-8 30,-10H40V-20Z\"),\r\n    camera: draw('M-40,-40H-25L-15,-50H15L25,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M0,-25A25,25,0,0,0,-25,0A25,25,0,0,0,0,25A25,25,0,0,0,25,0A25,25,0,0,0,0,-25M0,-15A15,15,0,0,1,15,0A15,15,0,0,1,0,15A15,15,0,0,1,-15,0A15,15,0,0,1,0,-15Z'),\r\n    cancel: draw('M7,0L35,28V35H28L0,7L-28,35H-35V28L-7,0L-35,-28V-35H-28L0,-7L28,-35H35V-28L7,0Z'),\r\n    center: draw(\r\n        'M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M35,35H15V45H35A10,10,0,0,0,45,35V15H35M35,-45H15V-35H35V-15H45V-35A10,10,0,0,0,35,-45M-35,-35H-15V-45H-35A10,10,0,0,0,-45,-35V-15H-35M-35,15H-45V35A10,10,0,0,0,-35,45H-15V35H-35V15Z'\r\n    ),\r\n    child: draw('M5,-50V-10H45A40,40,0,0,0,5,-50M37,19C42,13,45,4,45,-5H-28L-32,-15H-50V-5H-39C-39,-5,-29,15,-28,17C-34,20,-37,26,-37,33A18,18,0,0,0,-20,50C-11,50,-4,44,-3,35H8C9,44,16,50,25,50A18,18,0,0,0,43,33C43,27,40,23,37,19M-20,40A8,8,0,0,1,-27,33A8,8,0,0,1,-20,25A8,8,0,0,1,-12,33A8,8,0,0,1,-20,40M25,40A8,8,0,0,1,18,33A8,8,0,0,1,25,25A8,8,0,0,1,33,33A8,8,0,0,1,25,40Z'),\r\n    close: draw('M0,-50C28,-50,50,-28,50,0C50,28,28,50,0,50C-28,50,-50,28,-50,0C-50,-28,-28,-50,0,-50M18,-25L0,-7L-18,-25L-25,-18L-7,0L-25,18L-18,25L0,7L18,25L25,18L7,0L25,-18L18,-25Z'),\r\n    code: draw('M13,23L36,0L13,-23L20,-30L50,0L20,30L13,23M-13,23L-36,0L-13,-23L-20,-30L-50,0L-20,30L-13,23Z'),\r\n    copy: draw('M35,45H-20V-25H35M35,-35H-20A10,10,0,0,0,-30,-25V45A10,10,0,0,0,-20,55H35A10,10,0,0,0,45,45V-25A10,10,0,0,0,35,-35M20,-55H-40A10,10,0,0,0,-50,-45V25H-40V-45H20V-55Z'),\r\n    counter: draw('M-40,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M-40,-30V30H-5V-30H-40M40,30V-30H34C35,-27,35,-25,35,-24C34,-21,32,-17,31,-16L20,-3L36,-4L36,3L10,2L10,-3C10,-3,25,-19,26,-20C27,-22,30,-30,23,-30C16,-30,17,-23,17,-23L9,-23C9,-23,9,-27,11,-30H5V30H18L18,26L23,26C23,26,27,25,27,20C28,15,23,15,23,15C22,15,17,16,17,20H10C10,20,10,9,23,9C36,9,35,20,35,20C35,20,35,26,29,28L32,30H40M-15,20H-23V-9L-32,-6V-12L-16,-18H-15V20Z'),\r\n    delete: draw(\r\n        'M35,-40H18L13,-45H-12L-17,-40H-35V-30H35M-30,35A10,10,0,0,0,-20,45H20A10,10,0,0,0,30,35V-25H-30V35Z'),\r\n    direction: draw('M10,13V0H-10V15H-20V-5A5,5,0,0,1,-15,-10H10V-22L28,-5M49,-4L4,-49H3C2,-50,-2,-50,-4,-49L-49,-4C-50,-2,-50,2,-49,4L-4,49C-2,50,2,51,4,49L49,4C51,2,51,-2,49,-4Z'),\r\n    down: draw('M-30,-30L0,30,30,-30'),\r\n    'down-double': draw('M-30,-40L0,-10,30,-40M-30,10L0,40,30,10'),\r\n    edit: draw(\r\n        \"M24,-46C22,-46,20,-46,19,-44L8,-34L35,-7L45,-17C48,-21,48,-25,45,-28L29,-44C28,-46,26,-46,24,-46M5,-30L-36,11L-23,12L-22,23L-11,24L-9,37L31,-3M-39,15L-47,49L-14,40L-15,29L-27,28L-28,16\"\r\n    ),\r\n    eraser: draw('M21,-42L46,-17C50,-14,50,-7,46,-3L0,43C-8,50,-20,50,-28,43L-46,25C-50,21,-50,15,-46,11L7,-42C11,-46,17,-46,21,-42M-39,18L-21,36C-17,39,-11,39,-7,36L11,18L-14,-7L-39,18Z'),\r\n    'export': draw('M-35,40H35V30H-35M35,-15H15V-45H-15V-15H-35L0,20L35,-15Z'),\r\n    \"flag-jp\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,50h130v-100h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,45h120v-90h-120z\"\r\n            }],\r\n            [\"circle\", {\r\n                fill: \"#bc002d\",\r\n                r: 24\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-fr\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,50h130v-100h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#002395\",\r\n                d: \"M-60,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-20,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#ed2939\",\r\n                d: \"M20,45h40v-90h-40z\"\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-it\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,50h130v-100h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#009246\",\r\n                d: \"M-60,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-20,45h40v-90h-40z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#ce2b37\",\r\n                d: \"M20,45h40v-90h-40z\"\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-de\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,41h130v-82h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#ffce00\",\r\n                d: \"M-60,36h120v-24h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#dd0000\",\r\n                d: \"M-60,12h120v-24h-120z\"\r\n            }]\r\n        ]\r\n    ],\r\n    \"flag-en\": [\"g\", {\r\n        stroke: \"none\"\r\n    },\r\n        [\r\n            [\"path\", {\r\n                fill: \"#000\",\r\n                d: \"M-65,37h130v-75h-130z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#bb133e\",\r\n                d: \"M-60,32h120v-65h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,22h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,12h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,2h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,-8h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,-18h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#fff\",\r\n                d: \"M-60,-28h120v5h-120z\"\r\n            }],\r\n            [\"path\", {\r\n                fill: \"#002664\",\r\n                d: \"M-60,-33h48v35h-48z\"\r\n            }],\r\n\r\n        ]\r\n    ],\r\n    font: draw('M25,-20H40V40H45V45H25V40H30V25H10L3,40H10V45H-10V40H-5L25,-20M30,-15L13,20H30V-15M-35,-45H-10C-4,-45,0,-41,0,-35V20H-15V-5H-30V20H-45V-35C-45,-41,-41,-45,-35,-45M-30,-35V-15H-15V-35H-30Z'),\r\n    'format-align-center': draw('M-45,-45H45V-35H-45V-45M-25,-25H25V-15H-25V-25M-45,-5H45V5H-45V-5M-25,15H25V25H-25V15M-45,35H45V45H-45V35Z'),\r\n    'format-align-justify': draw('M-45,-45H45V-35H-45V-45M-45,-25H45V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H45V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-align-left': draw('M-45,-45H45V-35H-45V-45M-45,-25H15V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H15V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-align-right': draw(' M-45,-45H45V-35H-45V-45M-15,-25H45V-15H-15V-25M-45,-5H45V5H-45V-5M-15,15H45V25H-15V15M-45,35H45V45H-45V35Z '),\r\n    'format-bold': draw('M8,18H-10V3H8A8,8,0,0,1,15,10A8,8,0,0,1,8,18M-10,-27H5A8,8,0,0,1,13,-20A8,8,0,0,1,5,-12H-10M18,-6C23,-9,26,-15,26,-20C26,-31,18,-40,6,-40H-25V30H10C21,30,29,22,29,11C29,3,24,-3,18,-6Z'),\r\n    'format-italic': draw('M-10,-40V-25H1L-16,15H-30V30H10V15H-1L16,-25H30V-40H-10Z'),\r\n    'format-float-center': draw('M-15,-25H15V5H-15V-25M-45,-45H45V-35H-45V-45M-45,15H45V25H-45V15M-45,35H25V45H-45V35Z'),\r\n    'format-float-left': draw('M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-25V-15H-5V-25H45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-float-none': draw('M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-float-right': draw('M15,-25H45V5H15V-25M-45,-45H45V-35H-45V-45M5,-25V-15H-45V-25H5M-15,-5V5H-45V-5H-15M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z'),\r\n    'format-header': draw('M-40,-40H-30V-10H-10V-40H0V30H-10V0H-30V30H-40V-40M13,-23L31,-5L13,13L20,20L45,-5L20,-30L13,-23Z'),\r\n    'format-underline': draw(\r\n        'M-35,45H35V35H-35V45M0,25A30,30,0,0,0,30,-5V-45H18V-5A18,18,0,0,1,0,13A18,18,0,0,1,-17,-5V-45H-30V-5A30,30,0,0,0,0,25Z'\r\n    ),\r\n    fullscreen: draw('M-35,-35H-10V-25H-25V-10H-35V-35M10,-35H35V-10H25V-25H10V-35M25,10H35V35H10V25H25V10M-10,25V35H-35V10H-25V25H-10Z'),\r\n    gear: draw(\r\n        'M0,18A18,18,0,0,1,-17,0A18,18,0,0,1,0,-17A18,18,0,0,1,18,0A18,18,0,0,1,0,18M37,5C37,3,38,2,38,0C38,-2,37,-3,37,-5L48,-13C49,-14,49,-15,48,-16L38,-34C38,-35,36,-35,35,-35L23,-30C20,-32,18,-33,14,-35L13,-48C12,-49,11,-50,10,-50H-10C-11,-50,-12,-49,-12,-48L-14,-35C-17,-33,-20,-32,-23,-30L-35,-35C-36,-35,-38,-35,-38,-34L-48,-16C-49,-15,-49,-14,-48,-13L-37,-5C-37,-3,-37,-2,-37,0C-37,2,-37,3,-37,5L-48,13C-49,14,-49,15,-48,16L-38,34C-38,35,-36,35,-35,35L-23,30C-20,32,-17,33,-14,35L-12,48C-12,49,-11,50,-10,50H10C11,50,12,49,13,48L14,35C18,33,20,32,23,30L35,35C36,35,38,35,38,34L48,16C49,15,49,14,48,13L37,5Z'\r\n    ),\r\n    gps: draw(\r\n        'M0,-20A20,20,0,0,1,20,0A20,20,0,0,1,0,20A20,20,0,0,1,-20,0A20,20,0,0,1,0,-20M-45,5H-55V-5H-45C-42,-26,-26,-42,-5,-45V-55H5V-45C26,-42,43,-26,45,-5H55V5H45C43,26,26,43,5,45V55H-5V45C-26,43,-42,26,-45,5M0,-35A35,35,0,0,0,-35,0A35,35,0,0,0,0,35A35,35,0,0,0,35,0A35,35,0,0,0,0,-35Z'\r\n    ),\r\n    hand: draw(\r\n        \"M-10,-50A10,10,0,0,1,0,-40V-17C0,-17,10,-19,10,-14C10,-14,20,-15,20,-10C20,-10,30,-11,30,-6C30,-6,40,-7,40,-2V15C40,20,25,45,25,50H-15C-15,50,-25,15,-40,5C-40,5,-45,-25,-20,0V-40A10,10,0,0,1,-10,-50Z\"\r\n    ),\r\n    heart: draw('M0,47L-7,40C-33,17,-50,1,-50,-17C-50,-33,-38,-45,-22,-45C-14,-45,-5,-41,0,-35C5,-41,14,-45,23,-45C38,-45,50,-33,50,-17C50,1,33,17,7,40L0,47Z'),\r\n    hide: draw(\r\n        'M-1,-15L15,1C15,1,15,0,15,0A15,15,0,0,0,0,-15C0,-15,-1,-15,-1,-15M-22,-11L-15,-3C-15,-2,-15,-1,-15,0A15,15,0,0,0,0,15C1,15,2,15,3,15L11,22C8,24,4,25,0,25A25,25,0,0,1,-25,0C-25,-4,-24,-8,-22,-11M-50,-39L-39,-27L-36,-25C-45,-18,-51,-10,-55,0C-46,22,-25,38,0,38C8,38,15,36,22,33L24,35L39,50L45,44L-44,-45M0,-25A25,25,0,0,1,25,0C25,3,24,6,23,9L38,24C45,18,51,9,55,0C46,-22,25,-37,0,-37C-7,-37,-14,-36,-20,-34L-9,-23C-6,-24,-3,-25,0,-25Z'\r\n    ),\r\n    home: draw('M-10,40V10H10V40H35V0H50L0,-45L-50,0H-35V40H-10Z'),\r\n    image: draw('M5,-15H33L5,-42V-15M-30,-50H10L40,-20V40A10,10,0,0,1,30,50H-30C-36,50,-40,46,-40,40V-40C-40,-46,-36,-50,-30,-50M-30,40H15L30,40V0L10,20L0,10L-30,40M-20,-15A10,10,0,0,0,-30,-5A10,10,0,0,0,-20,5A10,10,0,0,0,-10,-5A10,10,0,0,0,-20,-15Z'),\r\n    import: draw('M-15,20V-10H-35L0,-45L35,-10H15V20H-15M-35,40V30H35V40H-35Z'),\r\n    improvement: draw(\"M0,50A50,50,0,0,1,-50,0A50,50,0,0,1,0,-50A50,50,0,0,1,50,0A50,50,0,0,1,0,50M0,-25L-25,0H-10V20H10V0H25L0,-25Z\"),\r\n    info: draw('M8,-40A8,8,0,0,0,0,-32A8,8,0,0,0,8,-25A8,8,0,0,0,15,-32A8,8,0,0,0,8,-40M6,-16C0,-16,-17,-3,-17,-3C-17,-2,-17,-2,-16,-1C-16,1,-16,1,-15,0C-14,0,-12,-2,-9,-3C1,-10,-8,6,-12,32C-14,45,-2,39,1,37C4,35,12,29,13,28C14,28,13,27,12,26C12,25,11,26,11,26C8,28,2,32,1,29C0,27,6,7,9,-6C10,-10,12,-17,6,-16Z'),\r\n    left: ['path', { fill: 0, d: 'M40,-5V5H-20L8,33L0,40L-39,0L0,-40L8,-32L-20,-5H40Z' }],\r\n    'left-double': draw('M-10,-30L-40,0,-10,30M40,-30L10,0,40,30'),\r\n    link: draw('M-7,7C-5,9,-5,12,-7,14C-9,16,-12,16,-14,14C-24,4,-24,-11,-14,-21V-21L4,-39C13,-49,29,-49,39,-39C49,-29,49,-13,39,-4L31,4C32,0,31,-4,29,-8L32,-11C38,-16,38,-26,32,-32C26,-38,16,-38,11,-32L-7,-14C-13,-8,-13,1,-7,7M7,-14C9,-16,12,-16,14,-14C24,-4,24,11,14,21V21L-4,39C-13,49,-29,49,-39,39C-49,29,-49,13,-39,4L-31,-4C-31,0,-31,4,-29,8L-32,11C-38,16,-38,26,-32,32C-26,38,-16,38,-11,32L7,14C13,8,13,-1,7,-7C5,-9,5,-12,7,-14Z'),\r\n    location: draw('M0,-2A13,13,0,0,1,-12,-15A13,13,0,0,1,0,-27A13,13,0,0,1,13,-15A13,13,0,0,1,0,-2M0,-50A35,35,0,0,0,-35,-15C-35,11,0,50,0,50C0,50,35,11,35,-15A35,35,0,0,0,0,-50Z'),\r\n    logout: draw(\r\n        \"M25,26V10H-10V-10H25V-26L51,0L25,26M5,-50A10,10,0,0,1,15,-40V-20H5V-40H-40V40H5V20H15V40A10,10,0,0,1,5,50H-40A10,10,0,0,1,-50,40V-40A10,10,0,0,1,-40,-50H5Z\"\r\n    ),\r\n    mail: draw(\r\n        'M40,-40H-40A10,10,0,0,0,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-30A10,10,0,0,0,40,-40M40,30H-40V-20L0,5L40,-20V30M40,-30L0,-5L-40,-30V-30H40V-30Z'\r\n    ),\r\n    map: draw('M15,35L-15,24V-35L15,-24M43,-45C42,-45,42,-45,42,-45L15,-34L-15,-45L-43,-35C-44,-35,-45,-34,-45,-33V43A3,3,0,0,0,-42,45C-42,45,-42,45,-42,45L-15,34L15,45L43,36C44,35,45,34,45,33V-42A3,3,0,0,0,43,-45Z'),\r\n    \"map-layer\": draw('M0,20L37,-9L45,-15L0,-50L-45,-15L-37,-9M0,33L-37,4L-45,10L0,45L45,10L37,4L0,33Z'),\r\n    menu: draw('M-45,-30H45V-20H-45V-30M-45,-5H45V5H-45V-5M-45,20H45V30H-45V20Z'),\r\n    minus: draw('M35,5H-35V-5H35V5Z'),\r\n    \"minus-o\": draw('M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M-25,5H25V-5H-25'),\r\n    \"minus-small\": draw('M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M25,-5V5H-25V-5H25Z'),\r\n    ok: draw('M45,-25L-15,35L-42,8L-35,0L-15,21L38,-32L45,-25Z'),\r\n    pack: ['path', { fill: 0, d: 'M45,23C45,24,44,26,42,27L3,49C2,50,1,50,0,50C-1,50,-2,50,-3,49L-42,27C-44,26,-45,24,-45,23V-22C-45,-24,-44,-26,-42,-27L-3,-49C-2,-50,-1,-50,0,-50C1,-50,2,-50,3,-49L42,-27C44,-26,45,-24,45,-22V23M0,-39L-35,-20V20L0,39L35,20V-20L0,-39M0,-29L24,-15L0,-1L-24,-15L0,-29M25,14L5,26V8L25,-3V14M-5,26L-25,14V-3L-5,8V26Z' }],\r\n    plug: draw('M20,-25V-45H10V-25H-10V-45H-20V-25H-20C-25,-25,-30,-20,-30,-15V13L-12,30V45H13V30L30,13V-15C30,-20,25,-25,20,-25Z'),\r\n    plus: draw('M35,5H5V35H-5V5H-35V-5H-5V-35H5V-5H35V5Z'),\r\n    \"plus-o\": draw('M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M5,-25H-5V-5H-25V5H-5V25H5V5H25V-5H5V-25Z'),\r\n    \"plus-small\": draw('M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M-5,-25H5V-5H25V5H5V25H-5V5H-25V-5H-5V-25Z'),\r\n    print: ['path', {\r\n        fill: 0,\r\n        d: 'M30,-45H-30V-25H30M35,0A5,5,0,0,1,30,-5A5,5,0,0,1,35,-10A5,5,0,0,1,40,-5A5,5,0,0,1,35,0M20,35H-20V10H20M35,-20H-35A15,15,0,0,0,-50,-5V25H-30V45H30V25H50V-5A15,15,0,0,0,35,-20Z'\r\n    }],\r\n    question: draw(\"M-10,35H5V50H-10V35M0,-50C27,-49,38,-22,23,-2C18,3,12,7,8,11C5,15,5,20,5,25H-10C-10,17,-10,10,-7,5C-3,0,3,-3,8,-7C20,-18,17,-34,0,-35A15,15,0,0,0,-15,-20H-30A30,30,0,0,1,0,-50Z\"),\r\n    redo: draw('M32,-7C23,-15,11,-20,-2,-20C-26,-20,-45,-5,-52,16L-40,20C-35,4,-20,-7,-2,-7C7,-7,16,-4,23,2L5,20H50V-25L32,-7Z'),\r\n    refresh: draw('M28,-28C21,-35,11,-40,0,-40A40,40,0,0,0,-40,0A40,40,0,0,0,0,40C19,40,34,27,39,10H28C24,22,13,30,0,30A30,30,0,0,1,-30,0A30,30,0,0,1,0,-30C8,-30,16,-27,21,-21L5,-5H40V-40L28,-28Z'),\r\n    right: ['path', { fill: 0, d: 'M-40,-5V5H20L-7,33L0,40L39,0L0,-40L-7,-32L20,-5H-40Z' }],\r\n    'right-double': draw('M10,-30L40,0,10,30M-40,-30L-10,0,-40,30'),\r\n    run: draw('M23,-32A10,10,0,0,0,33,-42A10,10,0,0,0,23,-52A10,10,0,0,0,13,-42A10,10,0,0,0,23,-32M5,37L10,15L20,25V55H30V18L20,8L23,-7C29,0,39,5,50,5V-5C41,-5,33,-9,28,-17L23,-25C22,-28,18,-30,15,-30C13,-30,13,-29,11,-29L-15,-18V5H-5V-12L4,-15L-4,25L-28,20L-30,30L5,37M-40,-15A5,5,0,0,1,-45,-20A5,5,0,0,1,-40,-25H-25V-15H-40M-35,-35A5,5,0,0,1,-40,-40A5,5,0,0,1,-35,-45H-10V-35H-35M-45,5A5,5,0,0,1,-50,0A5,5,0,0,1,-45,-5H-25V5H-45Z'),\r\n    search: draw('M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z'),\r\n    select: draw('M35,35H-35V-35H15V-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-5H35M-20,-10L-27,-2L-5,20L45,-30L38,-37L-5,6L-20,-10Z'),\r\n    sitemap: draw('M-15,-50V-20H-5V-5H-35C-41,-5,-45,-1,-45,5V20H-55V50H-25V20H-35V5H-5V20H-15V50H15V20H5V5H35V20H25V50H55V20H45V5C45,-1,41,-5,35,-5H5V-20H15V-50H-15Z'),\r\n    unselect: draw('M35,-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-35C45,-41,41,-45,35,-45M35,-35V35H-35V-35H35Z'),\r\n    share: draw('M30,20C26,20,23,22,20,24L-15,3C-15,2,-15,1,-15,0C-15,-1,-15,-2,-15,-3L20,-24C23,-22,26,-20,30,-20A15,15,0,0,0,45,-35A15,15,0,0,0,30,-50A15,15,0,0,0,15,-35C15,-34,15,-33,15,-31L-20,-11C-22,-13,-26,-15,-30,-15A15,15,0,0,0,-45,0A15,15,0,0,0,-30,15C-26,15,-22,13,-20,11L16,32C16,33,15,34,15,35C15,43,22,50,30,50C38,50,45,43,45,35A15,15,0,0,0,30,20Z'),\r\n    show: draw('M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M0,25A25,25,0,0,1,-25,0A25,25,0,0,1,0,-25A25,25,0,0,1,25,0A25,25,0,0,1,0,25M0,-37C-25,-37,-46,-22,-55,0C-46,22,-25,38,0,38C25,38,46,22,55,0C46,-22,25,-37,0,-37Z'),\r\n    speaker: draw('M40,35L33,28C41,21,45,11,45,0C45,-11,41,-21,33,-28L40,-35C49,-26,55,-14,55,0C55,14,49,26,40,35M26,21L19,14C23,11,25,6,25,0C25,-6,23,-11,19,-14L26,-21C32,-16,35,-8,35,0C35,8,32,16,26,21M-40,-45H0A10,10,0,0,1,10,-35V35A10,10,0,0,1,0,45H-40A10,10,0,0,1,-50,35V-35A10,10,0,0,1,-40,-45M-20,-35A10,10,0,0,0,-30,-25A10,10,0,0,0,-20,-15A10,10,0,0,0,-10,-25A10,10,0,0,0,-20,-35M-20,-5A20,20,0,0,0,-40,15A20,20,0,0,0,-20,35A20,20,0,0,0,0,15A20,20,0,0,0,-20,-5M-20,5A10,10,0,0,1,-10,15A10,10,0,0,1,-20,25A10,10,0,0,1,-30,15A10,10,0,0,1,-20,5Z'),\r\n    \"speaker-off\": draw('M-50,-34L-44,-40L45,49L39,55L31,48C30,49,28,50,25,50H-25C-31,50,-35,46,-35,40V-19L-50,-34M0,30A15,15,0,0,1,-15,15C-15,11,-14,8,-11,5L-18,-2C-22,3,-25,8,-25,15A25,25,0,0,0,0,40C7,40,13,38,17,33L10,26C7,29,4,30,0,30M25,15A25,25,0,0,0,0,-10H-1L-34,-43C-33,-47,-29,-50,-25,-50H25A10,10,0,0,1,35,-40V26L25,16V15M0,-40C-6,-40,-10,-36,-10,-30A10,10,0,0,0,0,-20A10,10,0,0,0,10,-30C10,-36,5,-40,0,-40Z'),\r\n    \"split-vertical\": draw('M30,20V5H15V50H5V-50H15V-5H30V-20L50,0L30,20M-50,0L-30,20V5H-15V50H-5V-50H-15V-5H-30V-20L-50,0Z'),\r\n    \"split-horizontal\": draw('M-20,30H-5V15H-50V5H50V15H5V30H20L0,50L-20,30M0,-50L-20,-30H-5V-15H-50V-5H50V-15H5V-30H20L0,-50Z'),\r\n    star: draw('M0,26L31,45L23,10L50,-14L14,-17L0,-50L-14,-17L-50,-14L-23,10L-31,45L0,26Z'),\r\n    stat: draw('M-45,50V-20H-25V50H-45M-10,50V-50H10V50H-10M25,50V10H45V50H25Z'),\r\n    'switch': draw('M-45,-40V3L-30,-12L-15,5C-10,10,-10,15,-10,15V45H10V10C10,10,10,5,7,0C5,-5,0,-10,0,-10L-15,-27L-2,-40M30,-40L8,-18L10,-15C10,-15,15,-10,17,-5C18,-3,19,-1,19,1L45,-25'),\r\n    'tri-down': draw('M-23,-17L0,6L23,-17L30,-10L0,20L-30,-10L-23,-17Z'),\r\n    'tri-left': draw('M17,23L-6,0L17,-23L10,-30L-20,0L10,30L17,23Z'),\r\n    'tri-right': draw('M-17,23L6,0L-17,-23L-10,-30L20,0L-10,30L-17,23Z'),\r\n    'tri-up': draw('M-23,17L0,-6L23,17L30,10L0,-20L-30,10L-23,17Z'),\r\n    twitter: draw('M52,-30C48,-28,44,-27,40,-27C44,-29,48,-33,49,-38C45,-36,41,-34,36,-33C32,-37,26,-40,20,-40C8,-40,-1,-30,-1,-19C-1,-17,-1,-15,-1,-14C-19,-15,-34,-23,-45,-36C-47,-33,-48,-29,-48,-25C-48,-18,-44,-11,-38,-7C-42,-7,-45,-8,-48,-10C-48,-10,-48,-10,-48,-10C-48,1,-41,9,-31,11C-33,12,-35,12,-37,12C-38,12,-39,12,-41,12C-38,20,-30,26,-21,26C-28,32,-37,36,-47,36C-49,36,-51,36,-52,35C-43,41,-31,45,-19,45C20,45,42,12,42,-16C42,-17,42,-18,42,-19C46,-22,49,-26,52,-30Z'),\r\n    undo: draw('M3,-20C-11,-20,-23,-15,-32,-7L-50,-25V20H-5L-23,2C-16,-4,-7,-7,3,-7C20,-7,35,4,41,20L52,16C45,-5,26,-20,3,-20Z'),\r\n    up: draw('M-30,30L0,-30,30,30'),\r\n    'up-double': draw('M-30,40L0,10,30,40M-30,-10L0,-40,30,-10'),\r\n    user: draw(\r\n        'M0,-40A20,20,0,0,1,20,-20A20,20,0,0,1,0,0A20,20,0,0,1,-20,-20A20,20,0,0,1,0,-40M0,10C22,10,40,19,40,30V40H-40V30C-40,19,-22,10,0,10Z'\r\n    ),\r\n    wait: draw('M0,-5A5,5,0,0,0,-5,0A5,5,0,0,0,0,5A5,5,0,0,0,5,0A5,5,0,0,0,0,-5M3,-50C25,-50,26,-32,14,-26C9,-24,7,-19,6,-14C8,-13,10,-11,12,-9C30,-19,50,-15,50,3C50,25,32,26,26,14C24,9,19,7,14,6C13,8,11,10,9,12C19,30,15,50,-2,50C-25,50,-25,32,-14,26C-9,24,-7,19,-6,14C-8,13,-10,11,-12,9C-30,19,-50,15,-50,-2C-50,-25,-32,-26,-26,-14C-24,-9,-19,-7,-14,-6C-13,-8,-11,-10,-9,-12C-19,-30,-15,-50,3,-50Z'),\r\n    \"zoom-in\": draw('M18,10L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18M-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10M0,-10H-10V0H-15V-10H-25V-15H-15V-25H-10V-15H0V-10Z'),\r\n    \"zoom-out\": draw('M18,10H14L12,9C17,3,20,-4,20,-12A33,33,0,0,0,-12,-45A33,33,0,0,0,-45,-12A33,33,0,0,0,-12,20C-4,20,3,17,9,12L10,14V18L35,43L43,35L18,10M-12,10C-25,10,-35,0,-35,-12C-35,-25,-25,-35,-12,-35C0,-35,10,-25,10,-12C10,0,0,10,-12,10M-25,-15H0V-10H-25V-15Z'),\r\n    warning: draw('M0,-50L-55,45H55M0,-30L38,35H-38M-5,-10V10H5V-10M-5,20V30H5V20')\r\n};\r\n\r\n\r\n// Synonyms.\r\nconst synonyms: { [name: string]: string } = {\r\n    add: \"plus\",\r\n    back: \"left\",\r\n    help: \"question\",\r\n    save: \"export\"\r\n};\r\nfor (const key of Object.keys(synonyms)) {\r\n    const val: string = synonyms[key];\r\n    iconsBook[key] = iconsBook[val];\r\n}\r\n","\"use strict\";\r\n\r\nimport * as React from \"react\";\r\nimport castBoolean from \"../converter/boolean\";\r\nimport castInteger from \"../converter/integer\";\r\nimport castUnit from \"../converter/unit\";\r\nimport { iconsBook, TIconDefinition } from \"../icons\";\r\nimport \"./icon.css\";\r\n\r\nenum EnumPenColor { B, W, P, PD, PL, S, SD, SL }\r\n\r\ninterface IIconProps {\r\n    visible?: boolean;\r\n    content?: string | TIconDefinition;\r\n    size?: string | number;\r\n    animate?: boolean;\r\n    flipH?: boolean;\r\n    flipV?: boolean;\r\n    rotate?: number;\r\n    pen0?: EnumPenColor | string;\r\n    pen1?: EnumPenColor | string;\r\n    pen2?: EnumPenColor | string;\r\n    pen3?: EnumPenColor | string;\r\n    pen4?: EnumPenColor | string;\r\n    pen5?: EnumPenColor | string;\r\n    pen6?: EnumPenColor | string;\r\n    pen7?: EnumPenColor | string;\r\n    onClick?: () => void;\r\n    onHide?: () => void;\r\n}\r\n\r\nexport default class Icon extends React.Component<IIconProps, {}> {\r\n    static isValidIconName(name: string): boolean {\r\n        return typeof iconsBook[name] !== 'undefined';\r\n    }\r\n\r\n    static getAllIconNames(): string[] {\r\n        return Object.keys(iconsBook).sort();\r\n    }\r\n\r\n    private refIcon: any;\r\n    private visible: boolean;\r\n    private timeoutHandle: number;\r\n\r\n    constructor(props: IIconProps) {\r\n        super(props);\r\n        this.refIcon = React.createRef();\r\n        this.visible = false;\r\n        this.timeoutHandle = 0;\r\n    }\r\n\r\n    triggerVisibleAnimation() {\r\n        const\r\n            elemIcon = this.refIcon.current,\r\n            visible = this.visible;\r\n        if( !elemIcon ) return;\r\n        if (this.timeoutHandle) {\r\n            window.clearTimeout(this.timeoutHandle);\r\n            this.timeoutHandle = 0;\r\n        }\r\n        requestAnimationFrame(() => {\r\n            if (visible) elemIcon.classList.remove(\"zero\");\r\n            else {\r\n                elemIcon.classList.add(\"zero\");\r\n                const slot = this.props.onHide;\r\n                if (typeof slot === 'function') {\r\n                    this.timeoutHandle = window.setTimeout(slot, 300);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const\r\n            p = this.props,\r\n            visible = castBoolean(p.visible, true),\r\n            animate = castBoolean(p.animate, false),\r\n            flipH = castBoolean(p.flipH, false),\r\n            flipV = castBoolean(p.flipV, false),\r\n            size = castUnit(p.size, \"28px\"),\r\n            content = castContent(p.content),\r\n            rotate = castInteger(p.rotate, 0),\r\n            onClick = p.onClick,\r\n            classes = [\"tfw-view-icon\"];\r\n        const svgContent = createSvgContent(content, p);\r\n        if (!svgContent) return null;\r\n\r\n        if (animate) classes.push(\"animate\");\r\n        if (visible) classes.push(\"zero\");\r\n        if (typeof onClick === 'function') classes.push(\"active\");\r\n\r\n        let transform = \"\";\r\n        if (rotate !== 0) {\r\n            transform += `rotate(${rotate}deg) `;\r\n        }\r\n        if (flipH || flipV) {\r\n            transform += `scale(${flipH ? -1 : 1},${flipV ? -1 : 1})`;\r\n        }\r\n        const style: React.CSSProperties = { width: size, height: size };\r\n        if (transform.length > 0) style.transform = transform;\r\n\r\n        requestAnimationFrame(() => this.triggerVisibleAnimation());\r\n        this.visible = visible;\r\n\r\n        return (\r\n            <svg className={classes.join(\" \")}\r\n                ref={this.refIcon}\r\n                viewBox=\"-65 -65 130 130\"\r\n                preserveAspectRatio=\"xMidYMid\"\r\n                width={size}\r\n                height={size}\r\n                onClick={onClick}\r\n                style={style}>\r\n                {svgContent}\r\n                < g strokeWidth=\"6\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\" >\r\n                    {createSvgContent(content, p)}\r\n                </g>\r\n            </svg>\r\n        );\r\n    }\r\n}\r\n\r\nfunction createSvgContent(def: TIconDefinition, props: IIconProps, key: string = \"\"): any {\r\n    const\r\n        elementName = def[0],\r\n        { attributes, children } = parseDef(def);\r\n\r\n    if (typeof elementName === 'undefined') return <g></g>;\r\n\r\n    const attribs: React.Attributes = manageColors({ ...attributes }, props);\r\n    if (key.length > 0) attributes.key = key;\r\n\r\n    return React.createElement(\r\n        elementName,\r\n        attribs,\r\n        children.map((child, index) => createSvgContent(child, props, `${index}`))\r\n    ) as React.ReactSVGElement;\r\n}\r\n\r\nconst CLASSES = [\"P\", \"PL\", \"PD\", \"S\", \"SL\", \"SD\"];\r\nconst PENS = \"01234567\";\r\n\r\n/**\r\n * If the value of the attribute \"fill\" is an element of CLASSES,\r\n * it will be removed and replace with a class.\r\n * Same thing for the attibute \"stroke\".\r\n *\r\n * @example\r\n * manageColors({ fill: \"1\" }) === { className: \"thn-svg-fill-1\" }\r\n *\r\n * @param   attribs [description]\r\n * @param   props   [description]\r\n * @returns         [description]\r\n */\r\nfunction manageColors(attribs: { [key: string]: any }, props: IIconProps) {\r\n    // @TODO For special forms of \"fill\" and \"stroke\", add classes.\r\n    const classes = (attribs.className || \"\").split(\" \");\r\n\r\n    [\"fill\", \"stroke\"].forEach(attribName => {\r\n        const attribValue = `${attribs[attribName]}`;\r\n        if (typeof attribValue === 'undefined') return;\r\n        if (attribValue === 'undefined') return;\r\n        const key = `${attribValue}`.toUpperCase();\r\n        if (CLASSES.indexOf(key) === -1 && PENS.indexOf(key) === -1) return;\r\n        if (PENS.indexOf(attribValue) !== -1 ) {\r\n            // If we find fill=\"3\", then we must look for property pen3.\r\n            const pen = props[`pen${attribValue}`];\r\n            if( typeof pen === 'string' ) {\r\n                if( CLASSES.indexOf(pen) === -1 ) {\r\n                    attribs[attribName] = pen;\r\n                } else {\r\n                    delete attribs[attribName];\r\n                    classes.push(`thm-svg-${attribName}${pen}`);\r\n                }\r\n                return;\r\n            }\r\n        }\r\n        delete attribs[attribName];\r\n        classes.push(`thm-svg-${attribName}${key}`);\r\n    });\r\n\r\n    attribs.className = classes.join(\" \").trim();\r\n    return attribs;\r\n}\r\n\r\nfunction parseDef([name, arg1, arg2]: TIconDefinition) {\r\n    let attributes: undefined | {},\r\n        children: undefined | any[];\r\n\r\n    if (Array.isArray(arg1)) children = arg1;\r\n    else if (typeof arg1 !== 'undefined') attributes = arg1;\r\n    if (Array.isArray(arg2)) children = arg2;\r\n    else if (typeof arg2 !== 'undefined') attributes = arg2;\r\n\r\n    if (typeof attributes === 'undefined') attributes = {};\r\n    if (typeof children === 'undefined') children = [];\r\n\r\n    return { attributes, children };\r\n}\r\n\r\nfunction castContent(content: string | TIconDefinition = \"ok\"): TIconDefinition {\r\n    if (Array.isArray(content)) return content;\r\n    return iconsBook[content] || [];\r\n}\r\n","export default function castString(value: any, defaultValue: string): string {\r\n    const t = typeof value;\r\n    if (t === 'number' && !isNaN(value)) {\r\n        return `${value}`;\r\n    }\r\n    if (t === 'string') return value;\r\n    return defaultValue;\r\n}\r\n","import * as React from \"react\"\nimport castString from \"../converter/string\"\nimport castBoolean from \"../converter/boolean\"\nimport castStringArray from \"../converter/string-array\"\nimport \"./flex.css\"\n\ninterface IFlexProp {\n    wide?: boolean;\n    classes?: string[] | string;\n    dir?: \"row\" | \"row-reverse\" | \"column\" | \"column-reverse\" | \"wide\" | \"narrow\";\n    wrap?: \"nowrap\" | \"wrap\" | \"wrap-reverse\";\n    justifyContent?: \"flex-start\" | \"flex-end\" | \"center\" | \"space-around\" | \"space-between\" | \"space-evenly\";\n    alignItems?: \"stretch\" | \"flex-start\" | \"flex-end\" | \"center\";\n    children: React.ReactElement<any>[] | React.ReactElement<any>;\n}\n\nexport default class Flex extends React.Component<IFlexProp, {}> {\n    render() {\n        const p = this.props;\n        const wide = castBoolean(p.wide, true);\n        const dir = castString(p.dir, \"row\");\n        const style: React.CSSProperties = {\n            justifyContent: castString(p.justifyContent, \"space-around\"),\n            alignItems: castString(p.alignItems, \"center\"),\n            flexWrap: castString(p.wrap, \"wrap\")\n        };\n        const classes = [\"tfw-view-flex\", `dir-${dir}`];\n        classes.push(...castStringArray(p.classes));\n\n        if (wide) classes.push(\"wide\");\n\n        return (\n            <div className={classes.join(\" \")} style={style}>{\n                p.children\n            }</div>\n        )\n    }\n}\n","import castString from \"./string\";\n\n/**\n * If `value` is not an array, return `defaultArray`.\n * Else if `defaultString` is undefined, return `value`.\n * Else return a copy of `value` with a castString on all its elements.\n *\n * @param   value         [description]\n * @param   defaultArray  [description]\n * @param   defaultString [description]\n * @returns               [description]\n */\nexport default function castStringArray(\n    value: any, defaultArray: string[] = [], defaultString: string = \"\"\n) {\n    if (typeof value === 'string') return [value];\n    if (!Array.isArray(value)) return defaultArray;\n    if (typeof defaultString === 'undefined') return value;\n    return value.map(item => castString(item, defaultString));\n}\n","/**\r\n * The ESCAPE key is often used to close a dialog, collapse a combo list, ...\r\n * This module helps you nesting closable things.\r\n *\r\n * @example\r\n * import * from EscapeHandler from \"./tfw/escape-handler\"\r\n * EscapeHandler.add(() => myDialog.close());\r\n * EscapeHandler.fire();\r\n */\r\n\r\nexport default {add, fire};\r\n\r\ntype THandler = ()=>void;\r\n\r\nlet handlers:THandler[] = [];\r\nlet initialized = false;\r\n\r\nexport function add(listener: THandler) {\r\n    if( !initialized) {\r\n        initialized = true;\r\n        addKeyboardListener();\r\n    }\r\n\r\n    handlers.push(listener);\r\n}\r\n\r\nexport function fire() {\r\n    if( handlers.length === 0 ) return;\r\n    const handler = handlers.pop();\r\n    if (typeof handler === 'function') handler();\r\n}\r\n\r\nfunction addKeyboardListener() {\r\n    document.addEventListener(\"keydown\", evt => {\r\n        if( evt.key !== 'Escape') return;\r\n        fire();\r\n    }, true);\r\n}\r\n","const CAPACITY = 3;\r\n\r\n/**\r\n * Helper to manage a pointer move.\r\n * It gives you the location, the speed and the acceleration of your pointer.\r\n *\r\n * @type {[type]}\r\n */\r\nexport default class Moves {\r\n    private _x0: number;\r\n    private _y0: number;\r\n    private _time0: number;\r\n    private _x: number[] = new Array(CAPACITY);\r\n    private _y: number[] = new Array(CAPACITY);\r\n    private _time: number[] = new Array(CAPACITY);\r\n    private _cursor: number = 0;\r\n\r\n    constructor(x: number = 0, y: number = 0) {\r\n        this.init(x, y);\r\n    }\r\n\r\n    init(x: number, y: number) {\r\n        this._time0 = this.now;\r\n        this._x0 = x;\r\n        this._y0 = y;\r\n        this._x = this._x.fill(this._x0, 0, CAPACITY);\r\n        this._y = this._y.fill(this._y0, 0, CAPACITY);\r\n        this._time = this._time.fill(this._time0, 0, CAPACITY);\r\n    }\r\n\r\n    _index(shift: number) {\r\n        return (this._cursor + shift) % CAPACITY;\r\n    }\r\n\r\n    get now() { return Date.now(); }\r\n\r\n    add(x: number, y: number) {\r\n        const idx = (this._cursor + CAPACITY - 1) % CAPACITY;\r\n        this._time[idx] = this.now;\r\n        this._x[idx] = x;\r\n        this._y[idx] = y;\r\n        this._cursor = idx;\r\n    }\r\n\r\n    get elapsedTime() { return this.now - this._time0; }\r\n\r\n    get x() { return this._x[this._cursor]; }\r\n    get y() { return this._y[this._cursor]; }\r\n\r\n    get startX() { return this._x0; }\r\n    get startY() { return this._y0; }\r\n\r\n    get speedX() {\r\n        const idx0 = this._cursor;\r\n        const idx1 = this._index(1);\r\n        const time = this._time[idx0] - this._time[idx1];\r\n        if (time <= 0) return 0;\r\n        return (this._x[idx0] - this._x[idx1]) / time;\r\n    }\r\n\r\n    get speedY() {\r\n        const idx0 = this._cursor;\r\n        const idx1 = this._index(1);\r\n        const time = this._time[idx0] - this._time[idx1];\r\n        if (time <= 0) return 0;\r\n        return (this._y[idx0] - this._y[idx1]) / time;\r\n    }\r\n\r\n    get accelX() {\r\n        const idx0 = this._index(0);\r\n        const time0 = this._time[idx0];\r\n\r\n        const idx1 = this._index(1);\r\n        const time1 = this._time[idx1];\r\n\r\n        const time01 = time0 - time1;\r\n\r\n        if (time01 <= 0) return 0;\r\n\r\n        const idx2 = this._index(2);\r\n        const time2 = this._time[idx2];\r\n\r\n        const time12 = time1 - time2;\r\n\r\n        if (time12 <= 0) return 0;\r\n\r\n        const x0 = this._x[idx0];\r\n        const x1 = this._x[idx1];\r\n        const x2 = this._x[idx2];\r\n\r\n        const speed01 = (x0 - x1) / time01;\r\n        const speed12 = (x1 - x2) / time12;\r\n\r\n        return (speed01 - speed12) / time01;\r\n    }\r\n\r\n    get accelY() {\r\n        const idx0 = this._index(0);\r\n        const time0 = this._time[idx0];\r\n\r\n        const idx1 = this._index(1);\r\n        const time1 = this._time[idx1];\r\n\r\n        const time01 = time0 - time1;\r\n\r\n        if (time01 <= 0) return 0;\r\n\r\n        const idx2 = this._index(2);\r\n        const time2 = this._time[idx2];\r\n\r\n        const time12 = time1 - time2;\r\n\r\n        if (time12 <= 0) return 0;\r\n\r\n        const y0 = this._y[idx0];\r\n        const y1 = this._y[idx1];\r\n        const y2 = this._y[idx2];\r\n\r\n        const speed01 = (y0 - y1) / time01;\r\n        const speed12 = (y1 - y2) / time12;\r\n\r\n        return (speed01 - speed12) / time01;\r\n    }\r\n}\r\n","type TIdentifier = number | null;\r\n\r\nexport default class Finger {\r\n    private fingers: TIdentifier[] = [];\r\n\r\n    getIndex(identifier: number): number {\r\n        const index = this.fingers.indexOf(identifier);\r\n        if (index !== -1) return index;\r\n        const indexOfFirstNull = this.fingers.indexOf(null);\r\n        if (indexOfFirstNull !== -1) {\r\n            this.fingers[indexOfFirstNull] = identifier;\r\n            return indexOfFirstNull;\r\n        }\r\n        this.fingers.push(identifier);\r\n        return this.fingers.length - 1;\r\n    }\r\n\r\n    remove(identifier: number) {\r\n        const index = this.fingers.indexOf(identifier);\r\n        if (index !== -1) this.fingers[index] = null;\r\n    }\r\n}\r\n","/**\r\n * BasicHandler(\r\n *     element: HTMLElement,\r\n *     handleDown: TBasicHandler,\r\n *     handleUp: TBasicHandler,\r\n *     handleMove: TBasicHandler\r\n * )\r\n *\r\n * Deals with three basic events : DOWN, UP and MOVE.\r\n * If the device has several input pointers, we will return\r\n * only one event.\r\n *\r\n * A TBasicHandler is a synthetic event object:\r\n *   - x: X coordinate relative to the viewport, not including any scroll offset.\r\n *   - y: Y coordinate relative to the viewport, not including any scroll offset.\r\n *   - startX\r\n *   - startY\r\n *   - index: For multi-touch system. The first one is 0, the second is 1, etc.\r\n *   - buttons: 1 = left, 2 = right.\r\n *   - pointer: \"mouse\" | \"touch\" | \"pen\".\r\n *   - clear(): Call stopPropagation() and preventDefault() on this event.\r\n *\r\n */\r\nimport Finger from \"./finger\"\r\nimport { IBasicEvent } from \"./basic-handler.types\"\r\n\r\ntype TTouchEventHandler = (evt: TouchEvent) => void;\r\n\r\ntype TMouseEventHandler = (evt: MouseEvent) => void;\r\n\r\ntype TBasicHandler = (evt: IBasicEvent) => void | undefined;\r\n\r\ninterface IDeviceHandlers {\r\n    touchstart?: TTouchEventHandler;\r\n    touchend?: TTouchEventHandler;\r\n    touchmove?: TTouchEventHandler;\r\n    mousedown?: TMouseEventHandler;\r\n    mouseup?: TMouseEventHandler;\r\n    mousemove?: TMouseEventHandler;\r\n}\r\n\r\nexport default class BasicHandler {\r\n    readonly element: HTMLElement;\r\n    pointerType: string = \"\";\r\n    pointerTypeTime: number = 0;\r\n    deviceHandlers: IDeviceHandlers = {};\r\n    fingers: Finger = new Finger();\r\n\r\n    constructor(element: HTMLElement,\r\n        handleDown: TBasicHandler,\r\n        handleUp: TBasicHandler,\r\n        handleMove: TBasicHandler) {\r\n        this.element = element;\r\n        attachDownEvent.call(this, handleDown);\r\n        attachUpEvent.call(this, handleUp);\r\n        attachMoveEvent.call(this, handleMove);\r\n    }\r\n\r\n    /**\r\n     * If you device can hold mouse and touch events, you will receive two events.\r\n     * This function prevent it.\r\n     *\r\n     * @param   pointerType\r\n     * @returns If `false`, we must ignore this event.\r\n     */\r\n    checkPointerType(pointerType: string): boolean {\r\n        const now = Date.now();\r\n        const delay = now - this.pointerTypeTime;\r\n        this.pointerTypeTime = now;\r\n        if (this.pointerType.length === 0 || delay > 500) {\r\n            // If the user wat more than 500ms, he can change of pointer.\r\n            this.pointerType = pointerType;\r\n            return true;\r\n        }\r\n        return this.pointerType === pointerType;\r\n    }\r\n\r\n    detachEvents() {\r\n        const element = this.element;\r\n        const {\r\n            touchstart, touchend, touchmove, mousedown, mouseup, mousemove\r\n        } = this.deviceHandlers;\r\n\r\n        if (touchstart) element.removeEventListener(\"touchstart\", touchstart, false);\r\n        if (touchend) element.removeEventListener(\"touchend\", touchend, false);\r\n        if (touchmove) element.removeEventListener(\"touchmove\", touchmove, false);\r\n        if (mousedown) element.removeEventListener(\"mousedown\", mousedown, false);\r\n        if (mouseup) element.removeEventListener(\"mouseup\", mouseup, false);\r\n        if (mousemove) element.removeEventListener(\"mousemove\", mousemove, false);\r\n    }\r\n}\r\n\r\n\r\nfunction attachDownEvent(this: BasicHandler, handleDown: TBasicHandler) {\r\n    attachDownEventTouch.call(this, handleDown);\r\n    attachDownEventMouse.call(this, handleDown);\r\n}\r\n\r\n\r\nfunction attachDownEventTouch(this: BasicHandler, handleDown: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (evt: TouchEvent) => {\r\n        if (!this.checkPointerType(\"touch\")) return;\r\n        for (const touch of evt.changedTouches) {\r\n            handleDown({\r\n                x: touch.clientX,\r\n                y: touch.clientY,\r\n                index: this.fingers.getIndex(touch.identifier),\r\n                buttons: 1,\r\n                pointer: \"touch\",\r\n                clear: createClear(evt)\r\n            });\r\n        }\r\n    };\r\n    deviceHandlers.touchstart = handler;\r\n    element.addEventListener(\"touchstart\", handler, false);\r\n}\r\n\r\n\r\nfunction attachDownEventMouse(this: BasicHandler, handleDown: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (evt: MouseEvent) => {\r\n        if (!this.checkPointerType(\"mouse\")) return;\r\n        handleDown({\r\n            x: evt.clientX,\r\n            y: evt.clientY,\r\n            index: 0,\r\n            buttons: evt.buttons,\r\n            pointer: \"mouse\",\r\n            clear: createClear(evt)\r\n        });\r\n    };\r\n    deviceHandlers.mousedown = handler;\r\n    element.addEventListener(\"mousedown\", handler, false);\r\n}\r\n\r\n\r\nfunction attachUpEvent(this: BasicHandler, handleUp: TBasicHandler) {\r\n    attachUpEventTouch.call(this, handleUp);\r\n    attachUpEventMouse.call(this, handleUp);\r\n}\r\n\r\n\r\nfunction attachUpEventTouch(this: BasicHandler, handleUp: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (evt: TouchEvent) => {\r\n        if (!this.checkPointerType(\"touch\")) return;\r\n        for (const touch of evt.changedTouches) {\r\n            handleUp({\r\n                x: touch.clientX,\r\n                y: touch.clientY,\r\n                index: this.fingers.getIndex(touch.identifier),\r\n                buttons: 1,\r\n                pointer: \"touch\",\r\n                clear: createClear(evt)\r\n            });\r\n            this.fingers.remove(touch.identifier)\r\n        }\r\n    };\r\n    deviceHandlers.touchend = handler;\r\n    element.addEventListener(\"touchend\", handler, false);\r\n}\r\n\r\n\r\nfunction attachUpEventMouse(this: BasicHandler, handleUp: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (evt: MouseEvent) => {\r\n        if (!this.checkPointerType(\"mouse\")) return;\r\n        handleUp({\r\n            x: evt.clientX,\r\n            y: evt.clientY,\r\n            index: 0,\r\n            buttons: evt.buttons,\r\n            pointer: \"mouse\",\r\n            clear: createClear(evt)\r\n        });\r\n    };\r\n    deviceHandlers.mouseup = handler;\r\n    element.addEventListener(\"mouseup\", handler, false);\r\n}\r\n\r\n\r\n\r\n\r\nfunction attachMoveEvent(this: BasicHandler, handleMove: TBasicHandler) {\r\n    attachMoveEventTouch.call(this, handleMove);\r\n    attachMoveEventMouse.call(this, handleMove);\r\n}\r\n\r\n\r\nfunction attachMoveEventTouch(this: BasicHandler, handleMove: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (evt: TouchEvent) => {\r\n        if (!this.checkPointerType(\"touch\")) return;\r\n        for (const touch of evt.changedTouches) {\r\n            handleMove({\r\n                x: touch.clientX,\r\n                y: touch.clientY,\r\n                index: this.fingers.getIndex(touch.identifier),\r\n                buttons: 1,\r\n                pointer: \"touch\",\r\n                clear: createClear(evt)\r\n            });\r\n            this.fingers.remove(touch.identifier)\r\n        }\r\n    };\r\n    deviceHandlers.touchmove = handler;\r\n    element.addEventListener(\"touchmove\", handler, false);\r\n}\r\n\r\n\r\nfunction attachMoveEventMouse(this: BasicHandler, handleMove: TBasicHandler) {\r\n    const { element, deviceHandlers } = this;\r\n    const handler = (evt: MouseEvent) => {\r\n        if (!this.checkPointerType(\"mouse\")) return;\r\n        handleMove({\r\n            x: evt.clientX,\r\n            y: evt.clientY,\r\n            index: 0,\r\n            buttons: evt.buttons,\r\n            pointer: \"mouse\",\r\n            clear: createClear(evt)\r\n        });\r\n    };\r\n    deviceHandlers.mousemove = handler;\r\n    element.addEventListener(\"mousemove\", handler, false);\r\n}\r\n\r\n\r\nfunction createClear(evt: MouseEvent | TouchEvent) {\r\n    return () => {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n    }\r\n}\r\n","/**\n * Here is the list of all parameters used if all the handlers.\n *\n * tap({ x: number, y: number, index: number })\n *\n */\n\nimport Moves from \"./moves\"\nimport BasicHandler from \"./basic-handler\"\nimport { IBasicEvent } from \"./basic-handler.types\"\n\nconst SYMBOL = Symbol(\"gesture\");\n\ninterface IHTMLElementWithGesture extends HTMLElement {\n    // A special attribute to attach Gesture object.\n    [SYMBOL]?: Gesture\n}\n\nlet ID = 0;\n\ntype THandlers = {\n    tap?: (event: IEvent) => void;\n    down?: (event: IEvent) => void;\n    up?: (event: IEvent) => void;\n    pan?: (event: IEvent) => void;\n    pandown?: (event: IEvent) => void;\n    panup?: (event: IEvent) => void;\n    panvertical?: (event: IEvent) => void;\n    swipe?: (event: IEvent) => void;\n    swipedown?: (event: IEvent) => void;\n    swipeup?: (event: IEvent) => void;\n    swipevertical?: (event: IEvent) => void;\n    swipeleft?: (event: IEvent) => void;\n    keydown?: (event: KeyboardEvent) => void;\n    keyup?: (event: KeyboardEvent) => void;\n    [key: string]: ((evt: any) => void) | undefined;\n};\n\ninterface IEvent extends IBasicEvent {\n    preventDefault?: () => void;\n    stopPropagation?: () => void;\n    target: IHTMLElementWithGesture;\n    x: number;\n    y: number;\n}\n/*\ninterface IInternalEvent {\n    x?: number;\n    y?: number;\n    event: PointerEvent;\n}\n*/\ninterface IPointer {\n    isDown: boolean;\n    moves: Moves;\n    rect: {\n        left: number;\n        top: number;\n        width: number;\n        height: number;\n    };\n    type?: string | null;\n    time?: number;\n    id?: number;\n}\n\nconst STANDARD_EVENTS = [\"keydown\", \"keyup\"];\n\nclass Gesture {\n    //private readonly basicHandler: BasicHandler;\n    private handlers: THandlers;\n    private element: IHTMLElementWithGesture;\n    private readonly pointers: IPointer[];\n    private readonly id: number;\n\n    constructor(elem: IHTMLElementWithGesture) {\n        elem[SYMBOL] = this;\n        this.id = ID++;\n        this.element = elem;\n        this.handlers = {};\n        new BasicHandler(\n            elem,\n            this.handleDown.bind(this),\n            this.handleUp.bind(this),\n            this.handleMove.bind(this)\n        );\n        this.pointers = new Array(3);\n    }\n\n    get identifier() { return this.id; }\n\n    on(handlers: THandlers) {\n        this.handlers = Object.assign(this.handlers, handlers);\n        Object.keys(this.handlers).forEach(eventName => {\n            if (STANDARD_EVENTS.indexOf(eventName) === -1) return;\n            // This is a non-pointer event. (i.e., keyboard, resize, ...)\n            const handler = this.handlers[eventName];\n            if (typeof handler === 'function' ) {\n                this.element.addEventListener(eventName, handler, false);\n            }\n        });\n    }\n\n    /**\n     * Returns true if current gesture has at least one of the provided handlers.\n     */\n    private hasHandlerFor(...names: string[]) {\n        for( const name of names ) {\n            if (this.handlers[name]) return true;\n        }\n        return false;\n    }\n\n    private getPointer(index: number) {\n        const pointers = this.pointers;\n        if (typeof pointers[index] === 'undefined') {\n            pointers[index] = {\n                isDown: false,\n                moves: new Moves(0, 0),\n                rect: { left: 0, top: 0, width: 0, height: 0 }\n            }\n        }\n        return pointers[index];\n    }\n\n    private handleDown(event: IBasicEvent) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const { element } = this;\n        const ptr = this.getPointer(event.index);\n        ptr.isDown = true;\n        ptr.rect = element.getBoundingClientRect();\n        const x = event.x - ptr.rect.left;\n        const y = event.y - ptr.rect.top;\n        ptr.moves.init(x, y);\n\n        if (this.handlers.down) {\n            this.handlers.down(Object.assign(event, { x, y, target: element }))\n        }\n    }\n\n    private handleUp(event: IBasicEvent) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const ptr = this.getPointer(event.index);\n        ptr.isDown = false;\n        const x = event.x - ptr.rect.left;\n        const y = event.y - ptr.rect.top;\n        ptr.moves.add(x, y);\n\n        if (this.handlers.up) {\n            this.handlers.up(Object.assign(event, { x, y, target: this.element }));\n        }\n        this.recognizeTap(event, ptr);\n        this.recognizeSwipe(event, ptr);\n    }\n\n    private handleMove(event: IBasicEvent) {\n        // We want not deal with more than 3 simultaneous touches.\n        if (event.index > 2) return;\n\n        const ptr = this.getPointer(event.index);\n        const x = event.x - ptr.rect.left;\n        const y = event.y - ptr.rect.top;\n        ptr.moves.add(x, y);\n        this.recognizePan(event, ptr);\n    }\n\n    private recognizeTap(evt: IBasicEvent, ptr: IPointer) {\n        // A tap is recognized only if there is less than 400ms\n        // between down and up, and if the pointer has not moves more\n        // than 16px.\n        if (!this.handlers.tap || ptr.moves.elapsedTime > 400) return;\n        const moves = ptr.moves;\n        const dx = Math.abs(moves.x - moves.startX);\n        if (dx > 16) return;\n        const dy = Math.abs(moves.y - moves.startY);\n        if (dy > 16) return;\n\n        evt.clear();\n        this.handlers.tap(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n    }\n\n    private recognizePan(evt: IBasicEvent, ptr: IPointer) {\n        if (!ptr.isDown) return;\n        this.recognizePanDown(evt, ptr);\n        this.recognizePanUp(evt, ptr);\n        if (this.handlers.pan) {\n            const { x, y, startX, startY } = ptr.moves;\n            this.handlers.pan(Object.assign(evt, { x, y, startX, startY, target: this.element }));\n        }\n    }\n\n    private recognizePanDown(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"pandown\", \"panvertical\")) return;\n\n        // Check that we are panning down.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n\n        if (this.handlers.pandown) {\n            this.handlers.pandown(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n        }\n        if (this.handlers.panvertical) {\n            this.handlers.panvertical(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n        }\n    }\n\n    private recognizePanUp(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"panup\", \"panvertical\")) return;\n\n        // Check that we are panning up.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = -moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.startY - moves.y;\n        if (dy < dx) return;\n\n        if (this.handlers.panup) {\n            this.handlers.panup(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n        }\n        if (this.handlers.panvertical) {\n            this.handlers.panvertical(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n        }\n    }\n\n    private recognizeSwipe(evt: IBasicEvent, ptr: IPointer) {\n        this.recognizeSwipeDown(evt, ptr);\n        this.recognizeSwipeUp(evt, ptr);\n        this.recognizeSwipeLeft(evt, ptr);\n        if (this.handlers.swipe) {\n            const { x, y, startX, startY } = ptr.moves;\n            this.handlers.swipe(Object.assign(evt, { x, y, startX, startY, target: this.element }));\n        }\n    }\n\n    private recognizeSwipeDown(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipedown\", \"swipevertical\")) return;\n\n        // Check that we are panning down.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dy / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.handlers.swipedown) {\n            this.handlers.swipedown(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n        }\n        if (this.handlers.swipevertical) {\n            this.handlers.swipevertical(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n        }\n    }\n\n    private recognizeSwipeUp(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipeup\", \"swipevertical\")) return;\n\n        // Check that we are panning up.\n        const moves = ptr.moves;\n        const sx = Math.abs(moves.speedX);\n        const sy = moves.speedY;\n        if (sy < sx) return;\n        // Check that the final point is beneath the initial one.\n        const dx = Math.abs(moves.x - moves.startX);\n        const dy = moves.y - moves.startY;\n        if (dy < dx) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dy / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.handlers.swipeup) {\n            this.handlers.swipeup(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n        }\n        if (this.handlers.swipevertical) {\n            this.handlers.swipevertical(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n        }\n    }\n\n    private recognizeSwipeLeft(evt: IBasicEvent, ptr: IPointer) {\n        if (!this.hasHandlerFor(\"swipeleft\", \"swipehorizontal\")) return;\n\n        // Check that we are panning left.\n        const moves = ptr.moves;\n        const sx = -moves.speedX;\n        const sy = Math.abs(moves.speedY);\n        if (sx < sy) return;\n        // Check that the final point is beneath the initial one.\n        const dx = moves.startX - moves.x;\n        const dy = Math.abs(moves.y - moves.startY);\n        if (dx < dy) return;\n        // Minimal speed for swipe: 100 pixels/second.\n        const speed = dx / moves.elapsedTime;\n        if (speed < 0.1) return;\n        if (this.handlers.swipeleft) {\n            this.handlers.swipeleft(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n        }\n        if (this.handlers.swipehorizontal) {\n            this.handlers.swipehorizontal(Object.assign(evt, { x: moves.x, y: moves.y, target: this.element }));\n        }\n    }\n}\n\nexport default function(elem: IHTMLElementWithGesture): Gesture {\n    let gesture = elem[SYMBOL];\n    if( gesture ) return gesture;\n    gesture = new Gesture(elem);\n    elem[SYMBOL] = gesture;\n    return gesture;\n}\n","/**\r\n * @class Color\r\n * Fast color manipulations.\r\n * Attributes R  (red), G  (green), B  (blue), A  (alpha), H  (hue), S\r\n * (saturation), and L (luminance) are all floats between 0 and 1.\r\n */\r\nexport default class Color {\r\n    public R: number;\r\n    public G: number;\r\n    public B: number;\r\n    public H: number;\r\n    public S: number;\r\n    public L: number;\r\n    public A: number;\r\n\r\n    constructor(codeCSS: string = \"#000000\") {\r\n        this.R = 0;\r\n        this.G = 0;\r\n        this.B = 0;\r\n        this.H = 0;\r\n        this.S = 0;\r\n        this.L = 0;\r\n        this.A = 1;\r\n\r\n        this.parse(codeCSS);\r\n    }\r\n\r\n    static isValid(codeCSS: string) {\r\n        if( typeof codeCSS !== 'string' ) return false;\r\n        if( codeCSS.charAt(0) !== '#' ) return false;\r\n        switch( codeCSS.length ) {\r\n            case 4:  // #RGB\r\n            case 5:  // #RGBA\r\n            case 7:  // #RRGGBB\r\n            case 9:  // #RRGGBBAA\r\n                return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    static normalize(codeCSS: string) {\r\n        const color = new Color(codeCSS);\r\n        return color.stringify();\r\n    }\r\n\r\n    static luminance(codeCSS: string) {\r\n        const color = new Color(codeCSS);\r\n        return color.luminance();\r\n    }\r\n\r\n    /**\r\n     * Returns 1 for bright colors and 0 for dark colors.\r\n     */\r\n    static luminanceStep(codeCSS: string) {\r\n        const color = new Color(codeCSS);\r\n        return color.luminanceStep();\r\n    }\r\n\r\n    static mix(color1: Color, color2: Color, alpha: number=.5) {\r\n        const beta = 1 - alpha;\r\n        return Color.newRGBA(\r\n            alpha * color2.R + beta * color1.R,\r\n            alpha * color2.G + beta * color1.G,\r\n            alpha * color2.B + beta * color1.B,\r\n            alpha * color2.A + beta * color1.A\r\n        );\r\n    }\r\n\r\n    static newBlack() {\r\n        return Color.newRGB(0, 0, 0);\r\n    }\r\n\r\n    static newWhite() {\r\n        return Color.newRGB(1, 1, 1);\r\n    }\r\n\r\n    /**\r\n     * Create a new Color instance base on R,G,B channels.\r\n     *\r\n     * @param   {number} red - Value between 0 and 1.\r\n     * @param   {number} green - Value between 0 and 1.\r\n     * @param   {number} blue - Value between 0 and 1.\r\n     * @returns {Color} New instance of Color.\r\n     */\r\n    static newRGB(red: number, green: number, blue: number) {\r\n        const color = new Color();\r\n        color.R = red;\r\n        color.G = green;\r\n        color.B = blue;\r\n        color.A = 1;\r\n        return color;\r\n    }\r\n\r\n    /**\r\n     * Create a new Color instance base on R,G,B,A channels.\r\n     *\r\n     * @param   {number} red - Value between 0 and 1.\r\n     * @param   {number} green - Value between 0 and 1.\r\n     * @param   {number} blue - Value between 0 and 1.\r\n     * @param   {number} alpha - Value between 0 and 1.\r\n     * @returns {Color} New instance of Color.\r\n     */\r\n    static newRGBA(red: number, green: number, blue: number, alpha: number) {\r\n        const color = new Color();\r\n        color.R = red;\r\n        color.G = green;\r\n        color.B = blue;\r\n        color.A = alpha;\r\n        return color;\r\n    }\r\n\r\n    /**\r\n     * Parse a color writtent in CSS syntax.\r\n     *\r\n     * @param   {string} code - CSS color.\r\n     * @returns {boolean} `true` if the color has valid syntax.\r\n     */\r\n    parse(code: string = \"#000000\"): boolean {\r\n        const input = code.trim().toUpperCase();\r\n        if (this.parseHexa.call(this, input)) return true;\r\n        if (this.parseRGB.call(this, input)) return true;\r\n        if (this.parseRGBA.call(this, input)) return true;\r\n        if (this.parseHSL.call(this, input)) return true;\r\n        // @TODO parseHSLA.\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * @see https://en.wikipedia.org/wiki/Grayscale\r\n     * @this Color\r\n     * @returns {undefined}\r\n     */\r\n    luminance(): number {\r\n        return (0.2126 * this.R) + (0.7152 * this.G) + (0.0722 * this.B);\r\n    }\r\n\r\n    /**\r\n     * @returns {integer} 0 if the color is dark and 1 if it is light.\r\n     */\r\n    luminanceStep(): number {\r\n        return this.luminance() < .6 ? 0 : 1;\r\n    }\r\n\r\n    /**\r\n     * @this Color\r\n     * @returns {string} String value of the color. `#fd45a7`.\r\n     */\r\n    stringify() {\r\n        let color = hexa2(this.R * 255) + hexa2(this.G * 255) + hexa2(this.B * 255);\r\n        if (this.A < 1) {\r\n            color += hexa2(this.A * 255);\r\n        }\r\n        return `#${color}`;\r\n    }\r\n\r\n    copy() {\r\n        const newColor = new Color();\r\n        newColor.R = this.R;\r\n        newColor.G = this.G;\r\n        newColor.B = this.B;\r\n        newColor.A = this.A;\r\n        newColor.H = this.H;\r\n        newColor.S = this.S;\r\n        newColor.L = this.L;\r\n        return newColor;\r\n    }\r\n\r\n    /**\r\n         * @see https://en.wikipedia.org/wiki/HSL_and_HSV#Converting_to_RGB\r\n         * @this Color\r\n         * @returns {undefined}\r\n         */\r\n    hsl2rgb() {\r\n        const\r\n            H = 6 * this.H,\r\n            S = this.S,\r\n            L = this.L,\r\n            chroma = (1 - Math.abs(2 * L - 1)) * S,\r\n            x = chroma * (1 - Math.abs(H % 2 - 1));\r\n\r\n        let R = 0, G = 0, B = 0;\r\n\r\n        if (H < 3) {\r\n            if (H < 1) {\r\n                R = chroma; G = x; B = 0;\r\n            } else if (H < 2) {\r\n                R = x; G = chroma; B = 0;\r\n            } else {\r\n                // H == 2.\r\n                R = 0; G = chroma; B = x;\r\n            }\r\n        } else if (H < 4) {\r\n            R = 0; G = x; B = chroma;\r\n        } else if (H < 5) {\r\n            R = x; G = 0; B = chroma;\r\n        } else {\r\n            R = chroma; G = 0; B = x;\r\n        }\r\n\r\n        const shift = L - chroma * 0.5;\r\n        this.R = R + shift;\r\n        this.G = G + shift;\r\n        this.B = B + shift;\r\n    }\r\n\r\n    rgb2hsl() {\r\n        const R = this.R;\r\n        const G = this.G;\r\n        const B = this.B;\r\n\r\n        const min = Math.min(R, G, B);\r\n        const max = Math.max(R, G, B);\r\n        const delta = max - min;\r\n\r\n        this.L = 0.5 * (max + min);\r\n\r\n        if (delta < 0.000001) {\r\n            this.H = 0;\r\n            this.S = 0;\r\n        }\r\n        else {\r\n            this.S = delta / (1 - Math.abs(2 * this.L - 1));\r\n            if (max === R) {\r\n                if (G >= B) {\r\n                    this.H = INV6 * ((G - B) / delta);\r\n                } else {\r\n                    this.H = 1 - INV6 * ((B - G) / delta);\r\n                }\r\n            }\r\n            else if (max === G) {\r\n                this.H = INV6 * (2 + (B - R) / delta);\r\n            }\r\n            else {\r\n                this.H = INV6 * (4 + (R - G) / delta);\r\n            }\r\n        }\r\n    }\r\n\r\n    private parseHexa(text: string) {\r\n        if (text.charAt(0) !== '#') return false;\r\n        let R = 0, G = 0, B = 0, A = 1;\r\n\r\n        switch (text.length) {\r\n            case 4:\r\n                R = parseInt(text.charAt(1), 16) * INV15;\r\n                G = parseInt(text.charAt(2), 16) * INV15;\r\n                B = parseInt(text.charAt(3), 16) * INV15;\r\n                break;\r\n            case 5:\r\n                R = parseInt(text.charAt(1), 16) * INV15;\r\n                G = parseInt(text.charAt(2), 16) * INV15;\r\n                B = parseInt(text.charAt(3), 16) * INV15;\r\n                A = parseInt(text.charAt(4), 16) * INV15;\r\n                break;\r\n            case 7:\r\n                R = parseInt(text.substr(1, 2), 16) * INV255;\r\n                G = parseInt(text.substr(3, 2), 16) * INV255;\r\n                B = parseInt(text.substr(5, 2), 16) * INV255;\r\n                break;\r\n            case 9:\r\n                R = parseInt(text.substr(1, 2), 16) * INV255;\r\n                G = parseInt(text.substr(3, 2), 16) * INV255;\r\n                B = parseInt(text.substr(5, 2), 16) * INV255;\r\n                A = parseInt(text.substr(7, 2), 16) * INV255;\r\n                break;\r\n            default:\r\n        }\r\n\r\n        if (isNaN(R) || isNaN(G) || isNaN(B) || isNaN(A)) {\r\n            this.R = this.G = this.B = this.A = 0;\r\n        } else {\r\n            this.R = R;\r\n            this.G = G;\r\n            this.B = B;\r\n            this.A = A;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @param   {string} text - `rgb(200, 140, 50)`\r\n     * @returns {boolean} `true` if `text` is a valid `rgb()` syntax.\r\n     */\r\n    private parseRGB(text: string) {\r\n        const m = RX_RGB.exec(text);\r\n        if (!m) return false;\r\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\r\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\r\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\r\n        this.A = 1;\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @param   {string} text - `rgba(200, 140, 50, 0.5)`\r\n     * @returns {boolean} `true` if `text` is a valid `rgba()` syntax.\r\n     */\r\n    private parseRGBA(text: string) {\r\n        const m = RX_RGBA.exec(text);\r\n        if (!m) return false;\r\n        this.R = clamp01(parseInt(m[1], 10) * INV255);\r\n        this.G = clamp01(parseInt(m[2], 10) * INV255);\r\n        this.B = clamp01(parseInt(m[3], 10) * INV255);\r\n        this.A = clamp01(parseFloat(m[4]));\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @param   {string} text - `hsl(200, 140, 50)`\r\n     * @returns {boolean} `true` if `text` is a valid `hsl()` syntax.\r\n     */\r\n    private parseHSL(text: string) {\r\n        const m = RX_HSL.exec(text);\r\n        if (!m) return false;\r\n        this.H = clamp01(parseInt(m[1], 10) * INV359);\r\n        this.S = clamp01(parseInt(m[2], 10) * INV99);\r\n        this.L = clamp01(parseInt(m[3], 10) * INV99);\r\n        this.A = 1;\r\n        this.hsl2rgb();\r\n        return true;\r\n    }\r\n}\r\n\r\nconst\r\n    INV6 = 1 / 6,\r\n    INV15 = 1 / 15,\r\n    INV99 = 1 / 99,\r\n    INV255 = 1 / 255,\r\n    INV359 = 1 / 359;\r\n\r\nconst RX_RGB = /^RGB[\\s\\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\r\nconst RX_RGBA = /^RGBA[\\s\\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9\\.]+([0-9\\.]+)/;\r\nconst RX_HSL = /^HSL[\\s\\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;\r\n\r\nfunction clamp01(value: number): number {\r\n    if (value < 0) return 0;\r\n    if (value > 1) return 1;\r\n    return value;\r\n}\r\n\r\nfunction hexa2(value: number) {\r\n    let out = Math.floor(value).toString(16);\r\n    if (out.length < 2) out = \"0\" + out;\r\n    return out;\r\n}\r\n","/**\n * Manage CSS styles.\n */\nexport default {\n    register: registerTheme,\n    apply: applyTheme,\n    get: getTheme,\n    bg0: makeGetCurrentColor(\"bg0\"),\n    bg1: makeGetCurrentColor(\"bg1\"),\n    bg2: makeGetCurrentColor(\"bg2\"),\n    bg3: makeGetCurrentColor(\"bg3\"),\n    bgP: makeGetCurrentColor(\"bgP\"),\n    bgPD: makeGetCurrentColor(\"bgPD\"),\n    bgPL: makeGetCurrentColor(\"bgPL\"),\n    bgS: makeGetCurrentColor(\"bgS\"),\n    bgSD: makeGetCurrentColor(\"bgSD\"),\n    bgSL: makeGetCurrentColor(\"bgSL\"),\n    black: makeGetCurrentColor(\"black\"),\n    white: makeGetCurrentColor(\"white\"),\n    isDark,\n    setFontSize,\n    normalize: completeWithDefaultValues\n};\n\ninterface IStyle {\n    bg0?: string;\n    bg1?: string;\n    bg2?: string;\n    bg3?: string;\n    bgP?: string;\n    bgPD?: string;\n    bgPL?: string;\n    bgS?: string;\n    bgSD?: string;\n    bgSL?: string;\n    fg0?: string;\n    fg1?: string;\n    fg2?: string;\n    fg3?: string;\n    fgP?: string;\n    fgPD?: string;\n    fgPL?: string;\n    fgS?: string;\n    fgSD?: string;\n    fgSL?: string;\n    black?: string;\n    white?: string;\n    [key: string]: string | undefined;\n};\n\ninterface ITheme {\n    bg0: string,\n    bg1: string,\n    bg2: string,\n    bg3: string,\n    bgP: string,\n    bgPL: string,\n    bgPD: string,\n    bgS: string,\n    bgSL: string,\n    bgSD: string,\n    black: string,\n    white: string\n}\n\n\n//################################################################################\n\nimport \"./theme.css\"\nimport Color from \"./color\"\n\ninterface IThemes {\n    css: { [name: string]: HTMLStyleElement };\n    vars: { [name: string]: IStyle }\n    current: string | null;\n}\n\n// Used for luminance computations. Because we need to know which text color\n// can be used based on the background's luminance.\nconst COLOR = new Color();\n\nconst THEME_COLOR_NAMES = [\"0\", \"1\", \"2\", \"3\", \"P\", \"PD\", \"PL\", \"S\", \"SD\", \"SL\"];\nconst THEMES: IThemes = {\n    css: {},\n    vars: {},\n    current: null\n};\n\nfunction registerTheme(themeName: string, _style: IStyle) {\n    const style = completeWithDefaultValues(_style);\n    THEMES.vars[themeName] = style;\n\n    let codeCSS = codeVariables(themeName, style);\n    codeCSS += codeBackground(themeName, style);\n    codeCSS += codeElevation(themeName, style);\n    codeCSS += codeText(themeName, style);\n\n    let styleElement = THEMES.css[themeName];\n    if (!styleElement) {\n        styleElement = document.createElement(\"style\");\n        document.getElementsByTagName('head')[0].appendChild(styleElement);\n        THEMES.css[themeName] = styleElement;\n    }\n\n    styleElement.textContent = codeCSS;\n}\n\nfunction codeText(themeName: string, style: IStyle) {\n    let codeCSS = '';\n    for (let depth = 1; depth <= 10; depth++) {\n        THEME_COLOR_NAMES.forEach(function(colorName) {\n            const fgColorName = `fg${colorName}`;\n            const bgColorName = `bg${colorName}`;\n            const styleFgColorName: string = style[fgColorName] as string;\n            const styleBgColorName: string = style[bgColorName] as string;\n            const bgClass = \".thm-bg\" + colorName;\n            const fgClass = \".thm-fg\" + colorName;\n            for (let position = 1; position <= depth; position++) {\n                const piecesFG = [];\n                const piecesSVG = [];\n                const piecesBG = [];\n                for (let index = 1; index <= depth; index++) {\n                    piecesBG.push(position === index ? bgClass : '*');\n                    piecesSVG.push(position === index ? bgClass : '*');\n                    piecesFG.push(position === index ? fgClass : '*');\n                    if (index === depth) {\n                        piecesBG.push(piecesBG.pop() + \".thm-fg\");\n                        piecesFG.push(piecesFG.pop() + fgClass);\n                    }\n                }\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesBG.join(\" > \")\n                    + \" { color: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + removeTail(piecesBG.join(\" > \"), \".thm-fg\")\n                    + \" { color: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesFG.join(\" > \")\n                    + \" { color: \" + styleBgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesSVG.join(\" > \")\n                    + \" .thm-svg-fill0\"\n                    + \" { fill: \" + styleFgColorName + \" }\\n\";\n                codeCSS += \"body.dom-theme-\" + themeName + \" \"\n                    + piecesSVG.join(\" > \")\n                    + \" .thm-svg-stroke0\"\n                    + \" { stroke: \" + styleFgColorName + \" }\\n\";\n            }\n        });\n    }\n    return codeCSS;\n}\n\nconst ALPHA_HEXA = \"123456789ABCDE\";\nfunction codeVariables(themeName: string, style: IStyle) {\n    let codeCSS = \"body.dom-theme-\" + themeName + '{\\n';\n    THEME_COLOR_NAMES.forEach(function(colorName) {\n        const s = style[`bg${colorName}`] as string;\n        codeCSS += `  --thm-bg${colorName}: ${s};\\n`;\n        for (const a of ALPHA_HEXA) {\n            codeCSS += `  --thm-bg${colorName}-${a}: ${s}${a}${a};\\n`;\n        }\n        COLOR.parse(s);\n        const pen = COLOR.luminanceStep() ? style.black : style.white;\n        codeCSS += `  --thm-fg${colorName}: ${pen};\\n`;\n        for (const a of ALPHA_HEXA) {\n            codeCSS += `  --thm-fg${colorName}-${a}: ${pen}${a}${a};\\n`;\n        }\n    });\n    style.white = normalize(style.white);\n    style.black = normalize(style.black);\n    codeCSS += `  --thm-white: ${style.white};\\n`;\n    codeCSS += `  --thm-black: ${style.black};\\n`;\n    for (const letter of ALPHA_HEXA) {\n        codeCSS += `  --thm-white-${letter}: ${style.white}${letter}${letter};\\n`;\n        codeCSS += `  --thm-black-${letter}: ${style.black}${letter}${letter};\\n`;\n    }\n    codeCSS += \"}\\n\";\n    return codeCSS;\n}\n\n\nfunction codeBackground(themeName: string, style: IStyle) {\n    var codeCSS = '';\n    THEME_COLOR_NAMES.forEach(function(colorName) {\n        codeCSS += \"body.dom-theme-\" + themeName + \".thm-bg\" + colorName\n            + \" { background-color: \" + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-fg\" + colorName\n            + \" { color: \" + style[`fg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName\n            + \" { background-color: \" + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += `body.dom-theme-${themeName} .thm-bg${colorName}-text`\n            + \" { background-color: \" + style[`fg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-bottom\"\n            + \" { background: linear-gradient(to top,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-top\"\n            + \" { background: linear-gradient(to bottom,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-left\"\n            + \" { background: linear-gradient(to right,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-bg\" + colorName + \"-right\"\n            + \" { background: linear-gradient(to left,\"\n            + style[`bg${colorName}`] + \",transparent) }\\n\";\n\n        if (!isNaN(parseInt(colorName))) return;\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-svg-fill\" + colorName\n            + \" { fill: \"\n            + style[`bg${colorName}`] + \" }\\n\";\n        codeCSS += \"body.dom-theme-\" + themeName + \" .thm-svg-stroke\" + colorName\n            + \" { stroke: \"\n            + style[`bg${colorName}`] + \" }\\n\";\n    });\n    return codeCSS;\n}\n\nconst ELEVATIONS: { [ele: string]: string[] } = {\n    \"0\": [\"none\"],\n    \"2\": [\"button\", \"card\"],\n    \"4\": [\"bar\"],\n    \"6\": [\"floating\"],\n    \"8\": [\"button:active\", \"button-raised\", \"card-raised\"],\n    \"9\": [\"sunmenu-0\"],\n    \"10\": [\"sunmenu-1\"],\n    \"11\": [\"sunmenu-2\"],\n    \"12\": [\"floating:active\"],\n    \"16\": [\"nav\"],\n    \"24\": [\"dialog\"]\n};\nfunction codeElevation(themeName: string, style: IStyle) {\n    COLOR.parse(style.bg2);\n    const luminance = COLOR.luminance();\n    var elevationColor = luminance < .6\n        ? addAlpha(style.white, 4)\n        : addAlpha(style.black, 6);\n    var codeCSS = '';\n    const elevationKeys = Object.keys(ELEVATIONS);\n    elevationKeys.forEach(function(elevationKey) {\n        const elevation = parseInt(elevationKey, 10);\n        ELEVATIONS[elevationKey].forEach(name => {\n            codeCSS += `body.dom-theme-${themeName} .thm-ele-${name} {\n  box-shadow: 0 ${elevation}px ${2 * elevation}px ${elevationColor}\n}\\n`;\n        })\n    });\n    return codeCSS;\n}\n\nfunction applyTheme(name: string, target: HTMLElement = document.body) {\n    if (!THEMES.css[name]) {\n        console.error(\"This theme has not been registered: \", name);\n        return;\n    }\n    var body = document.body;\n    if (typeof THEMES.current === 'string') {\n        body.classList.remove(`dom-theme-${THEMES.current}`);\n    }\n    THEMES.current = name;\n    body.classList.add(`dom-theme-${THEMES.current}`);\n}\n\nfunction getTheme(name: string = \"default\"): ITheme {\n    return THEMES.vars[name] as ITheme;\n}\n\nfunction completeBackgrounds(style: IStyle) {\n    let has0 = typeof style.bg0 === 'string';\n    const has1 = typeof style.bg1 === 'string';\n    const has2 = typeof style.bg2 === 'string';\n    let has3 = typeof style.bg3 === 'string';\n\n    if (has0 && has1 && has2 && has3) return\n\n    if (!has0 && !has1 && !has2 && !has3) {\n        style.bg0 = \"#E0E0E0\";\n        style.bg1 = \"#F5F5F5\";\n        style.bg2 = \"#FAFAFA\";\n        style.bg3 = \"#FFF\";\n        return;\n    }\n    if (has0 && !has1 && !has2 && !has3) {\n        style.bg3 = lightenBackground(style.bg0 as string);\n        has3 = true;\n    }\n    if (!has0 && !has1 && !has2 && has3) {\n        style.bg0 = darkenBackground(style.bg3 as string);\n        has3 = true;\n    }\n    const color0 = new Color(style.bg0);\n    const r0 = color0.R;\n    const g0 = color0.G;\n    const b0 = color0.B;\n    const color3 = new Color(style.bg3);\n    const r3 = color3.R;\n    const g3 = color3.G;\n    const b3 = color3.B;\n    const color1 = Color.newRGB((2 * r0 + r3) / 3, (2 * g0 + g3) / 3, (2 * b0 + b3) / 3);\n    const color2 = Color.newRGB((r0 + 2 * r3) / 3, (g0 + 2 * g3) / 3, (b0 + 2 * b3) / 3);\n    style.bg1 = color1.stringify();\n    style.bg2 = color2.stringify();\n}\n\nfunction completeWithDefaultValues(style: IStyle) {\n    if (typeof style === 'undefined') style = {};\n\n    completeBackgrounds(style);\n\n    if (typeof style.bgP !== 'string') style.bgP = \"#3E50B4\";\n    if (typeof style.bgPD !== 'string') style.bgPD = dark(style.bgP);\n    if (typeof style.bgPL !== 'string') style.bgPL = light(style.bgP);\n    if (typeof style.bgS !== 'string') style.bgS = rotateHue(style.bgP);\n    if (typeof style.bgSD !== 'string') style.bgSD = dark(style.bgS);\n    if (typeof style.bgSL !== 'string') style.bgSL = light(style.bgS);\n\n    if (typeof style.white !== 'string') style.white = '#fff';\n    if (typeof style.black !== 'string') style.black = '#000';\n\n    THEME_COLOR_NAMES.forEach(function(name) {\n        const bg: string = style[`bg${name}`] || '#000';\n        COLOR.parse(bg);\n        var luminance = COLOR.luminance();\n        style[`fg${name}`] = luminance < .6 ? style.white : style.black;\n    });\n\n    return style;\n}\n\nfunction dark(color: string) {\n    const percent = .25;\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L *= 1 - percent;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction darkenBackground(color: string) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = Math.max(0, COLOR.L - 0.15);\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction light(color: string) {\n    var percent = .4;\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = percent + (1 - percent) * COLOR.L;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction lightenBackground(color: string) {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.L = Math.min(1, COLOR.L + 0.3);\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\nfunction rotateHue(color: string): string {\n    COLOR.parse(color);\n    COLOR.rgb2hsl();\n    COLOR.H = COLOR.H + .5;\n    if (COLOR.H > 1) COLOR.H--;\n    COLOR.hsl2rgb();\n    return COLOR.stringify();\n}\n\n/**\n * @param {string} color - RGB color in format #xxx or #xxxxxx.\n * @param {string} alpha - Single char between 0 and F.\n */\nfunction addAlpha(color: string, alpha: string) {\n    if (color.length < 5) return color + alpha;\n    return color + alpha + alpha;\n}\n\nfunction removeTail(text: string, tail: string) {\n    return text.substr(0, text.length - tail.length);\n}\n\nfunction isDark(colorName: string = \"\"): boolean {\n    if (colorName === \"\") return isThemeGloballyDark();\n\n    const vars = THEMES.vars[THEMES.current || \"default\"];\n    const varName = `$isDark/${colorName}`;\n    let isDark = vars[varName];\n    if (typeof isDark === 'boolean') return isDark;\n\n    const color = new Color(vars[colorName]);\n    vars[varName] = !color.luminanceStep();\n    return vars[varName];\n}\n\nfunction isThemeGloballyDark(): boolean {\n    const vars = THEMES.vars[THEMES.current || \"default\"];\n    let isDark = vars.$isDark;\n    if (typeof isDark === 'boolean') return isDark;\n\n    const bg0 = new Color(vars.bg0);\n    const bg1 = new Color(vars.bg1);\n    const bg2 = new Color(vars.bg2);\n    const bg3 = new Color(vars.bg3);\n    const average = Color.mix(\n        Color.mix(bg0, bg1),\n        Color.mix(bg2, bg3)\n    );\n    vars.$isDark = !average.luminanceStep();\n    return vars.$isDark;\n}\n\nfunction makeGetCurrentColor(colorName: string): () => string {\n    return () => THEMES.vars[THEMES.current || \"default\"][colorName];\n}\n\nfunction setFontSize(size: \"small\" | \"medium\" | \"large\") {\n    const html = document.documentElement;\n    html.classList.remove(`thm-font-size-small`);\n    html.classList.remove(`thm-font-size-medium`);\n    html.classList.remove(`thm-font-size-large`);\n    html.classList.add(`thm-font-size-${size}`);\n}\n\nfunction normalize(hexa: string): string {\n    const color = new Color(hexa);\n    return color.stringify();\n}\n\nregisterTheme(\"default\", { bgP: \"#1e90ff\" });\n","const EMPTY_FUNCTION = () => { };\r\n\r\ntype TFunction = () => void;\r\n\r\n\r\nexport default function castBoolean(value: any, defaultValue: TFunction = EMPTY_FUNCTION): TFunction {\r\n    if (typeof value === 'function') return value;\r\n    return defaultValue;\r\n}\r\n","import Gesture from \"../gesture\"\nimport Theme from \"../theme\"\nimport castString from \"../converter/string\"\nimport castBoolean from \"../converter/boolean\"\nimport castFunction from \"../converter/function\"\nimport \"./touchable.css\"\n\ninterface IArgs {\n    element?: HTMLElement;\n    enabled?: boolean;\n    color?: string;\n    onTap?: () => void;\n}\n\ninterface IRect {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n}\n\nexport default class Touchable {\n    _element: HTMLElement | undefined;\n    _enabled: boolean = true;\n    color: string = \"#000\";\n    accent: boolean = false;\n    onTap: () => void;\n\n    constructor(args: IArgs) {\n        this.element = args.element;\n        this.enabled = castBoolean(args.enabled, true);\n        this.color = castString(args.color, \"\");\n        this.onTap = castFunction(args.onTap);\n    }\n\n    fire() {\n        if (!this.enabled) return;\n\n        const handler = this.onTap;\n        if (typeof handler === 'function') {\n            handler();\n        }\n    }\n\n    get enabled() { return this._enabled; }\n    set enabled(value: boolean) { this._enabled = value; }\n\n    get element() { return this._element; }\n    set element(element: HTMLElement | undefined) {\n        const that = this;\n        if (typeof element === 'undefined') return;\n        Gesture(element).on({\n            keydown(evt: any) {\n                if (!that.enabled) return;\n\n                const key = evt.key;\n                if (key === \" \" || key === \"Enter\") {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                    that.fire();\n                }\n            },\n\n            down(evt) {\n                if (!that.enabled) return;\n            },\n\n            tap(evt) {\n                if (!that.enabled) return;\n                that.fire();\n\n                const rect = element.getBoundingClientRect();\n                const style = window.getComputedStyle(element);\n                const screen = createScreen(rect);\n                screen.style.borderRadius = style.getPropertyValue(\"border-radius\");\n                const x = evt.x || 0;\n                const y = evt.y || 0;\n                const w = Math.max(x, rect.width - x);\n                const h = Math.max(y, rect.height - y);\n                const radius = Math.ceil(1.1 * Math.sqrt(w * w + h * h));\n                const ripple = document.createElement(\"div\");\n                screen.appendChild(ripple);\n                ripple.style.left = `${x - radius}px`;\n                ripple.style.top = `${y - radius}px`;\n                ripple.style.width = `${2 * radius}px`;\n                ripple.style.height = `${2 * radius}px`;\n                if (that.color.length > 0) {\n                    ripple.style.background = that.color;\n                } else {\n                    ripple.style.background = Theme.isDark() ? \"#fff\" : \"#000\";\n                }\n                window.setTimeout(() => ripple.className = \"open\");\n                window.setTimeout(() => document.body.removeChild(screen), 500);\n            }\n        })\n    }\n}\n\n\nfunction createScreen(rect: IRect) {\n    const div = document.createElement(\"div\");\n    div.className = \"tfw-behavior-touchable\";\n    div.style.left = `${rect.left}px`;\n    div.style.top = `${rect.top}px`;\n    div.style.width = `${rect.width}px`;\n    div.style.height = `${rect.height}px`;\n    document.body.appendChild(div);\n    return div;\n}\n","import { IIntlText, IIntlOrString } from \"./types\"\r\n\r\ninterface ITranslations {\r\n    [language: string]: { [key: string]: string }\r\n}\r\n\r\nlet gCurrentLanguage: string =\r\n    localStorage.getItem(\"CurrentLanguage\") || navigator.language.split(\"-\")[0];\r\n\r\nexport default class Intl {\r\n    constructor(private translations: ITranslations) { }\r\n\r\n    static make(translations: ITranslations) {\r\n        const instance = new Intl(translations);\r\n        return instance.translate.bind(instance);\r\n    }\r\n\r\n    static toIntl(text: IIntlOrString | undefined, lang: string | null = null): IIntlText {        \r\n        if (!text) return { [lang || Intl.lang]: \"\" };\r\n        if (typeof text !== 'string') return text;\r\n        return { [lang || Intl.lang]: text };\r\n    }\r\n\r\n    static toText(intl: IIntlOrString | undefined, lang?: string | undefined): string {\r\n        if (!intl) return \"\";\r\n        if (typeof intl === 'string') return intl;\r\n        if (typeof lang === 'undefined') lang = Intl.lang;\r\n        const text = intl[lang];\r\n        if (typeof text === 'string') return text;\r\n        const defaultText = intl[Object.keys(intl)[0]];\r\n        if (typeof defaultText === 'string') return defaultText;\r\n        return \"\";\r\n    }\r\n\r\n    static addTextToIntl(lang: string, text: string, intl: IIntlOrString): IIntlText {\r\n        intl = Intl.toIntl(intl, lang);\r\n        intl[lang] = text;\r\n        const result: IIntlText = {};\r\n        for (const key of Object.keys(intl)) {\r\n            const val = intl[key];\r\n            if (val.trim().length === 0) continue;\r\n            result[key] = val;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static get lang() { return gCurrentLanguage; }\r\n\r\n    static set lang(_value: string) {\r\n        if (typeof _value !== 'string') return;\r\n        const value = _value.split(\"-\")[0];\r\n        gCurrentLanguage = value;\r\n        localStorage.setItem(\"CurrentLanguage\", value);\r\n    }\r\n\r\n    translate(item: string, ...params: string[]) {\r\n        try {\r\n            if (this.translations[gCurrentLanguage]) {\r\n                const translation = this.translations[gCurrentLanguage][item];\r\n                if (translation) return addParams(translation, params);\r\n            }\r\n\r\n            // If we don't find a translation in the current language,\r\n            // we look in the other languages.\r\n            const languages = Object.keys(this.translations);\r\n            for (const lang of languages) {\r\n                const vocabulary = this.translations[lang];\r\n                const translation = vocabulary[item];\r\n                if (typeof translation !== 'string') continue;\r\n                return addParams(translation, params);\r\n            }\r\n\r\n            console.error(`Missing translation for item \"${item}\"!`, params);\r\n            return \"\";\r\n        }\r\n        catch (ex) {\r\n            throw Error(`Error while looking for a translation of \"${item}\":\\n${ex}`);\r\n        }\r\n    }\r\n}\r\n\r\n// Used for the states automate in order to parse a translation\r\n// with placeholders.\r\nenum Mode { Text, Escape, Placeholder }\r\n\r\n/**\r\n * In a translation, you can find placeholders for potential params.\r\n * They are marked with a dollar and a digit from 1 to 9.\r\n * For instance: \"Welcome mister $1!\".\r\n *\r\n * Order doesn't matter and you can have several occurences of the same\r\n * placeholder.\r\n * For instance: \"Hello $2! Welcome into $1. $1 is the best...\".\r\n *\r\n * @param   {string} translation - A string which can own placeholders.\r\n * @param   {string[]} params - Array of replacements for placeholders.\r\n * @returns The transformed string.\r\n */\r\nfunction addParams(translation: string, params: string[]): string {\r\n    let output = '';\r\n    let mark = 0;\r\n    let mode: Mode = Mode.Text;\r\n    let paramIndex = -1;\r\n    let paramValue = '';\r\n\r\n    for (let index = 0; index < translation.length; index++) {\r\n        const c = translation.charAt(index);\r\n        switch (mode) {\r\n            case Mode.Text:\r\n                if (c === '\\\\') {\r\n                    mode = Mode.Escape;\r\n                    output += translation.substr(mark, index - mark);\r\n                    mark = index + 1;\r\n                }\r\n                else if (c === '$') {\r\n                    mode = Mode.Placeholder;\r\n                    output += translation.substr(mark, index - mark);\r\n                    mark = index + 2;\r\n                }\r\n                break;\r\n            case Mode.Escape:\r\n                mode = Mode.Text;\r\n                break;\r\n            case Mode.Placeholder:\r\n                mode = Mode.Text;\r\n                paramIndex = parseInt(c, 10);\r\n                if (isNaN(paramIndex))\r\n                    throw Error(`Parsing error at position ${index} for translation \"${translation}\"!\r\nEscape \"$\" if you don't want to use a placeholder.`);\r\n                paramValue = params[paramIndex - 1] || \"\";\r\n                output += paramValue;\r\n                break;\r\n            default:\r\n                mode = Mode.Text;\r\n        }\r\n    }\r\n\r\n    return output + translation.substr(mark);\r\n}\r\n","import * as React from \"react\"\r\nimport Icon from \"./icon\"\r\nimport \"./button.css\"\r\nimport Touchable from \"../behavior/touchable\"\r\nimport castArray from \"../converter/array\"\r\nimport castString from \"../converter/string\"\r\nimport castBoolean from \"../converter/boolean\"\r\n\r\ninterface IButtonProps {\r\n    label?: string;\r\n    icon?: string;\r\n    wide?: boolean;\r\n    wait?: boolean;\r\n    flat?: boolean;\r\n    small?: boolean;\r\n    warning?: boolean;\r\n    enabled?: boolean;\r\n    classes?: string[] | string;\r\n    tag?: any;\r\n    onClick?: (tag: any) => void;\r\n}\r\n\r\nexport default class Button extends React.Component<IButtonProps, {}> {\r\n    readonly touchable: Touchable;\r\n    readonly ref: React.RefObject<HTMLButtonElement>;\r\n\r\n    constructor(props: IButtonProps) {\r\n        super(props);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.touchable = new Touchable({ onTap: this.handleClick });\r\n        this.ref = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        const element = this.ref.current;\r\n        if (!element) return;\r\n        this.touchable.element = element;\r\n    }\r\n\r\n    handleClick() {\r\n        const slot = this.props.onClick;\r\n        if (typeof slot !== 'function') return;\r\n        slot(this.props.tag);\r\n    }\r\n\r\n    render() {\r\n        const p = this.props,\r\n            label = castString(p.label, \"\"),\r\n            icon = castString(p.icon, \"\"),\r\n            wide = castBoolean(p.wide, false),\r\n            wait = castBoolean(p.wait, false),\r\n            flat = castBoolean(p.flat, false),\r\n            small = castBoolean(p.small, false),\r\n            enabled = !wait && castBoolean(p.enabled, true),\r\n            warning = castBoolean(p.warning, false),\r\n            classes = [\"tfw-view-button\"].concat(castArray(p.classes));\r\n        if (wide) classes.push(\"wide\");\r\n        if (flat) {\r\n            classes.push(\"flat\");\r\n            classes.push(warning ? \"thm-fgS\" : \"thm-fgP\");\r\n        }\r\n        else {\r\n            if (enabled) classes.push(\"thm-ele-button\");\r\n            classes.push(warning ? \"thm-bgS\" : \"thm-bgP\");\r\n        }\r\n        if (small) classes.push(\"small\");\r\n        if (label.length === 0) classes.push(\"floating\");\r\n\r\n        this.touchable.enabled = enabled;\r\n        return (\r\n            <button ref={this.ref}\r\n                className={classes.join(\" \")}\r\n                disabled={!enabled}>\r\n                {icon.length > 0\r\n                    ? <Icon content={icon}\r\n                        animate={wait}\r\n                        size={`${small ? 1.375 : 1.875}rem`} />\r\n                    : null}\r\n                {label.length > 0\r\n                    ? <div className=\"text\" > {label} </div>\r\n                    : null}\r\n            </button>);\r\n    }\r\n}\r\n","export default function castArray(v: any, defaultValue: any[] = []): any[] {\r\n    if (typeof v === 'undefined') return defaultValue;\r\n    if (Array.isArray(v)) return v;\r\n    return [v];\r\n}\r\n","export default {\r\n    /**\r\n     * @param {string|React.ReactElement<any>} message\r\n     * @param {()=>void|null} onClose\r\n     */\r\n    alert,\r\n    /**\r\n     * @param {string} caption - Title and button caption.\r\n     * @param {any} content - Content to display.\r\n     * @return Promise<boolean> Confirmed or not?\r\n     */\r\n    confirm,\r\n    show,\r\n    wait\r\n};\r\n\r\nimport * as React from \"react\"\r\nimport ReactDOM from 'react-dom'\r\nimport Icon from \"../view/icon\"\r\nimport Flex from \"../layout/flex\"\r\nimport EscapeHandler from \"../escape-handler\"\r\nimport castString from \"../converter/string\"\r\nimport castBoolean from \"../converter/boolean\"\r\nimport \"./dialog.css\"\r\n\r\nimport Button from \"../view/button\"\r\n\r\nimport Intl from \"../intl\";\r\nconst _ = Intl.make(require(\"./dialog.yaml\"));\r\n\r\ninterface IOptions {\r\n    onClose?: () => void;\r\n    closeOnEscape?: boolean;\r\n    icon?: string;\r\n    title?: string;\r\n    content?: string | React.ReactElement<any>;\r\n    footer?: React.ReactElement<any>[] | React.ReactElement<any> | null;\r\n    maxWidth?: number;\r\n}\r\n\r\nclass Dialog {\r\n    _screen: HTMLElement;\r\n    _options: IOptions;\r\n    footer: React.ReactElement<any>[] | React.ReactElement<any> | null = null;\r\n\r\n    constructor(options: IOptions = {}) {\r\n        this._options = Object.assign({\r\n            closeOnEscape: true,\r\n            footer: <Button\r\n                icon=\"close\"\r\n                label = { _('close') }\r\n                flat={ true}\r\n                onClick={() => this.hide()}/>\r\n        }, options);\r\n        this._options.closeOnEscape = castBoolean(this._options.closeOnEscape, true);\r\n        this.footer = this._options.footer || null;\r\n        const screen = document.createElement(\"div\");\r\n        screen.className = \"tfw-factory-dialog\";\r\n        document.body.appendChild(screen);\r\n        this._screen = screen;\r\n        this.hide = this.hide.bind(this);\r\n        if (this._options.closeOnEscape) {\r\n            EscapeHandler.add(() => this._hide());\r\n        }\r\n    }\r\n\r\n    set onClose(slot: () => void) {\r\n        this._options.onClose = slot;\r\n    }\r\n\r\n    show() {\r\n        const opt = this._options;\r\n        const title = castString(opt.title, \"\").trim();\r\n        const icon = castString(opt.icon, \"\").trim();\r\n        let footer: React.ReactElement<any> | null =\r\n            this.footer ? (<footer className= \"thm-bg2 thm-ele-button\">{\r\n                this.footer\r\n            }</footer>) : null;\r\n            let header = null;\r\n        if (title.length > 0) {\r\n            header = (\r\n                <header className= \"thm-bgPD\">\r\n                    { icon.length > 0 ? <Icon content={ icon } /> : null}\r\n                    <div>{title}</div>\r\n                </header>\r\n            )\r\n        }\r\n\r\n        ReactDOM.render((\r\n            <div\r\n                className=\"thm-ele-dialog thm-bg1\"\r\n                style={{\r\n                    maxWidth: typeof opt.maxWidth === 'number' ? `${opt.maxWidth}px` : \"auto\"\r\n                }}>\r\n                {header}\r\n                <div>{opt.content}</div>\r\n                {footer}\r\n            </div>\r\n        ), this._screen);\r\n        setTimeout(() => this._screen.classList.add(\"show\"), 10);\r\n    }\r\n\r\n    hide() {\r\n        if (!this._options.closeOnEscape) {\r\n            this._hide();\r\n        } else {\r\n            EscapeHandler.fire();\r\n        }\r\n    }\r\n\r\n    _hide() {\r\n        const screen = this._screen;\r\n        screen.classList.remove(\"show\");\r\n        setTimeout(() => {\r\n            document.body.removeChild(screen);\r\n        }, 200);\r\n        const onClose = this._options.onClose;\r\n        if (typeof onClose === 'function') {\r\n            requestAnimationFrame(onClose);\r\n        }\r\n    }\r\n}\r\n\r\nfunction alert(content: string | React.ReactElement<any>,\r\n               onClose: (() => void) | undefined = undefined): Promise<void> {\r\n    return new Promise(resolve => {\r\n        const dialog = new Dialog({ onClose: resolve, content, maxWidth: 420 });\r\n        dialog.footer = (<Button\r\n            icon=\"close\"\r\n            label={_('close')}\r\n            flat={true}\r\n            onClick={resolve} />);\r\n        dialog.show();\r\n    });\r\n}\r\n\r\n/**\r\n * ```\r\n * const isConfirmed = await Dialog.confirm(\"Delete file\", <p>Are you sure?</p>);\r\n * ```\r\n * @param caption - Title and button caption.\r\n * @param content - Content to display.\r\n */\r\nfunction confirm( caption: string, content: string | React.ReactElement<any>): Promise<boolean> {\r\n    return new Promise( resolve => {\r\n        const dialog = new Dialog({ title: caption, content, maxWidth: 420 });\r\n        const close = (confirmed: boolean) => {\r\n            dialog.hide();\r\n            resolve( confirmed );\r\n        };\r\n        dialog.onClose = () => close(false);\r\n        const btnCancel = (<Button\r\n            key=\"cancel\"\r\n            flat={true}\r\n            label={_(\"cancel\")}\r\n            onClick={() => close(false)}/>);\r\n        const btnOK = (<Button\r\n            key=\"ok\"\r\n            warning={true}\r\n            label={caption}\r\n            onClick={() => close(true)}/>);\r\n        dialog.footer = [ btnCancel, btnOK ];\r\n        dialog.show();\r\n    });\r\n}\r\n\r\nfunction show(options: IOptions): Dialog {\r\n    const dialog = new Dialog(options);\r\n    dialog.show();\r\n    return dialog;\r\n}\r\n\r\nfunction wait(label: string, task: Promise<any>): Promise<any> {\r\n    const content = (\r\n        <Flex dir=\"row\" justifyContent=\"flex-start\" alignItems=\"center\" >\r\n            <Icon content=\"wait\" animate={true}/>\r\n            <div>{label}</div>\r\n        </Flex>\r\n    );\r\n    const dialog = new Dialog({ content, footer: null, closeOnEscape: false });\r\n    dialog.show();\r\n    const close = dialog.hide.bind( dialog );\r\n    return new Promise( (resolve, reject) => {\r\n        task.then(\r\n            (result: any) => {\r\n                close();\r\n                resolve( result );\r\n            },\r\n            (error: any) => {\r\n                console.error( error );\r\n                close();\r\n                reject( error );\r\n            }\r\n        );\r\n    });\r\n}\r\n","type Action<T> = (arg: T) => void;\r\ntype Debouncer<T> = (arg: T) => void;\r\n\r\n/**\r\n * @param {function} action -  Action to call. Two consecutive actions cannot be  called if there is\r\n * less than `delay` ms between them.\r\n * @param {number} delay - Number of milliseconds.\r\n * @returns {function} The function to call as much as you want. It will perform the debouce for you.\r\n * Put in the same args as the `action` function.\r\n */\r\nexport default function <T>(action: Action<T>, delay: number): Debouncer<T> {\r\n    let timer: number = 0;\r\n\r\n    return function(this: { delay: number }, arg: T) {\r\n        if (timer) window.clearTimeout(timer);\r\n        timer = window.setTimeout(() => {\r\n            timer = 0;\r\n            action(arg);\r\n        }, delay) as number;\r\n    }\r\n}\r\n","import * as React from \"react\"\nimport \"../theme.css\"\nimport \"./input.css\"\nimport castInteger from \"../converter/integer\"\nimport castBoolean from \"../converter/boolean\"\nimport castString from \"../converter/string\"\nimport Debouncer from \"../debouncer\"\n\nimport Intl from \"../intl\"\nconst _ = Intl.make(require(\"./input.yaml\"));\n\ninterface IStringSlot {\n    (value: string): void;\n}\n\ninterface IInputProps {\n    label?: string;\n    value?: string;\n    wide?: boolean;\n    delay?: number;\n    size?: number;\n    focus?: boolean;\n    type?: \"text\" | \"password\" | \"submit\" | \"color\" | \"date\"\n    | \"datetime-local\" | \"email\" | \"month\" | \"number\" | \"range\"\n    | \"search\" | \"tel\" | \"time\" | \"url\" | \"week\";\n    validator?: (value: string) => any;\n    onChange?: IStringSlot\n}\n\ninterface IInputState {\n    error?: string;\n}\n\nexport default class Input extends React.Component<IInputProps, IInputState> {\n    private timerId: number;\n    readonly input: React.RefObject<HTMLInputElement>;\n    value: string = \"\";\n\n    constructor(props: IInputProps) {\n        super(props);\n        this.state = {};\n        this.onFocus = this.onFocus.bind(this);\n        this.onBlur = this.onBlur.bind(this);\n        this.onChange = this.onChange.bind(this);\n        this.timerId = 0;\n        this.input = React.createRef();\n        this.setFocus = Debouncer(this.setFocus.bind(this), 100);\n    }\n\n    setFocus() {\n        const input = this.input ? this.input.current : null;\n        if (!input) return;\n        const focus = castBoolean(this.props.focus, false);\n        if (focus) {\n            input.focus();\n        }\n    }\n\n    onFocus(event: React.FocusEvent<HTMLInputElement>): void {\n        const input = this.input ? this.input.current : null;\n        if (!input) return;\n        if (!input.classList) return;\n        input.classList.remove(\"thm-bg3\");\n        input.classList.add(\"thm-bgSL\");\n        if (this.props.type !== 'number') {\n            // setSelectionRange fails for \"number\" input.\n            input.setSelectionRange(0, input.value.length);\n        }\n    }\n\n    onBlur(event: React.FocusEvent<HTMLInputElement>): void {\n        const input = this.input ? this.input.current : null;\n        if (!input) return;\n        if (!input.classList) return;\n        input.classList.add(\"thm-bg3\");\n        input.classList.remove(\"thm-bgSL\");\n    }\n\n    onChange(event: React.ChangeEvent<HTMLInputElement>): void {\n        if (!this.checkValidity(event.target.value)) return;\n\n        const\n            p = this.props,\n            slot = p.onChange,\n            delay = castInteger(p.delay, 300);\n\n        event.preventDefault();\n        this.value = event.target.value;\n\n        if (typeof slot === 'function') {\n            if (this.timerId !== 0) window.clearTimeout(this.timerId);\n            this.timerId = window.setTimeout(() => {\n                const value = this.value;\n                if (this.props.type === 'number') {\n                    const num = parseFloat(value);\n                    slot(num)\n                } else {\n                    slot(value)\n                }\n            }, delay);\n        }\n    }\n\n    checkValidity(value: string) {\n        let validator = this.props.validator;\n        this.setState({ error: null });\n        if (typeof validator !== 'function') {\n            if (this.props.type !== 'number') return true;\n            validator = NUMBER_VALIDATOR;\n        }\n\n        try {\n            const result = validator(value);\n            if (result === true) return true;\n            if (typeof result === \"string\") {\n                this.setState({ error: result });\n            }\n        } catch (ex) {\n            console.error(`<Input> Unable to validate \"${value}\"!`, ex);\n        }\n        return false;\n    }\n\n    componentDidMount() {\n        this.setFocus();\n    }\n\n    componentDidUpdate(oldProps: IInputProps) {\n        const\n            newProps = this.props,\n            input = this.input ? this.input.current : null;\n\n        //if (input) input.value = castString(newProps.value, \"\");\n        if (castBoolean(this.props.focus, false)) {\n            this.setFocus();\n        }\n    }\n\n    render() {\n        const\n            p = this.props,\n            type = castString(p.type, \"text\"),\n            label = castString(p.label, \"\"),\n            value = castString(p.value, \"\"),\n            wide = castBoolean(p.wide, false),\n            size = Math.max(1, castInteger(p.size, 8)),\n            error = this.state.error,\n            id = nextId();\n        const classes = [\"tfw-view-input\", \"thm-ele-button\"];\n        if (wide) classes.push(\"wide\");\n        const header = (error ? <div className=\"thm-bgSD error\">{error}</div> :\n            (label ? (<label htmlFor={id} className=\"thm-bgPD\">{label}</label>) : null));\n        return (<div className={classes.join(\" \")} >\n            {header}\n            <input\n                ref={this.input}\n                className=\"thm-bg3\"\n                type={type}\n                id={id}\n                size={size}\n                onFocus={this.onFocus}\n                onBlur={this.onBlur}\n                onChange={this.onChange}\n                defaultValue={value} />\n        </div>);\n    }\n}\n\n\nlet globalId = 0;\nfunction nextId() {\n    return `tfw-view-input-${globalId++}`;\n}\n\n\nconst NUMBER_VALIDATOR = (value: string) => isNaN(parseFloat(value)) ? _('nan') : true;\n","/**\r\n * @example\r\n * import Storage from \"./tfw/storage\";\r\n * Storage.local.set(\"state\", {lang:\"jp\", currentPage: \"checkpoint-list\"});\r\n * const state = Storage.local.get(\"state\", {lang:\"jp\", currentPage: \"checkpoint-list\"});\r\n * Storage.local.del(\"state\");\r\n */\r\n\r\nexport default {\r\n    local: makeStorage(window.localStorage),\r\n    session: makeStorage(window.sessionStorage)\r\n};\r\n\r\ninterface IStorage {\r\n    getItem: (key: string)=>any;\r\n    setItem: (key: string, val: any)=>void;\r\n    removeItem: (key: string)=>void;\r\n}\r\n\r\nfunction makeStorage(storage:IStorage) {\r\n    return {\r\n        get(key: string, defaultValue: any): any {\r\n            const value = storage.getItem(key);\r\n            if( value === null) return defaultValue;\r\n            try {\r\n                return JSON.parse(value);\r\n            }\r\n            catch( ex ) {\r\n                console.error(`storage[\"${key}\"] is not parsable as a JSON object!\\n`\r\n                + `Its value is: \"${value}\".\\nThis item will be deleted.`);\r\n                storage.removeItem(key);\r\n                return defaultValue;\r\n            }\r\n        },\r\n\r\n        set(key: string, value: any) {\r\n            storage.setItem(key, JSON.stringify(value));\r\n        },\r\n\r\n        del(key: string) {\r\n            storage.removeItem(key);\r\n        }\r\n    }\r\n}\r\n","import React from \"react\"\nimport Input from \"../../../tfw/view/input\"\nimport Button from \"../../../tfw/view/button\"\nimport Storage from \"../../../tfw/storage\"\n\n\ninterface IHostNameInputProps {\n    onChange: (hostName: string) => void\n}\n\ninterface IHostNameInputState {\n    hostName: string\n}\n\n\nexport default class HostNameInput extends React.Component<IHostNameInputProps, IHostNameInputState> {\n    constructor( props: IHostNameInputProps ) {\n        super( props );\n        this.state = { hostName: Storage.local.get(\"brayns-host-name\", \"http://r1i7n13.bbp.epfl.ch:5000\") };\n    }\n\n    handleChange = (hostName: string) => {\n        const handle = this.props.onChange;\n        if (typeof handle === 'function') {\n            handle(hostName);\n            Storage.local.set(\"brayns-host-name\", hostName);\n        }\n    }\n\n    componentDidMount() {\n        this.handleChange(this.state.hostName);\n    }\n\n    render() {\n        return (<div className=\"webBrayns-view-inputHostName\">\n            <Input\n                wide={true}\n                label=\"Brayns host name\"\n                value={this.state.hostName}\n                onChange={this.handleChange}/>\n            <Button\n                wide={true} small={true} flat={true}\n                label=\"How can I find that Brayns host name?\"\n                icon=\"link\"/>\n        </div>)\n    }\n}\n","import { Client as BraynsClient } from \"brayns\"\nimport React from 'react';\nimport UrlArgs from \"../../tfw/url-args\"\nimport Dialog from \"../../tfw/factory/dialog\"\nimport InputHostName from \"../view/input-host-name\"\n\n// Timeout connection to Brayns service.\nconst CONNECTION_TIMEOUT = 5000;\n\n\nexport default { getHostName, connect }\n\n\n/**\n * Retrieve Brayns' host name from querystring of from user input.\n */\nasync function getHostName(ignoreQueryString: boolean): Promise<string> {\n    return new Promise(async resolve => {\n        if (!ignoreQueryString) {\n            const urlArgs = UrlArgs.parse();\n            const hostFromQueryString = urlArgs.host;\n            if (typeof hostFromQueryString === 'string') resolve(hostFromQueryString);\n        }\n\n        let hostName = \"\";\n        const input = <InputHostName onChange={(value: string) => hostName = value}/>;\n        const userHasConfirmed = await Dialog.confirm(\"Connect to Brayns\", input);\n        if (userHasConfirmed) {\n            resolve(hostName);\n            return;\n        }\n\n        await Dialog.alert((<p>Web-Brayns absolutly needs to be connected to the Brayns server...</p>));\n        location.reload();\n        resolve(\"\");\n    });\n}\n\n\n/**\n * Try to connect to a Brayns service and fails if it take too long.\n */\nasync function connect(hostName: string): Promise<BraynsClient> {\n    return new Promise((resolve, reject) => {\n        const timeout = window.setTimeout(reject, CONNECTION_TIMEOUT);\n        const client = new BraynsClient(hostName);\n        client.ready.subscribe(\n            isReady => {\n                console.info(\"isReady=\", isReady);\n                if (isReady) {\n                    window.clearTimeout(timeout);\n                    resolve(client);\n                }\n            },\n            err => { console.error(\"err=\", err); }\n        );\n    });\n}\n","import { IModel, IAction } from \"../types\"\n\nconst PREFIX = \"models:\"\n\nexport default {\n    INITIAL_STATE: [],\n\n    reducer(state: IModel[], action: IAction): IModel[] {\n        const { type } = action;\n        if (!type.startsWith(PREFIX)) return state;\n\n        const command = action.type.substr(PREFIX.length);\n        switch (command) {\n            case \"add\": return add(state, action);\n            default: throw Error(`Unknown action \"${type}\"!`);\n        }\n    },\n\n    add(model: IModel): IAction {\n        return { type: `${PREFIX}add`, model };\n    }\n}\n\n\nfunction add(state: IModel[], action: IAction): IModel[] {\n    console.info(\"action=\", action);\n    const models = state.slice();\n    models.push(action.model);\n    return models;\n}\n","/**\n * The full state of the application is stored and managed here.\n */\nimport { createStore } from 'redux'\nimport { IAppState } from \"../types\"\n\nimport Models from \"./models\"\n\nconst INITIAL_STATE: IAppState = {\n    models: Models.INITIAL_STATE\n};\n\nfunction reducer(state: IAppState | undefined = INITIAL_STATE, action: IAction): IAppState {\n    return {\n        models: Models.reducer(state.models, action)\n    };\n}\n\nconst store = createStore(reducer);\nexport default {\n    store, dispatch: store.dispatch,\n    Models\n};\n","import { Client as BraynsClient } from \"brayns\"\n\nimport Scene from './scene'\nimport { IModelParams, IVector } from '../types'\n\n\nexport default class Model {\n    private readonly brayns: BraynsClient;\n\n    constructor(private params: IModelParams) {\n        this.brayns = Scene.brayns || new BraynsClient('');\n    }\n\n    async locate(position: IVector) {\n        this.params.transformation.translation = position;\n        const result = await this.applyTransfo();\n        console.info(\"result=\", result);\n    }\n\n    /**\n     * Remove this model from the Scene.\n     */\n    async remove() {\n        return await Scene.request(\"remove-model\", [this.params.id]);\n    }\n\n    private applyTransfo() {\n        return new Promise((resolve, reject) => {\n            const requester = this.brayns.request(\n                \"update-model\", {\n                    id: this.params.id,\n                    transformation: this.params.transformation\n                });\n            requester.then(resolve, reject);\n        })\n    }\n}\n","/**\n * There is only one scene in Brayns.\n */\n\nimport { Client as BraynsClient } from \"brayns\"\n\nimport { IModel } from '../types'\nimport State from '../state'\nimport ServiceHost from '../service/host'\nimport Model from './model'\n\n// Brayns' client.\nlet brayns: (BraynsClient | null) = null;\n\n\nexport default {\n    clear,\n    connect,\n    loadMeshFromPath,\n    request,\n    setViewPort,\n    get brayns() { return brayns; }\n }\n\n/**\n * Try to connect to a Brayns service and fails if it takes too long.\n */\nasync function connect(hostName: string): Promise<BraynsClient> {\n    brayns = await ServiceHost.connect(hostName);\n    console.info(\"brayns=\", brayns);\n    return brayns;\n}\n\nasync function request(method: string, params: {} = {}) {\n    console.info(\"request(\", method, params, \")\");\n\n    return new Promise((resolve, reject) => {\n        if (!brayns) {\n            console.error(\"No BraynsService!\");\n            reject();\n            return;\n        }\n        const loader = brayns.request(method, params);\n        loader.then((output: any) => {\n            console.info(\">>> output:\", output);\n            resolve(output)\n        }, reject);\n    })\n}\n\n/**\n * Remove everything from the scene.\n */\nasync function clear(): Promise<boolean> {\n    const scene: any = await request('get-scene');\n    if (!scene) return false;\n    const models = scene.models;\n    if (!models) return false;\n    const ids = models.map( (model: any) => model.id );\n    request(\"remove-model\", ids);\n\n    const rendererParams: any = await request(\"get-renderer-params\", {});\n    if (rendererParams) {\n        // A bit brighter.\n        rendererParams.pixelAlpha = 1.7;\n        rendererParams.shadows = 1;\n        rendererParams.softShadows = 0.9;\n        request(\"set-renderer-params\", rendererParams);\n    }\n\n    request(\"set-environment-map\", {\n        filename: \"/gpfs/bbp.cscs.ch/project/proj3/resources/envmap/0101.jpg\"\n    });\n\n    return true;\n}\n\nasync function setViewPort(width: number, height: number) {\n    //brayns.set_application_parameters(viewport=[800,600])\n    return await request(\"set-application-parameters\", {\n        viewport: [width, height]\n    });\n}\n\nasync function loadMeshFromPath(path: string): Promise<Model> {\n    const result = await request(\"add-model\", { path });\n    const model: IModel = result as IModel;\n    State.dispatch(State.Models.add(model));\n    return new Model(model);\n}\n","import React from 'react';\nimport { Client as BraynsClient, IMAGE_JPEG } from \"brayns\"\n\nimport Scene from '../../scene'\n\nimport \"./image-stream.css\"\n\ninterface IImageStreamProps {\n    brayns: BraynsClient\n}\n\nexport default class ImageStream extends React.Component<IImageStreamProps> {\n    private readonly canvasRef: React.RefObject<HTMLCanvasElement> = React.createRef();\n\n    get canvas() {\n        return this.canvasRef.current;\n    }\n    get ctx() {\n        const canvas = this.canvasRef.current;\n        if (canvas) {\n            const ctx = canvas.getContext('2d');\n            return ctx;\n        }\n        return null;\n    }\n\n    componentDidMount() {\n        // If there's no container el we can bind the camera to,\n        // there's no point in continuing\n        if (!this.ctx) {\n            return;\n        }\n\n        this.props.brayns\n                .observe(IMAGE_JPEG)\n                .subscribe(async (blob) => {\n                    const canvas = this.canvasRef.current;\n                    if (!canvas ) return;\n                    const ctx = this.ctx;\n                    if (!ctx) return;\n\n                    const img = await blobToImg(blob);\n                    const srcW = img.naturalWidth;\n                    const srcH = img.naturalHeight;\n                    const dstW = canvas.width;\n                    const dstH = canvas.height;\n                    const dstX = (dstW - srcW) / 2;\n                    const dstY = (dstH - srcH) / 2;\n                    ctx.drawImage(\n                        img,\n                        dstX, dstY,\n                        srcW, srcH\n                    )\n                });\n\n        this.updateViewPort();\n        window.onfocus = this.updateViewPort;\n    }\n\n    private updateViewPort = () => {\n        const canvas = this.canvasRef.current;\n        if (!canvas ) return;\n        const rect = canvas.getBoundingClientRect();\n        const w = Math.floor(rect.width);\n        const h = Math.floor(rect.height);\n        canvas.width = w;\n        canvas.height = h;\n        Scene.setViewPort(w, h);\n    }\n\n    componentWillUnmount() {\n    }\n\n    // We use moz-opaque to improve the perf. of the canvas\n    // See https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Optimizing_canvas\n    render() {\n        return (\n            <canvas\n                ref={this.canvasRef}\n                className=\"webBrayns-view-ImageStream\"\n                moz-opaque=\"true\" />\n        );\n    }\n}\n\n\nfunction blobToImg(blob: Blob) {\n    const url = URL.createObjectURL(blob);\n    const img: any = new Image();\n    return new Promise<HTMLImageElement>(resolve => {\n        img.src = url;\n        // https://medium.com/dailyjs/image-loading-with-image-decode-b03652e7d2d2\n        if (img.decode) {\n            img.decode()\n                // TODO: Figure out why decode() throws DOMException\n                .then(() => resolve(img));\n        } else {\n            img.onload = () => resolve(img);\n        }\n    });\n}\n","import React from \"react\"\n\nimport Input from '../../../tfw/view/input'\nimport LocalStorage from '../../service/local-storage'\n\n\nconst Storage = new LocalStorage(\"input-path\");\n\ninterface IInputPathProps {\n    onChange: (path: string) => void\n}\n\ninterface IInputPathState {\n    path: string\n}\n\nexport default class  extends React.Component<IInputPathProps, IInputPathState> {\n    constructor( props: IInputPathProps ) {\n        super( props );\n        this.state = { path: '' }\n\n        this.handleChange(\n            Storage.get(\"path\", '/gpfs/bbp.cscs.ch/project/proj3/resources/meshes/astrocytes/GLIA_000099.h5_decimated.off')\n        )\n    }\n\n    handleChange = (path: string) => {\n        const handler = this.props.onChange;\n        this.setState({ path });\n        Storage.set('path', path);\n        if (typeof handler !== 'function') return;\n        handler(path);\n    }\n\n    render() {\n        return <Input\n            label=\"Please type a model path\"\n            size={100}\n            value={this.state.path}\n            onChange={this.handleChange}\n            wide={true}/>\n    }\n}\n","import Storage from '../../tfw/storage'\n\nexport default class localStorage {\n    constructor(private prefix: string = '') {}\n\n    get(key: string, defaultValue: any): any {\n        return Storage.local.get(this.key(key), defaultValue);\n    }\n\n    set(key: string, val: any) {\n        Storage.local.set(this.key(key), val);\n    }\n\n    private key(key: string): string {\n        if (this.prefix.length === 0) return key;\n        return `${this.prefix}:\\t${key}`;\n    }\n}\n","import React from \"react\"\n\nimport Icon from '../../../tfw/view/icon'\nimport Input from '../../../tfw/view/input'\nimport Button from '../../../tfw/view/button'\nimport Storage from '../../../tfw/storage'\nimport Scene from '../../scene'\n\nimport \"./websocket-console.css\"\n\n\ninterface IWebsocketConsole {\n    method: string,\n    params: string,\n    output: string,\n    querying: boolean\n}\n\n\nexport default class WebsocketConsole extends React.Component<{}, IWebsocketConsole> {\n    constructor( props: {} ) {\n        super( props );\n        this.state = {\n            method: get(\"method\", \"get-renderer-params\"),\n            params: get(\"params\", \"{}\"),\n            output: \"\",\n            querying: false\n        }\n    }\n\n    handleMethodChange = (method: string) => {\n        this.setState({ method });\n    }\n\n    handleParamsChange = (event: string) => {\n        this.setState({ params: event.target.value });\n    }\n\n    handleExecute = async () => {\n        const { method, params } = this.state;\n\n        set(\"method\", method);\n        set(\"params\", params);\n\n        this.setState({ querying: true, output: '' });\n        try {\n            const input = JSON.parse(params);\n            const output = await Scene.request(method, input);\n            this.setState({ output: JSON.stringify(output, null, '  ') });\n        }\n        catch( ex ) {\n            console.error(\"WebSocket console error:\", ex);\n        }\n        finally {\n            this.setState({ querying: false });\n        }\n    }\n\n    render() {\n        return (<div className=\"webBrayns-view-WebsocketConsole\">\n            <div className=\"head\">\n                <Input\n                    label=\"Method\"\n                    value={this.state.method}\n                    onChange={this.handleMethodChange}\n                    wide={true}/>\n                <Button\n                    wait={this.state.querying}\n                    label=\"Execute\"\n                    icon=\"gear\"\n                    onClick={this.handleExecute}/>\n            </div>\n            <div className=\"body\">\n                <div>\n                    <textarea\n                        onChange={this.handleParamsChange}\n                        defaultValue={this.state.params}></textarea>\n                </div>\n                <div className=\"output\">{\n                    this.state.querying ?\n                    <Icon content=\"wait\" animate={true} size={128}/> :\n                    <pre>{this.state.output}</pre>\n                }</div>\n            </div>\n        </div>)\n    }\n}\n\n\nconst STORAGE_PREFIX = 'websocket-console::';\n\nfunction get(key: string, defaultValue: any): any {\n    return Storage.local.get(`${STORAGE_PREFIX}${key}`, defaultValue);\n}\n\nfunction set(key: string, value: any): any {\n    return Storage.local.set(`${STORAGE_PREFIX}${key}`, value);\n}\n","import React from \"react\"\n\nimport { IModel } from '../../types'\n\nimport \"./model-button.css\"\n\ninterface IModelButtonProps {\n    model: IModel\n}\n\nexport default class ModelButton extends React.Component<IModelButtonProps, {}> {\n    constructor( props: IModelButtonProps ) {\n        super( props );\n    }\n\n    render() {\n        const { model } = this.props;\n        return (<div className=\"webBrayns-view-ModelButton thm-ele-button thm-bg2\" title={model.path}>\n            <div className=\"name\">{model.name}</div>\n            <div></div>\n        </div>)\n    }\n}\n","import React from \"react\"\n\nimport { IModel } from '../../types'\nimport ModelButton from '../model-button'\n\nimport \"./model-list.css\"\n\ninterface IModelListProps {\n    models: IModel[]\n}\n\nexport default class modelList extends React.Component<IModelListProps, {}> {\n    constructor( props: IModelListProps ) {\n        super( props );\n    }\n\n    render() {\n        return (<div className=\"webBrayns-view-ModelList\">{\n            this.props.models.map( (model: IModel) => (\n                <ModelButton key={model.id} model={model}/>\n            ))\n        }</div>)\n    }\n}\n","import { connect } from 'react-redux'\n\nimport { IAppState, IAction } from \"../../types\"\nimport ModelList from './model-list'\n\n\nfunction mapStateToProps(state: IAppState) {\n    return {\n        models: state.models\n    };\n}\n\nfunction mapDispatchToProps(dispatch: (action: IAction) => void) {\n    return {\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModelList);\n","import React from \"react\"\nimport { Client as BraynsClient } from \"brayns\"\n\nimport Scene from './web-brayns/scene'\nimport Model from './web-brayns/scene/model'\nimport ImageStream from './web-brayns/view/image-stream'\nimport Icon from './tfw/view/icon'\nimport Dialog from './tfw/factory/dialog'\nimport InputPath from './web-brayns/view/input-path'\nimport WebsocketConsole from './web-brayns/view/websocket-console'\n\nimport ModelList from './web-brayns/view/model-list/container'\n\nimport \"./app.css\"\n\n\ninterface IAppProps {\n    brayns: BraynsClient\n}\n\nexport default class App extends React.Component<IAppProps, {}> {\n    constructor( props: IAppProps ) {\n        super( props );\n    }\n\n    async componentDidMount() {\n        try {\n            //Scene.clear();\n            const astro1 = await loadAstrocyte(1);\n            astro1.locate([-30, 0, 0]);\n            const astro2 = await loadAstrocyte(2);\n            astro2.locate([30, 0, 0]);\n        }\n        catch( ex ) {\n            console.error(ex);\n        }\n    }\n\n    handleLoadMesh = async () => {\n        let path = '';\n        const confirmed = await Dialog.confirm(\n            \"Load Mesh\",\n            <InputPath onChange={(p: string) => path = p}/>);\n        if (!confirmed) return;\n        const model = await Scene.loadMeshFromPath(path);\n        console.info(\"model=\", model);\n    }\n\n    render() {\n        return (<div className=\"App\">\n            <div className=\"panel\">\n                <header className=\"thm-bgPD thm-ele-nav\">\n                    <div>Web-Brayns</div>\n                    <div>\n                        <Icon content='import' onClick={this.handleLoadMesh}/>\n                        <Icon content='bug'/>\n                    </div>\n                </header>\n                <ModelList />\n            </div>\n            <div className='view'>\n                <ImageStream brayns={this.props.brayns}/>\n                <WebsocketConsole/>\n            </div>\n        </div>)\n    }\n}\n\n\nasync function loadAstrocyte(id: number): Promise<Model> {\n    const path = `/gpfs/bbp.cscs.ch/project/proj3/resources/meshes/astrocytes/GLIA_${pad(id)}.h5_decimated.off`;\n    console.info(\"path=\", path);\n    return await Scene.loadMeshFromPath(path);\n}\n\n\nfunction pad(value: number): string {\n    let out = `${value}`;\n    while (out.length < 6 ) {\n        out = `0${out}`;\n    }\n    return out;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\n\nimport ServiceHost from \"./web-brayns/service/host\"\nimport Scene from \"./web-brayns/scene\"\nimport Dialog from \"./tfw/factory/dialog\"\nimport Theme from \"./tfw/theme\"\nimport App from './app';\nimport State from './web-brayns/state'\n\nimport \"./tfw/font/josefin.css\"\n\n\nTheme.apply(\"default\");\n\nasync function start() {\n    const hostName = await ServiceHost.getHostName(false);\n    console.info(\"hostName=\", hostName);\n\n    try {\n        const client = await Dialog.wait(\n            \"Connecting to Brayns service...\",\n            Scene.connect(hostName)\n        );\n\n        await Dialog.wait(\n            \"Clearing the scene...\",\n            Scene.clear()\n        );\n\n        // Entry point for our app\n        const root = document.getElementById('root') as HTMLElement;\n        ReactDOM.render(<Provider store={State.store}><App brayns={client}/></Provider>, root);\n\n        const splash = document.getElementById('splash-screen');\n        if (splash) {\n            splash.classList.add(\"vanish\");\n            window.setTimeout(() => document.body.removeChild(splash), 600);\n        }\n    }\n    catch(ex) {\n        await Dialog.alert(`Seems like Brayns is not reachable on ${hostName}!`);\n        location.reload();\n    }\n\n}\n\nstart();\n"],"sourceRoot":""}