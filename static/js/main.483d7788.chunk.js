(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(29).concat([function(e,t,n){e.exports=n(65)},,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports={en:{cancel:"Cancel",close:"Close",ok:"Ok"},fr:{cancel:"Annuler",close:"Fermer",ok:"OK"}}},function(e,t,n){},function(e,t,n){},function(e,t){e.exports={en:{nan:"Not a number!"},fr:{nan:"Ce n'est pas un nombre !"},it:{nan:"Non \xe8 un numero !"}}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(2),s=n(0),o=n.n(s),c=n(16),u=n.n(c),l=n(11),h=n(18),p={parse:function(){var e={},t=location.search;return t.length<2?e:(t.substring(1).split("&").forEach(function(t,n){var r=t.split("+").join(" "),a=r.indexOf("=");if(-1===a)e["".concat(n)]=r;else{var i=r.substr(0,a),s=r.substr(a+1);e[i]=decodeURIComponent(s)}}),e)}},f=n(4),d=n(3),m=n(9),v=n(27),b=n(7),g=n(5),y=n(6);function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(typeof e){case"undefined":return t;case"boolean":return e;case"number":return 0!=e;case"string":var n=e.trim().toLowerCase();if("true"===n||"yes"===n)return!0;var r=parseInt(n);return!isNaN(r)&&0!==r;default:return!1}}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.floor(.5+t);switch(typeof e){case"boolean":return e?1:0;case"number":return Math.floor(.5+e);case"string":var r=e.trim().toLowerCase();if(r.startsWith("0x")){var a=parseInt(r.substr(2),16);return isNaN(a)?n:a}if(r.startsWith("0b")){var i=parseInt(r.substr(2),2);return isNaN(i)?n:i}if(r.startsWith("0o")){var s=parseInt(r.substr(2),8);return isNaN(s)?n:s}var o=parseFloat(r);return isNaN(o)?n:Math.floor(.5+o);default:return n}}var x=/^(-?[.0-9]+)[ \n\r]*([a-z%]*)/;function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%";if("number"===typeof e)return"".concat(e,"px");if("string"!==typeof e)return t;var n="".concat(e).trim().toLowerCase();if("auto"===n||"inherit"===n)return n;if(n.startsWith("calc("))return n;var r=x.exec(n);if(!r)return t;var a=parseFloat(r[1]);if(isNaN(a)||0===a)return"0";var i=r[2].length<1?"px":r[2];return"".concat(a).concat(i)}function L(e){return["path",{d:e,stroke:"none",fill:0}]}for(var H={android:L("M15,-35H10V-40H15M-10,-35H-15V-40H-10M18,-49L24,-56C25,-57,25,-58,24,-59C23,-60,22,-60,21,-59L13,-52C9,-54,5,-55,0,-55C-5,-55,-9,-54,-13,-52L-21,-59C-22,-60,-23,-60,-24,-59C-25,-58,-25,-57,-24,-56L-18,-49C-25,-44,-30,-35,-30,-25H30C30,-35,25,-44,18,-49M43,-20A8,8,0,0,0,35,-12V23A8,8,0,0,0,43,30A8,8,0,0,0,50,23V-12A8,8,0,0,0,43,-20M-42,-20A8,8,0,0,0,-50,-12V23A8,8,0,0,0,-42,30A8,8,0,0,0,-35,23V-12A8,8,0,0,0,-42,-20M-30,30A5,5,0,0,0,-25,35H-20V53A8,8,0,0,0,-12,60A8,8,0,0,0,-5,53V35H5V53A8,8,0,0,0,13,60A8,8,0,0,0,20,53V35H25A5,5,0,0,0,30,30V-20H-30V30Z"),bug:L("M10,0H-10V-10H10M10,20H-10V10H10M40,-20H26C24,-24 21,-27 17,-30L25,-38L18,-45L7,-34C5,-35 3,-35 0,-35C-2,-35 -5,-35 -7,-34L-18,-45L-25,-38L-17,-30C-21,-27 -24,-24 -26,-20H-40V-10H-30C-30,-8 -30,-7 -30,-5V0H-40V10H-30V15C-30,17 -30,18 -30,20H-40V30H-26C-21,39 -11,45 0,45C11,45 21,39 26,30H40V20H30C30,18 30,17 30,15V10H40V0H30V-5C30,-7 30,-8 30,-10H40V-20Z"),camera:L("M-40,-40H-25L-15,-50H15L25,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M0,-25A25,25,0,0,0,-25,0A25,25,0,0,0,0,25A25,25,0,0,0,25,0A25,25,0,0,0,0,-25M0,-15A15,15,0,0,1,15,0A15,15,0,0,1,0,15A15,15,0,0,1,-15,0A15,15,0,0,1,0,-15Z"),cancel:L("M7,0L35,28V35H28L0,7L-28,35H-35V28L-7,0L-35,-28V-35H-28L0,-7L28,-35H35V-28L7,0Z"),center:L("M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M35,35H15V45H35A10,10,0,0,0,45,35V15H35M35,-45H15V-35H35V-15H45V-35A10,10,0,0,0,35,-45M-35,-35H-15V-45H-35A10,10,0,0,0,-45,-35V-15H-35M-35,15H-45V35A10,10,0,0,0,-35,45H-15V35H-35V15Z"),child:L("M5,-50V-10H45A40,40,0,0,0,5,-50M37,19C42,13,45,4,45,-5H-28L-32,-15H-50V-5H-39C-39,-5,-29,15,-28,17C-34,20,-37,26,-37,33A18,18,0,0,0,-20,50C-11,50,-4,44,-3,35H8C9,44,16,50,25,50A18,18,0,0,0,43,33C43,27,40,23,37,19M-20,40A8,8,0,0,1,-27,33A8,8,0,0,1,-20,25A8,8,0,0,1,-12,33A8,8,0,0,1,-20,40M25,40A8,8,0,0,1,18,33A8,8,0,0,1,25,25A8,8,0,0,1,33,33A8,8,0,0,1,25,40Z"),close:L("M0,-50C28,-50,50,-28,50,0C50,28,28,50,0,50C-28,50,-50,28,-50,0C-50,-28,-28,-50,0,-50M18,-25L0,-7L-18,-25L-25,-18L-7,0L-25,18L-18,25L0,7L18,25L25,18L7,0L25,-18L18,-25Z"),code:L("M13,23L36,0L13,-23L20,-30L50,0L20,30L13,23M-13,23L-36,0L-13,-23L-20,-30L-50,0L-20,30L-13,23Z"),copy:L("M35,45H-20V-25H35M35,-35H-20A10,10,0,0,0,-30,-25V45A10,10,0,0,0,-20,55H35A10,10,0,0,0,45,45V-25A10,10,0,0,0,35,-35M20,-55H-40A10,10,0,0,0,-50,-45V25H-40V-45H20V-55Z"),counter:L("M-40,-40H40A10,10,0,0,1,50,-30V30A10,10,0,0,1,40,40H-40A10,10,0,0,1,-50,30V-30A10,10,0,0,1,-40,-40M-40,-30V30H-5V-30H-40M40,30V-30H34C35,-27,35,-25,35,-24C34,-21,32,-17,31,-16L20,-3L36,-4L36,3L10,2L10,-3C10,-3,25,-19,26,-20C27,-22,30,-30,23,-30C16,-30,17,-23,17,-23L9,-23C9,-23,9,-27,11,-30H5V30H18L18,26L23,26C23,26,27,25,27,20C28,15,23,15,23,15C22,15,17,16,17,20H10C10,20,10,9,23,9C36,9,35,20,35,20C35,20,35,26,29,28L32,30H40M-15,20H-23V-9L-32,-6V-12L-16,-18H-15V20Z"),cut:L("M35,-45L5,-15L15,-5L50,-40V-45M0,3A3,3,0,0,1,-2,0A3,3,0,0,1,0,-2A3,3,0,0,1,3,0A3,3,0,0,1,0,3M-30,40A10,10,0,0,1,-40,30C-40,24,-35,20,-30,20A10,10,0,0,1,-20,30C-20,36,-24,40,-30,40M-30,-20A10,10,0,0,1,-40,-30C-40,-36,-35,-40,-30,-40A10,10,0,0,1,-20,-30C-20,-24,-24,-20,-30,-20M-12,-22C-11,-24,-10,-27,-10,-30A20,20,0,0,0,-30,-50A20,20,0,0,0,-50,-30A20,20,0,0,0,-30,-10C-27,-10,-24,-11,-22,-12L-10,0L-22,12C-24,11,-27,10,-30,10A20,20,0,0,0,-50,30A20,20,0,0,0,-30,50A20,20,0,0,0,-10,30C-10,27,-11,24,-12,22L0,10L35,45H50V40L-12,-22Z"),delete:L("M35,-40H18L13,-45H-12L-17,-40H-35V-30H35M-30,35A10,10,0,0,0,-20,45H20A10,10,0,0,0,30,35V-25H-30V35Z"),direction:L("M10,13V0H-10V15H-20V-5A5,5,0,0,1,-15,-10H10V-22L28,-5M49,-4L4,-49H3C2,-50,-2,-50,-4,-49L-49,-4C-50,-2,-50,2,-49,4L-4,49C-2,50,2,51,4,49L49,4C51,2,51,-2,49,-4Z"),down:L("M-30,-30L0,30,30,-30"),"down-double":L("M-30,-40L0,-10,30,-40M-30,10L0,40,30,10"),edit:L("M24,-46C22,-46,20,-46,19,-44L8,-34L35,-7L45,-17C48,-21,48,-25,45,-28L29,-44C28,-46,26,-46,24,-46M5,-30L-36,11L-23,12L-22,23L-11,24L-9,37L31,-3M-39,15L-47,49L-14,40L-15,29L-27,28L-28,16"),eraser:L("M21,-42L46,-17C50,-14,50,-7,46,-3L0,43C-8,50,-20,50,-28,43L-46,25C-50,21,-50,15,-46,11L7,-42C11,-46,17,-46,21,-42M-39,18L-21,36C-17,39,-11,39,-7,36L11,18L-14,-7L-39,18Z"),export:L("M-35,40H35V30H-35M35,-15H15V-45H-15V-15H-35L0,20L35,-15Z"),"flag-jp":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#fff",d:"M-60,45h120v-90h-120z"}],["circle",{fill:"#bc002d",r:24}]]],"flag-fr":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#002395",d:"M-60,45h40v-90h-40z"}],["path",{fill:"#fff",d:"M-20,45h40v-90h-40z"}],["path",{fill:"#ed2939",d:"M20,45h40v-90h-40z"}]]],"flag-it":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,50h130v-100h-130z"}],["path",{fill:"#009246",d:"M-60,45h40v-90h-40z"}],["path",{fill:"#fff",d:"M-20,45h40v-90h-40z"}],["path",{fill:"#ce2b37",d:"M20,45h40v-90h-40z"}]]],"flag-de":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,41h130v-82h-130z"}],["path",{fill:"#ffce00",d:"M-60,36h120v-24h-120z"}],["path",{fill:"#dd0000",d:"M-60,12h120v-24h-120z"}]]],"flag-en":["g",{stroke:"none"},[["path",{fill:"#000",d:"M-65,37h130v-75h-130z"}],["path",{fill:"#bb133e",d:"M-60,32h120v-65h-120z"}],["path",{fill:"#fff",d:"M-60,22h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,12h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,2h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-8h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-18h120v5h-120z"}],["path",{fill:"#fff",d:"M-60,-28h120v5h-120z"}],["path",{fill:"#002664",d:"M-60,-33h48v35h-48z"}]]],font:L("M25,-20H40V40H45V45H25V40H30V25H10L3,40H10V45H-10V40H-5L25,-20M30,-15L13,20H30V-15M-35,-45H-10C-4,-45,0,-41,0,-35V20H-15V-5H-30V20H-45V-35C-45,-41,-41,-45,-35,-45M-30,-35V-15H-15V-35H-30Z"),"format-align-center":L("M-45,-45H45V-35H-45V-45M-25,-25H25V-15H-25V-25M-45,-5H45V5H-45V-5M-25,15H25V25H-25V15M-45,35H45V45H-45V35Z"),"format-align-justify":L("M-45,-45H45V-35H-45V-45M-45,-25H45V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H45V25H-45V15M-45,35H45V45H-45V35Z"),"format-align-left":L("M-45,-45H45V-35H-45V-45M-45,-25H15V-15H-45V-25M-45,-5H45V5H-45V-5M-45,15H15V25H-45V15M-45,35H45V45H-45V35Z"),"format-align-right":L(" M-45,-45H45V-35H-45V-45M-15,-25H45V-15H-15V-25M-45,-5H45V5H-45V-5M-15,15H45V25H-15V15M-45,35H45V45H-45V35Z "),"format-bold":L("M8,18H-10V3H8A8,8,0,0,1,15,10A8,8,0,0,1,8,18M-10,-27H5A8,8,0,0,1,13,-20A8,8,0,0,1,5,-12H-10M18,-6C23,-9,26,-15,26,-20C26,-31,18,-40,6,-40H-25V30H10C21,30,29,22,29,11C29,3,24,-3,18,-6Z"),"format-italic":L("M-10,-40V-25H1L-16,15H-30V30H10V15H-1L16,-25H30V-40H-10Z"),"format-float-center":L("M-15,-25H15V5H-15V-25M-45,-45H45V-35H-45V-45M-45,15H45V25H-45V15M-45,35H25V45H-45V35Z"),"format-float-left":L("M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-25V-15H-5V-25H45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-float-none":L("M-45,-25H-15V5H-45V-25M-45,-45H45V-35H-45V-45M45,-5V5H-5V-5H45M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-float-right":L("M15,-25H45V5H15V-25M-45,-45H45V-35H-45V-45M5,-25V-15H-45V-25H5M-15,-5V5H-45V-5H-15M-45,15H25V25H-45V15M-45,35H45V45H-45V35Z"),"format-header":L("M-40,-40H-30V-10H-10V-40H0V30H-10V0H-30V30H-40V-40M13,-23L31,-5L13,13L20,20L45,-5L20,-30L13,-23Z"),"format-underline":L("M-35,45H35V35H-35V45M0,25A30,30,0,0,0,30,-5V-45H18V-5A18,18,0,0,1,0,13A18,18,0,0,1,-17,-5V-45H-30V-5A30,30,0,0,0,0,25Z"),fullscreen:L("M-35,-35H-10V-25H-25V-10H-35V-35M10,-35H35V-10H25V-25H10V-35M25,10H35V35H10V25H25V10M-10,25V35H-35V10H-25V25H-10Z"),gear:L("M0,18A18,18,0,0,1,-17,0A18,18,0,0,1,0,-17A18,18,0,0,1,18,0A18,18,0,0,1,0,18M37,5C37,3,38,2,38,0C38,-2,37,-3,37,-5L48,-13C49,-14,49,-15,48,-16L38,-34C38,-35,36,-35,35,-35L23,-30C20,-32,18,-33,14,-35L13,-48C12,-49,11,-50,10,-50H-10C-11,-50,-12,-49,-12,-48L-14,-35C-17,-33,-20,-32,-23,-30L-35,-35C-36,-35,-38,-35,-38,-34L-48,-16C-49,-15,-49,-14,-48,-13L-37,-5C-37,-3,-37,-2,-37,0C-37,2,-37,3,-37,5L-48,13C-49,14,-49,15,-48,16L-38,34C-38,35,-36,35,-35,35L-23,30C-20,32,-17,33,-14,35L-12,48C-12,49,-11,50,-10,50H10C11,50,12,49,13,48L14,35C18,33,20,32,23,30L35,35C36,35,38,35,38,34L48,16C49,15,49,14,48,13L37,5Z"),gps:L("M0,-20A20,20,0,0,1,20,0A20,20,0,0,1,0,20A20,20,0,0,1,-20,0A20,20,0,0,1,0,-20M-45,5H-55V-5H-45C-42,-26,-26,-42,-5,-45V-55H5V-45C26,-42,43,-26,45,-5H55V5H45C43,26,26,43,5,45V55H-5V45C-26,43,-42,26,-45,5M0,-35A35,35,0,0,0,-35,0A35,35,0,0,0,0,35A35,35,0,0,0,35,0A35,35,0,0,0,0,-35Z"),hand:L("M-10,-50A10,10,0,0,1,0,-40V-17C0,-17,10,-19,10,-14C10,-14,20,-15,20,-10C20,-10,30,-11,30,-6C30,-6,40,-7,40,-2V15C40,20,25,45,25,50H-15C-15,50,-25,15,-40,5C-40,5,-45,-25,-20,0V-40A10,10,0,0,1,-10,-50Z"),heart:L("M0,47L-7,40C-33,17,-50,1,-50,-17C-50,-33,-38,-45,-22,-45C-14,-45,-5,-41,0,-35C5,-41,14,-45,23,-45C38,-45,50,-33,50,-17C50,1,33,17,7,40L0,47Z"),hide:L("M-1,-15L15,1C15,1,15,0,15,0A15,15,0,0,0,0,-15C0,-15,-1,-15,-1,-15M-22,-11L-15,-3C-15,-2,-15,-1,-15,0A15,15,0,0,0,0,15C1,15,2,15,3,15L11,22C8,24,4,25,0,25A25,25,0,0,1,-25,0C-25,-4,-24,-8,-22,-11M-50,-39L-39,-27L-36,-25C-45,-18,-51,-10,-55,0C-46,22,-25,38,0,38C8,38,15,36,22,33L24,35L39,50L45,44L-44,-45M0,-25A25,25,0,0,1,25,0C25,3,24,6,23,9L38,24C45,18,51,9,55,0C46,-22,25,-37,0,-37C-7,-37,-14,-36,-20,-34L-9,-23C-6,-24,-3,-25,0,-25Z"),home:L("M-10,40V10H10V40H35V0H50L0,-45L-50,0H-35V40H-10Z"),image:L("M5,-15H33L5,-42V-15M-30,-50H10L40,-20V40A10,10,0,0,1,30,50H-30C-36,50,-40,46,-40,40V-40C-40,-46,-36,-50,-30,-50M-30,40H15L30,40V0L10,20L0,10L-30,40M-20,-15A10,10,0,0,0,-30,-5A10,10,0,0,0,-20,5A10,10,0,0,0,-10,-5A10,10,0,0,0,-20,-15Z"),import:L("M-15,20V-10H-35L0,-45L35,-10H15V20H-15M-35,40V30H35V40H-35Z"),improvement:L("M0,50A50,50,0,0,1,-50,0A50,50,0,0,1,0,-50A50,50,0,0,1,50,0A50,50,0,0,1,0,50M0,-25L-25,0H-10V20H10V0H25L0,-25Z"),info:L("M8,-40A8,8,0,0,0,0,-32A8,8,0,0,0,8,-25A8,8,0,0,0,15,-32A8,8,0,0,0,8,-40M6,-16C0,-16,-17,-3,-17,-3C-17,-2,-17,-2,-16,-1C-16,1,-16,1,-15,0C-14,0,-12,-2,-9,-3C1,-10,-8,6,-12,32C-14,45,-2,39,1,37C4,35,12,29,13,28C14,28,13,27,12,26C12,25,11,26,11,26C8,28,2,32,1,29C0,27,6,7,9,-6C10,-10,12,-17,6,-16Z"),left:["path",{fill:0,d:"M40,-5V5H-20L8,33L0,40L-39,0L0,-40L8,-32L-20,-5H40Z"}],"left-double":L("M-10,-30L-40,0,-10,30M40,-30L10,0,40,30"),link:L("M-7,7C-5,9,-5,12,-7,14C-9,16,-12,16,-14,14C-24,4,-24,-11,-14,-21V-21L4,-39C13,-49,29,-49,39,-39C49,-29,49,-13,39,-4L31,4C32,0,31,-4,29,-8L32,-11C38,-16,38,-26,32,-32C26,-38,16,-38,11,-32L-7,-14C-13,-8,-13,1,-7,7M7,-14C9,-16,12,-16,14,-14C24,-4,24,11,14,21V21L-4,39C-13,49,-29,49,-39,39C-49,29,-49,13,-39,4L-31,-4C-31,0,-31,4,-29,8L-32,11C-38,16,-38,26,-32,32C-26,38,-16,38,-11,32L7,14C13,8,13,-1,7,-7C5,-9,5,-12,7,-14Z"),location:L("M0,-2A13,13,0,0,1,-12,-15A13,13,0,0,1,0,-27A13,13,0,0,1,13,-15A13,13,0,0,1,0,-2M0,-50A35,35,0,0,0,-35,-15C-35,11,0,50,0,50C0,50,35,11,35,-15A35,35,0,0,0,0,-50Z"),logout:L("M25,26V10H-10V-10H25V-26L51,0L25,26M5,-50A10,10,0,0,1,15,-40V-20H5V-40H-40V40H5V20H15V40A10,10,0,0,1,5,50H-40A10,10,0,0,1,-50,40V-40A10,10,0,0,1,-40,-50H5Z"),mail:L("M40,-40H-40A10,10,0,0,0,-50,-30V30A10,10,0,0,0,-40,40H40A10,10,0,0,0,50,30V-30A10,10,0,0,0,40,-40M40,30H-40V-20L0,5L40,-20V30M40,-30L0,-5L-40,-30V-30H40V-30Z"),map:L("M15,35L-15,24V-35L15,-24M43,-45C42,-45,42,-45,42,-45L15,-34L-15,-45L-43,-35C-44,-35,-45,-34,-45,-33V43A3,3,0,0,0,-42,45C-42,45,-42,45,-42,45L-15,34L15,45L43,36C44,35,45,34,45,33V-42A3,3,0,0,0,43,-45Z"),"map-layer":L("M0,20L37,-9L45,-15L0,-50L-45,-15L-37,-9M0,33L-37,4L-45,10L0,45L45,10L37,4L0,33Z"),menu:L("M-45,-30H45V-20H-45V-30M-45,-5H45V5H-45V-5M-45,20H45V30H-45V20Z"),minus:L("M35,5H-35V-5H35V5Z"),"minus-o":L("M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M-25,5H25V-5H-25"),"minus-small":L("M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M25,-5V5H-25V-5H25Z"),more:L("M20,0A10,10,0,0,1,30,-10A10,10,0,0,1,40,0A10,10,0,0,1,30,10A10,10,0,0,1,20,0M-10,0A10,10,0,0,1,0,-10A10,10,0,0,1,10,0A10,10,0,0,1,0,10A10,10,0,0,1,-10,0M-40,0A10,10,0,0,1,-30,-10A10,10,0,0,1,-20,0A10,10,0,0,1,-30,10A10,10,0,0,1,-40,0Z"),movie:L("M44,-49L25,-45L38,-27L48,-29L44,-49M10,-42L0,-40L14,-23L24,-25L10,-42M-15,-37L-24,-35L-11,-18L-1,-20L-15,-37M-39,-32L-44,-32A10,10,0,0,0,-52,-20L-50,-10L-25,-15L-39,-32M-50,-10V40C-50,46,-45,50,-40,50H40C46,50,50,46,50,40V-10H-50Z"),ok:L("M45,-25L-15,35L-42,8L-35,0L-15,21L38,-32L45,-25Z"),pack:["path",{fill:0,d:"M45,23C45,24,44,26,42,27L3,49C2,50,1,50,0,50C-1,50,-2,50,-3,49L-42,27C-44,26,-45,24,-45,23V-22C-45,-24,-44,-26,-42,-27L-3,-49C-2,-50,-1,-50,0,-50C1,-50,2,-50,3,-49L42,-27C44,-26,45,-24,45,-22V23M0,-39L-35,-20V20L0,39L35,20V-20L0,-39M0,-29L24,-15L0,-1L-24,-15L0,-29M25,14L5,26V8L25,-3V14M-5,26L-25,14V-3L-5,8V26Z"}],plug:L("M20,-25V-45H10V-25H-10V-45H-20V-25H-20C-25,-25,-30,-20,-30,-15V13L-12,30V45H13V30L30,13V-15C30,-20,25,-25,20,-25Z"),plus:L("M35,5H5V35H-5V5H-35V-5H-5V-35H5V-5H35V5Z"),"plus-o":L("M0,40C-22,40,-40,22,-40,0C-40,-22,-22,-40,0,-40C22,-40,40,-22,40,0C40,22,22,40,0,40M0,-50A50,50,0,0,0,-50,0A50,50,0,0,0,0,50A50,50,0,0,0,50,0A50,50,0,0,0,0,-50M5,-25H-5V-5H-25V5H-5V25H5V5H25V-5H5V-25Z"),"plus-small":L("M35,35V-35H-35V35H35M35,-45A10,10,0,0,1,45,-35V35A10,10,0,0,1,35,45H-35A10,10,0,0,1,-45,35V-35C-45,-41,-40,-45,-35,-45H35M-5,-25H5V-5H25V5H5V25H-5V5H-25V-5H-5V-25Z"),print:["path",{fill:0,d:"M30,-45H-30V-25H30M35,0A5,5,0,0,1,30,-5A5,5,0,0,1,35,-10A5,5,0,0,1,40,-5A5,5,0,0,1,35,0M20,35H-20V10H20M35,-20H-35A15,15,0,0,0,-50,-5V25H-30V45H30V25H50V-5A15,15,0,0,0,35,-20Z"}],question:L("M-10,35H5V50H-10V35M0,-50C27,-49,38,-22,23,-2C18,3,12,7,8,11C5,15,5,20,5,25H-10C-10,17,-10,10,-7,5C-3,0,3,-3,8,-7C20,-18,17,-34,0,-35A15,15,0,0,0,-15,-20H-30A30,30,0,0,1,0,-50Z"),redo:L("M32,-7C23,-15,11,-20,-2,-20C-26,-20,-45,-5,-52,16L-40,20C-35,4,-20,-7,-2,-7C7,-7,16,-4,23,2L5,20H50V-25L32,-7Z"),refresh:L("M28,-28C21,-35,11,-40,0,-40A40,40,0,0,0,-40,0A40,40,0,0,0,0,40C19,40,34,27,39,10H28C24,22,13,30,0,30A30,30,0,0,1,-30,0A30,30,0,0,1,0,-30C8,-30,16,-27,21,-21L5,-5H40V-40L28,-28Z"),right:["path",{fill:0,d:"M-40,-5V5H20L-7,33L0,40L39,0L0,-40L-7,-32L20,-5H-40Z"}],"right-double":L("M10,-30L40,0,10,30M-40,-30L-10,0,-40,30"),run:L("M23,-32A10,10,0,0,0,33,-42A10,10,0,0,0,23,-52A10,10,0,0,0,13,-42A10,10,0,0,0,23,-32M5,37L10,15L20,25V55H30V18L20,8L23,-7C29,0,39,5,50,5V-5C41,-5,33,-9,28,-17L23,-25C22,-28,18,-30,15,-30C13,-30,13,-29,11,-29L-15,-18V5H-5V-12L4,-15L-4,25L-28,20L-30,30L5,37M-40,-15A5,5,0,0,1,-45,-20A5,5,0,0,1,-40,-25H-25V-15H-40M-35,-35A5,5,0,0,1,-40,-40A5,5,0,0,1,-35,-45H-10V-35H-35M-45,5A5,5,0,0,1,-50,0A5,5,0,0,1,-45,-5H-25V5H-45Z"),search:L("M-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45M-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35Z"),select:L("M35,35H-35V-35H15V-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-5H35M-20,-10L-27,-2L-5,20L45,-30L38,-37L-5,6L-20,-10Z"),sitemap:L("M-15,-50V-20H-5V-5H-35C-41,-5,-45,-1,-45,5V20H-55V50H-25V20H-35V5H-5V20H-15V50H15V20H5V5H35V20H25V50H55V20H45V5C45,-1,41,-5,35,-5H5V-20H15V-50H-15Z"),unselect:L("M35,-45H-35C-41,-45,-45,-41,-45,-35V35A10,10,0,0,0,-35,45H35A10,10,0,0,0,45,35V-35C45,-41,41,-45,35,-45M35,-35V35H-35V-35H35Z"),share:L("M30,20C26,20,23,22,20,24L-15,3C-15,2,-15,1,-15,0C-15,-1,-15,-2,-15,-3L20,-24C23,-22,26,-20,30,-20A15,15,0,0,0,45,-35A15,15,0,0,0,30,-50A15,15,0,0,0,15,-35C15,-34,15,-33,15,-31L-20,-11C-22,-13,-26,-15,-30,-15A15,15,0,0,0,-45,0A15,15,0,0,0,-30,15C-26,15,-22,13,-20,11L16,32C16,33,15,34,15,35C15,43,22,50,30,50C38,50,45,43,45,35A15,15,0,0,0,30,20Z"),show:L("M0,-15A15,15,0,0,0,-15,0A15,15,0,0,0,0,15A15,15,0,0,0,15,0A15,15,0,0,0,0,-15M0,25A25,25,0,0,1,-25,0A25,25,0,0,1,0,-25A25,25,0,0,1,25,0A25,25,0,0,1,0,25M0,-37C-25,-37,-46,-22,-55,0C-46,22,-25,38,0,38C25,38,46,22,55,0C46,-22,25,-37,0,-37Z"),speaker:L("M40,35L33,28C41,21,45,11,45,0C45,-11,41,-21,33,-28L40,-35C49,-26,55,-14,55,0C55,14,49,26,40,35M26,21L19,14C23,11,25,6,25,0C25,-6,23,-11,19,-14L26,-21C32,-16,35,-8,35,0C35,8,32,16,26,21M-40,-45H0A10,10,0,0,1,10,-35V35A10,10,0,0,1,0,45H-40A10,10,0,0,1,-50,35V-35A10,10,0,0,1,-40,-45M-20,-35A10,10,0,0,0,-30,-25A10,10,0,0,0,-20,-15A10,10,0,0,0,-10,-25A10,10,0,0,0,-20,-35M-20,-5A20,20,0,0,0,-40,15A20,20,0,0,0,-20,35A20,20,0,0,0,0,15A20,20,0,0,0,-20,-5M-20,5A10,10,0,0,1,-10,15A10,10,0,0,1,-20,25A10,10,0,0,1,-30,15A10,10,0,0,1,-20,5Z"),"speaker-off":L("M-50,-34L-44,-40L45,49L39,55L31,48C30,49,28,50,25,50H-25C-31,50,-35,46,-35,40V-19L-50,-34M0,30A15,15,0,0,1,-15,15C-15,11,-14,8,-11,5L-18,-2C-22,3,-25,8,-25,15A25,25,0,0,0,0,40C7,40,13,38,17,33L10,26C7,29,4,30,0,30M25,15A25,25,0,0,0,0,-10H-1L-34,-43C-33,-47,-29,-50,-25,-50H25A10,10,0,0,1,35,-40V26L25,16V15M0,-40C-6,-40,-10,-36,-10,-30A10,10,0,0,0,0,-20A10,10,0,0,0,10,-30C10,-36,5,-40,0,-40Z"),"split-vertical":L("M30,20V5H15V50H5V-50H15V-5H30V-20L50,0L30,20M-50,0L-30,20V5H-15V50H-5V-50H-15V-5H-30V-20L-50,0Z"),"split-horizontal":L("M-20,30H-5V15H-50V5H50V15H5V30H20L0,50L-20,30M0,-50L-20,-30H-5V-15H-50V-5H50V-15H5V-30H20L0,-50Z"),star:L("M0,26L31,45L23,10L50,-14L14,-17L0,-50L-14,-17L-50,-14L-23,10L-31,45L0,26Z"),stat:L("M-45,50V-20H-25V50H-45M-10,50V-50H10V50H-10M25,50V10H45V50H25Z"),switch:L("M-45,-40V3L-30,-12L-15,5C-10,10,-10,15,-10,15V45H10V10C10,10,10,5,7,0C5,-5,0,-10,0,-10L-15,-27L-2,-40M30,-40L8,-18L10,-15C10,-15,15,-10,17,-5C18,-3,19,-1,19,1L45,-25"),"tri-down":L("M-23,-17L0,6L23,-17L30,-10L0,20L-30,-10L-23,-17Z"),"tri-left":L("M17,23L-6,0L17,-23L10,-30L-20,0L10,30L17,23Z"),"tri-right":L("M-17,23L6,0L-17,-23L-10,-30L20,0L-10,30L-17,23Z"),"tri-up":L("M-23,17L0,-6L23,17L30,10L0,-20L-30,10L-23,17Z"),twitter:L("M52,-30C48,-28,44,-27,40,-27C44,-29,48,-33,49,-38C45,-36,41,-34,36,-33C32,-37,26,-40,20,-40C8,-40,-1,-30,-1,-19C-1,-17,-1,-15,-1,-14C-19,-15,-34,-23,-45,-36C-47,-33,-48,-29,-48,-25C-48,-18,-44,-11,-38,-7C-42,-7,-45,-8,-48,-10C-48,-10,-48,-10,-48,-10C-48,1,-41,9,-31,11C-33,12,-35,12,-37,12C-38,12,-39,12,-41,12C-38,20,-30,26,-21,26C-28,32,-37,36,-47,36C-49,36,-51,36,-52,35C-43,41,-31,45,-19,45C20,45,42,12,42,-16C42,-17,42,-18,42,-19C46,-22,49,-26,52,-30Z"),undo:L("M3,-20C-11,-20,-23,-15,-32,-7L-50,-25V20H-5L-23,2C-16,-4,-7,-7,3,-7C20,-7,35,4,41,20L52,16C45,-5,26,-20,3,-20Z"),up:L("M-30,30L0,-30,30,30"),"up-double":L("M-30,40L0,10,30,40M-30,-10L0,-40,30,-10"),user:L("M0,-40A20,20,0,0,1,20,-20A20,20,0,0,1,0,0A20,20,0,0,1,-20,-20A20,20,0,0,1,0,-40M0,10C22,10,40,19,40,30V40H-40V30C-40,19,-22,10,0,10Z"),wait:L("M0,-5A5,5,0,0,0,-5,0A5,5,0,0,0,0,5A5,5,0,0,0,5,0A5,5,0,0,0,0,-5M3,-50C25,-50,26,-32,14,-26C9,-24,7,-19,6,-14C8,-13,10,-11,12,-9C30,-19,50,-15,50,3C50,25,32,26,26,14C24,9,19,7,14,6C13,8,11,10,9,12C19,30,15,50,-2,50C-25,50,-25,32,-14,26C-9,24,-7,19,-6,14C-8,13,-10,11,-12,9C-30,19,-50,15,-50,-2C-50,-25,-32,-26,-26,-14C-24,-9,-19,-7,-14,-6C-13,-8,-11,-10,-9,-12C-19,-30,-15,-50,3,-50Z"),"zoom-in":L("M18,10L43,35L35,43L10,18V14L9,12C3,17,-4,20,-12,20A33,33,0,0,1,-45,-12A33,33,0,0,1,-12,-45A33,33,0,0,1,20,-12C20,-4,17,3,12,9L14,10H18M-12,10C0,10,10,0,10,-12C10,-25,0,-35,-12,-35C-25,-35,-35,-25,-35,-12C-35,0,-25,10,-12,10M0,-10H-10V0H-15V-10H-25V-15H-15V-25H-10V-15H0V-10Z"),"zoom-out":L("M18,10H14L12,9C17,3,20,-4,20,-12A33,33,0,0,0,-12,-45A33,33,0,0,0,-45,-12A33,33,0,0,0,-12,20C-4,20,3,17,9,12L10,14V18L35,43L43,35L18,10M-12,10C-25,10,-35,0,-35,-12C-35,-25,-25,-35,-12,-35C0,-35,10,-25,10,-12C10,0,0,10,-12,10M-25,-15H0V-10H-25V-15Z"),warning:L("M0,-50L-55,45H55M0,-30L38,35H-38M-5,-10V10H5V-10M-5,20V30H5V20")},V={add:"plus",back:"left",help:"question",save:"export"},M=0,A=Object.keys(V);M<A.length;M++){var O=A[M],j=V[O];H[O]=H[j]}var E;n(41);!function(e){e[e.B=0]="B",e[e.W=1]="W",e[e.P=2]="P",e[e.PD=3]="PD",e[e.PL=4]="PL",e[e.S=5]="S",e[e.SD=6]="SD",e[e.SL=7]="SL"}(E||(E={}));var S=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).refIcon=void 0,n.visible=void 0,n.timeoutHandle=void 0,n.refIcon=s.createRef(),n.visible=!1,n.timeoutHandle=0,n}return Object(y.a)(t,e),Object(d.a)(t,null,[{key:"isValidIconName",value:function(e){return"undefined"!==typeof H[e]}},{key:"getAllIconNames",value:function(){return Object.keys(H).sort()}}]),Object(d.a)(t,[{key:"triggerVisibleAnimation",value:function(){var e=this,t=this.refIcon.current,n=this.visible;t&&(this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=0),requestAnimationFrame(function(){if(n)t.classList.remove("zero");else{t.classList.add("zero");var r=e.props.onHide;"function"===typeof r&&(e.timeoutHandle=window.setTimeout(r,300))}}))}},{key:"render",value:function(){var e=this,t=this.props,n=w(t.visible,!0),r=w(t.animate,!1),a=w(t.flipH,!1),i=w(t.flipV,!1),o=k(t.size,"28px"),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ok";return Array.isArray(e)?e:H[e]||[]}(t.content),u=C(t.rotate,0),l=t.onClick,h=["tfw-view-icon"],p=P(c,t);if(!p)return null;r&&h.push("animate"),n&&h.push("zero"),"function"===typeof l&&h.push("active");var f="";0!==u&&(f+="rotate(".concat(u,"deg) ")),(a||i)&&(f+="scale(".concat(a?-1:1,",").concat(i?-1:1,")"));var d={width:o,height:o};return f.length>0&&(d.transform=f),requestAnimationFrame(function(){return e.triggerVisibleAnimation()}),this.visible=n,s.createElement("svg",{className:h.join(" "),ref:this.refIcon,viewBox:"-65 -65 130 130",preserveAspectRatio:"xMidYMid",width:o,height:o,onClick:l,style:d},p,s.createElement("g",{strokeWidth:"6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},P(c,t)))}}]),t}(s.Component);function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e[0],a=function(e){var t,n,r=Object(m.a)(e,3),a=(r[0],r[1]),i=r[2];Array.isArray(a)?n=a:"undefined"!==typeof a&&(t=a);Array.isArray(i)?n=i:"undefined"!==typeof i&&(t=i);"undefined"===typeof t&&(t={});"undefined"===typeof n&&(n=[]);return{attributes:t,children:n}}(e),i=a.attributes,o=a.children;if("undefined"===typeof r)return s.createElement("g",null);var c=function(e,t){var n=(e.className||"").split(" ");return["fill","stroke"].forEach(function(r){var a="".concat(e[r]);if("undefined"!==typeof a&&"undefined"!==a){var i="".concat(a).toUpperCase();if(-1!==T.indexOf(i)||-1!==I.indexOf(i)){if(-1!==I.indexOf(a)){var s=t["pen".concat(a)];if("string"===typeof s)return void(-1===T.indexOf(s)?e[r]=s:(delete e[r],n.push("thm-svg-".concat(r).concat(s))))}delete e[r],n.push("thm-svg-".concat(r).concat(i))}}}),e.className=n.join(" ").trim(),e}(Object(v.a)({},i),t);return n.length>0&&(i.key=n),s.createElement(r,c,o.map(function(e,n){return P(e,t,"".concat(n))}))}var T=["P","PL","PD","S","SL","SD"],I="01234567";var N=n(13);function D(e,t){var n=typeof e;return"number"!==n||isNaN(e)?"string"===n?e:t:"".concat(e)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"string"===typeof e?[e]:Array.isArray(e)?"undefined"===typeof n?e:e.map(function(e){return D(e,n)}):t}n(42);var B=function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=w(e.wide,!0),n=D(e.dir,"row"),r={justifyContent:D(e.justifyContent,"space-around"),alignItems:D(e.alignItems,"center"),flexWrap:D(e.wrap,"wrap")},a=["tfw-view-flex","dir-".concat(n)];return a.push.apply(a,Object(N.a)(_(e.classes))),t&&a.push("wide"),s.createElement("div",{className:a.join(" "),style:r},e.children)}}]),t}(s.Component),q={add:function(e){Z||(Z=!0,document.addEventListener("keydown",function(e){"Escape"===e.key&&z()},!0));R.push(e)},fire:z},R=[],Z=!1;function z(){if(0!==R.length){var e=R.pop();"function"===typeof e&&e()}}n(43);var F=n(10),X=(n(44),3),Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(f.a)(this,e),this._x0=void 0,this._y0=void 0,this._time0=void 0,this._x=new Array(X),this._y=new Array(X),this._time=new Array(X),this._cursor=0,this.init(t,n)}return Object(d.a)(e,[{key:"init",value:function(e,t){this._time0=this.now,this._x0=e,this._y0=t,this._x=this._x.fill(this._x0,0,X),this._y=this._y.fill(this._y0,0,X),this._time=this._time.fill(this._time0,0,X)}},{key:"_index",value:function(e){return(this._cursor+e)%X}},{key:"add",value:function(e,t){var n=(this._cursor+X-1)%X;this._time[n]=this.now,this._x[n]=e,this._y[n]=t,this._cursor=n}},{key:"now",get:function(){return Date.now()}},{key:"elapsedTime",get:function(){return this.now-this._time0}},{key:"x",get:function(){return this._x[this._cursor]}},{key:"y",get:function(){return this._y[this._cursor]}},{key:"startX",get:function(){return this._x0}},{key:"startY",get:function(){return this._y0}},{key:"speedX",get:function(){var e=this._cursor,t=this._index(1),n=this._time[e]-this._time[t];return n<=0?0:(this._x[e]-this._x[t])/n}},{key:"speedY",get:function(){var e=this._cursor,t=this._index(1),n=this._time[e]-this._time[t];return n<=0?0:(this._y[e]-this._y[t])/n}},{key:"accelX",get:function(){var e=this._index(0),t=this._time[e],n=this._index(1),r=this._time[n],a=t-r;if(a<=0)return 0;var i=this._index(2),s=r-this._time[i];if(s<=0)return 0;var o=this._x[e],c=this._x[n];return((o-c)/a-(c-this._x[i])/s)/a}},{key:"accelY",get:function(){var e=this._index(0),t=this._time[e],n=this._index(1),r=this._time[n],a=t-r;if(a<=0)return 0;var i=this._index(2),s=r-this._time[i];if(s<=0)return 0;var o=this._y[e],c=this._y[n];return((o-c)/a-(c-this._y[i])/s)/a}}]),e}(),W=function(){function e(){Object(f.a)(this,e),this.fingers=[]}return Object(d.a)(e,[{key:"getIndex",value:function(e){var t=this.fingers.indexOf(e);if(-1!==t)return t;var n=this.fingers.indexOf(null);return-1!==n?(this.fingers[n]=e,n):(this.fingers.push(e),this.fingers.length-1)}},{key:"remove",value:function(e){var t=this.fingers.indexOf(e);-1!==t&&(this.fingers[t]=null)}}]),e}(),G=function(){function e(t,n,r,a){Object(f.a)(this,e),this.element=void 0,this.pointerType="",this.pointerTypeTime=0,this.deviceHandlers={},this.fingers=new W,this.pressed=!1,this.element=t,function(e){(function(e){var t=this,n=this.element,r=this.deviceHandlers,a=function(n){if(t.checkPointerType("touch")){var r=!0,a=!1,i=void 0;try{for(var s,o=n.changedTouches[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;e({x:c.clientX,y:c.clientY,index:t.fingers.getIndex(c.identifier),buttons:1,pointer:"touch",clear:K(n)})}}catch(u){a=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}}};r.touchstart=a,n.addEventListener("touchstart",a,!1)}).call(this,e),function(e){var t=this,n=this.element,r=this.deviceHandlers,a=function(n){t.checkPointerType("mouse")&&(t.pressed=!0,e({x:n.clientX,y:n.clientY,index:0,buttons:n.buttons,pointer:"mouse",clear:K(n)}))};r.mousedown=a,n.addEventListener("mousedown",a,!1)}.call(this,e)}.call(this,n),function(e){(function(e){var t=this,n=this.element,r=this.deviceHandlers,a=function(n){if(t.checkPointerType("touch")){var r=!0,a=!1,i=void 0;try{for(var s,o=n.changedTouches[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;e({x:c.clientX,y:c.clientY,index:t.fingers.getIndex(c.identifier),buttons:1,pointer:"touch",clear:K(n)}),t.fingers.remove(c.identifier)}}catch(u){a=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}}};r.touchend=a,n.addEventListener("touchend",a,!1)}).call(this,e),function(e){var t=this,n=this.element,r=this.deviceHandlers,a=function(n){t.checkPointerType("mouse")&&(t.pressed=!1,console.log("MOUSE UP"),e({x:n.clientX,y:n.clientY,index:0,buttons:n.buttons,pointer:"mouse",clear:K(n)}))};r.mouseup=a,n.addEventListener("mouseup",a,!1)}.call(this,e),function(e){var t=this,n=this.element,r=this.deviceHandlers,a=function(n){t.pressed&&t.checkPointerType("mouse")&&(console.log("MOUSE OUT"),e({x:n.clientX,y:n.clientY,index:0,buttons:n.buttons,pointer:"mouse",clear:K(n)}))};r.mouseout=a,n.addEventListener("mouseout",a,!1)}.call(this,e)}.call(this,r),function(e){(function(e){var t=this,n=this.element,r=this.deviceHandlers,a=function(n){if(t.checkPointerType("touch")){var r=!0,a=!1,i=void 0;try{for(var s,o=n.changedTouches[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;e({x:c.clientX,y:c.clientY,index:t.fingers.getIndex(c.identifier),buttons:1,pointer:"touch",clear:K(n)}),t.fingers.remove(c.identifier)}}catch(u){a=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}}};r.touchmove=a,n.addEventListener("touchmove",a,!1)}).call(this,e),function(e){var t=this,n=this.element,r=this.deviceHandlers,a=function(n){t.checkPointerType("mouse")&&e({x:n.clientX,y:n.clientY,index:0,buttons:n.buttons,pointer:"mouse",clear:K(n)})};r.mousemove=a,n.addEventListener("mousemove",a,!1)}.call(this,e)}.call(this,a)}return Object(d.a)(e,[{key:"checkPointerType",value:function(e){var t=Date.now(),n=t-this.pointerTypeTime;return this.pointerTypeTime=t,0===this.pointerType.length||n>500?(this.pointerType=e,!0):this.pointerType===e}},{key:"detachEvents",value:function(){var e=this.element,t=this.deviceHandlers,n=t.touchstart,r=t.touchend,a=t.touchmove,i=t.mousedown,s=t.mouseup,o=t.mouseout,c=t.mousemove;n&&e.removeEventListener("touchstart",n,!1),r&&e.removeEventListener("touchend",r,!1),a&&e.removeEventListener("touchmove",a,!1),i&&e.removeEventListener("mousedown",i,!1),s&&e.removeEventListener("mouseup",s,!1),o&&e.removeEventListener("mouseout",o,!1),c&&e.removeEventListener("mousemove",c,!1)}}]),e}();function K(e){return function(){e.preventDefault(),e.stopPropagation()}}var U=Symbol("gesture"),Q=0,J=["keydown","keyup","wheel"],$=function(){function e(t){Object(f.a)(this,e),this.handlers=void 0,this.element=void 0,this.pointers=void 0,this.id=void 0,t[U]=this,this.id=Q++,this.element=t,this.handlers={},new G(t,this.handleDown.bind(this),this.handleUp.bind(this),this.handleMove.bind(this)),this.pointers=new Array(3)}return Object(d.a)(e,[{key:"on",value:function(e){var t=this;this.handlers=function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];"wheel"!==a?t[a]=e[a]:t.wheel=function(t){e.wheel({deltaX:t.deltaX,deltaY:t.deltaY,deltaZ:t.deltaZ,x:0,y:0})}}return t}(Object.assign(this.handlers,e)),Object.keys(this.handlers).forEach(function(e){if(-1!==J.indexOf(e)){var n=t.handlers[e];"function"===typeof n&&t.element.addEventListener(e,n,!1)}})}},{key:"hasHandlerFor",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,a=t;r<a.length;r++){var i=a[r];if(this.handlers[i])return!0}return!1}},{key:"getPointer",value:function(e){var t=this.pointers;return"undefined"===typeof t[e]&&(t[e]={isDown:!1,moves:new Y(0,0),rect:{left:0,top:0,width:0,height:0}}),t[e]}},{key:"handleDown",value:function(e){if(!(e.index>2)){var t=this.element,n=this.getPointer(e.index);n.isDown=!0,n.rect=t.getBoundingClientRect();var r=e.x-n.rect.left,a=e.y-n.rect.top;n.moves.init(r,a),this.handlers.down&&this.handlers.down(Object.assign(e,{x:r,y:a,target:t}))}}},{key:"handleUp",value:function(e){if(!(e.index>2)){var t=this.getPointer(e.index);t.isDown=!1;var n=e.x-t.rect.left,r=e.y-t.rect.top;t.moves.add(n,r),this.handlers.up&&this.handlers.up(Object.assign(e,{x:n,y:r,target:this.element})),this.recognizeTap(e,t),this.recognizeSwipe(e,t)}}},{key:"handleMove",value:function(e){if(!(e.index>2)){var t=this.getPointer(e.index),n=e.x-t.rect.left,r=e.y-t.rect.top;t.moves.add(n,r),this.recognizePan(e,t)}}},{key:"recognizeTap",value:function(e,t){if(this.handlers.tap&&!(t.moves.elapsedTime>400)){var n=t.moves;if(!(Math.abs(n.x-n.startX)>16))Math.abs(n.y-n.startY)>16||(e.clear(),this.handlers.tap(Object.assign(e,{x:n.x,y:n.y,target:this.element})))}}},{key:"recognizePan",value:function(e,t){if(t.isDown&&(this.recognizePanDown(e,t),this.recognizePanUp(e,t),this.handlers.pan)){var n=t.moves,r=n.x,a=n.y,i=n.startX,s=n.startY;this.handlers.pan(Object.assign(e,{x:r,y:a,startX:i,startY:s,target:this.element}))}}},{key:"recognizePanDown",value:function(e,t){if(this.hasHandlerFor("pandown","panvertical")){var n=t.moves,r=Math.abs(n.speedX);if(!(n.speedY<r)){var a=Math.abs(n.x-n.startX);n.y-n.startY<a||(this.handlers.pandown&&this.handlers.pandown(Object.assign(e,{x:n.x,y:n.y,target:this.element})),this.handlers.panvertical&&this.handlers.panvertical(Object.assign(e,{x:n.x,y:n.y,target:this.element})))}}}},{key:"recognizePanUp",value:function(e,t){if(this.hasHandlerFor("panup","panvertical")){var n=t.moves,r=Math.abs(n.speedX);if(!(-n.speedY<r)){var a=Math.abs(n.x-n.startX);n.startY-n.y<a||(this.handlers.panup&&this.handlers.panup(Object.assign(e,{x:n.x,y:n.y,target:this.element})),this.handlers.panvertical&&this.handlers.panvertical(Object.assign(e,{x:n.x,y:n.y,target:this.element})))}}}},{key:"recognizeSwipe",value:function(e,t){if(this.recognizeSwipeDown(e,t),this.recognizeSwipeUp(e,t),this.recognizeSwipeLeft(e,t),this.handlers.swipe){var n=t.moves,r=n.x,a=n.y,i=n.startX,s=n.startY;this.handlers.swipe(Object.assign(e,{x:r,y:a,startX:i,startY:s,target:this.element}))}}},{key:"recognizeSwipeDown",value:function(e,t){if(this.hasHandlerFor("swipedown","swipevertical")){var n=t.moves,r=Math.abs(n.speedX);if(!(n.speedY<r)){var a=Math.abs(n.x-n.startX),i=n.y-n.startY;if(!(i<a))i/n.elapsedTime<.1||(this.handlers.swipedown&&this.handlers.swipedown(Object.assign(e,{x:n.x,y:n.y,target:this.element})),this.handlers.swipevertical&&this.handlers.swipevertical(Object.assign(e,{x:n.x,y:n.y,target:this.element})))}}}},{key:"recognizeSwipeUp",value:function(e,t){if(this.hasHandlerFor("swipeup","swipevertical")){var n=t.moves,r=Math.abs(n.speedX);if(!(n.speedY<r)){var a=Math.abs(n.x-n.startX),i=n.y-n.startY;if(!(i<a))i/n.elapsedTime<.1||(this.handlers.swipeup&&this.handlers.swipeup(Object.assign(e,{x:n.x,y:n.y,target:this.element})),this.handlers.swipevertical&&this.handlers.swipevertical(Object.assign(e,{x:n.x,y:n.y,target:this.element})))}}}},{key:"recognizeSwipeLeft",value:function(e,t){if(this.hasHandlerFor("swipeleft","swipehorizontal")){var n=t.moves;if(!(-n.speedX<Math.abs(n.speedY))){var r=n.startX-n.x;if(!(r<Math.abs(n.y-n.startY)))r/n.elapsedTime<.1||(this.handlers.swipeleft&&this.handlers.swipeleft(Object.assign(e,{x:n.x,y:n.y,target:this.element})),this.handlers.swipehorizontal&&this.handlers.swipehorizontal(Object.assign(e,{x:n.x,y:n.y,target:this.element})))}}}},{key:"identifier",get:function(){return this.id}}]),e}(),ee=function(e){var t=e[U];return t||(t=new $(e),e[U]=t,t)};n(45);var te=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000000";Object(f.a)(this,e),this.R=void 0,this.G=void 0,this.B=void 0,this.H=void 0,this.S=void 0,this.L=void 0,this.A=void 0,this.R=0,this.G=0,this.B=0,this.H=0,this.S=0,this.L=0,this.A=1,this.parse(t)}return Object(d.a)(e,[{key:"parse",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000000").trim().toUpperCase();return!!this.parseHexa.call(this,e)||(!!this.parseRGB.call(this,e)||(!!this.parseRGBA.call(this,e)||!!this.parseHSL.call(this,e)))}},{key:"luminance",value:function(){return.2126*this.R+.7152*this.G+.0722*this.B}},{key:"luminanceStep",value:function(){return this.luminance()<.6?0:1}},{key:"stringify",value:function(){var e=he(255*this.R)+he(255*this.G)+he(255*this.B);return this.A<1&&(e+=he(255*this.A)),"#".concat(e)}},{key:"copy",value:function(){var t=new e;return t.R=this.R,t.G=this.G,t.B=this.B,t.A=this.A,t.H=this.H,t.S=this.S,t.L=this.L,t}},{key:"hsl2rgb",value:function(){var e=6*this.H,t=this.S,n=this.L,r=(1-Math.abs(2*n-1))*t,a=r*(1-Math.abs(e%2-1)),i=0,s=0,o=0;e<3?e<1?(i=r,s=a,o=0):e<2?(i=a,s=r,o=0):(i=0,s=r,o=a):e<4?(i=0,s=a,o=r):e<5?(i=a,s=0,o=r):(i=r,s=0,o=a);var c=n-.5*r;this.R=i+c,this.G=s+c,this.B=o+c}},{key:"rgb2hsl",value:function(){var e=this.R,t=this.G,n=this.B,r=Math.min(e,t,n),a=Math.max(e,t,n),i=a-r;this.L=.5*(a+r),i<1e-6?(this.H=0,this.S=0):(this.S=i/(1-Math.abs(2*this.L-1)),this.H=a===e?t>=n?ne*((t-n)/i):1-ne*((n-t)/i):a===t?ne*(2+(n-e)/i):ne*(4+(e-t)/i))}},{key:"parseHexa",value:function(e){if("#"!==e.charAt(0))return!1;var t=0,n=0,r=0,a=1;switch(e.length){case 4:t=parseInt(e.charAt(1),16)*re,n=parseInt(e.charAt(2),16)*re,r=parseInt(e.charAt(3),16)*re;break;case 5:t=parseInt(e.charAt(1),16)*re,n=parseInt(e.charAt(2),16)*re,r=parseInt(e.charAt(3),16)*re,a=parseInt(e.charAt(4),16)*re;break;case 7:t=parseInt(e.substr(1,2),16)*ie,n=parseInt(e.substr(3,2),16)*ie,r=parseInt(e.substr(5,2),16)*ie;break;case 9:t=parseInt(e.substr(1,2),16)*ie,n=parseInt(e.substr(3,2),16)*ie,r=parseInt(e.substr(5,2),16)*ie,a=parseInt(e.substr(7,2),16)*ie}return isNaN(t)||isNaN(n)||isNaN(r)||isNaN(a)?this.R=this.G=this.B=this.A=0:(this.R=t,this.G=n,this.B=r,this.A=a),!0}},{key:"parseRGB",value:function(e){var t=oe.exec(e);return!!t&&(this.R=le(parseInt(t[1],10)*ie),this.G=le(parseInt(t[2],10)*ie),this.B=le(parseInt(t[3],10)*ie),this.A=1,!0)}},{key:"parseRGBA",value:function(e){var t=ce.exec(e);return!!t&&(this.R=le(parseInt(t[1],10)*ie),this.G=le(parseInt(t[2],10)*ie),this.B=le(parseInt(t[3],10)*ie),this.A=le(parseFloat(t[4])),!0)}},{key:"parseHSL",value:function(e){var t=ue.exec(e);return!!t&&(this.H=le(parseInt(t[1],10)*se),this.S=le(parseInt(t[2],10)*ae),this.L=le(parseInt(t[3],10)*ae),this.A=1,this.hsl2rgb(),!0)}}],[{key:"isValid",value:function(e){if("string"!==typeof e)return!1;if("#"!==e.charAt(0))return!1;switch(e.length){case 4:case 5:case 7:case 9:return!0}return!1}},{key:"normalize",value:function(t){return new e(t).stringify()}},{key:"luminance",value:function(t){return new e(t).luminance()}},{key:"luminanceStep",value:function(t){return new e(t).luminanceStep()}},{key:"mix",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,a=1-r;return e.newRGBA(r*n.R+a*t.R,r*n.G+a*t.G,r*n.B+a*t.B,r*n.A+a*t.A)}},{key:"newBlack",value:function(){return e.newRGB(0,0,0)}},{key:"newWhite",value:function(){return e.newRGB(1,1,1)}},{key:"newRGB",value:function(t,n,r){var a=new e;return a.R=t,a.G=n,a.B=r,a.A=1,a}},{key:"newRGBA",value:function(t,n,r,a){var i=new e;return i.R=t,i.G=n,i.B=r,i.A=a,i}}]),e}(),ne=1/6,re=1/15,ae=1/99,ie=1/255,se=1/359,oe=/^RGB[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/,ce=/^RGBA[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)[^0-9\.]+([0-9\.]+)/,ue=/^HSL[\s\(]+([0-9]+)[^0-9]+([0-9]+)[^0-9]+([0-9]+)/;function le(e){return e<0?0:e>1?1:e}function he(e){var t=Math.floor(e).toString(16);return t.length<2&&(t="0"+t),t}var pe={register:ve,apply:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;if(!me.css[e])return void console.error("This theme has not been registered: ",e);var t=document.body;"string"===typeof me.current&&t.classList.remove("dom-theme-".concat(me.current));me.current=e,t.classList.add("dom-theme-".concat(me.current))},get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return me.vars[e]},bg0:Le("bg0"),bg1:Le("bg1"),bg2:Le("bg2"),bg3:Le("bg3"),bgP:Le("bgP"),bgPD:Le("bgPD"),bgPL:Le("bgPL"),bgS:Le("bgS"),bgSD:Le("bgSD"),bgSL:Le("bgSL"),black:Le("black"),white:Le("white"),isDark:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""===e)return function(){var e=me.vars[me.current||"default"],t=e.$isDark;if("boolean"===typeof t)return t;var n=new te(e.bg0),r=new te(e.bg1),a=new te(e.bg2),i=new te(e.bg3),s=te.mix(te.mix(n,r),te.mix(a,i));return e.$isDark=!s.luminanceStep(),e.$isDark}();var t=me.vars[me.current||"default"],n="$isDark/".concat(e),r=t[n];if("boolean"===typeof r)return r;var a=new te(t[e]);return t[n]=!a.luminanceStep(),t[n]},setFontSize:function(e){var t=document.documentElement;t.classList.remove("thm-font-size-small"),t.classList.remove("thm-font-size-medium"),t.classList.remove("thm-font-size-large"),t.classList.add("thm-font-size-".concat(e))},normalize:we},fe=new te,de=["0","1","2","3","P","PD","PL","S","SD","SL"],me={css:{},vars:{},current:null};function ve(e,t){var n=we(t);me.vars[e]=n;var r=function(e,t){var n="body.dom-theme-"+e+"{\n";de.forEach(function(e){var r=t["bg".concat(e)];n+="  --thm-bg".concat(e,": ").concat(r,";\n");var a=!0,i=!1,s=void 0;try{for(var o,c=be[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var u=o.value;n+="  --thm-bg".concat(e,"-").concat(u,": ").concat(r).concat(u).concat(u,";\n")}}catch(b){i=!0,s=b}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}fe.parse(r);var l=fe.luminanceStep()?t.black:t.white;n+="  --thm-fg".concat(e,": ").concat(l,";\n");var h=!0,p=!1,f=void 0;try{for(var d,m=be[Symbol.iterator]();!(h=(d=m.next()).done);h=!0){var v=d.value;n+="  --thm-fg".concat(e,"-").concat(v,": ").concat(l).concat(v).concat(v,";\n")}}catch(b){p=!0,f=b}finally{try{h||null==m.return||m.return()}finally{if(p)throw f}}}),t.white=He(t.white),t.black=He(t.black),n+="  --thm-white: ".concat(t.white,";\n"),n+="  --thm-black: ".concat(t.black,";\n");var r=!0,a=!1,i=void 0;try{for(var s,o=be[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value;n+="  --thm-white-".concat(c,": ").concat(t.white).concat(c).concat(c,";\n"),n+="  --thm-black-".concat(c,": ").concat(t.black).concat(c).concat(c,";\n")}}catch(u){a=!0,i=u}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n+="}\n"}(e,n);r+=function(e,t){var n="";return de.forEach(function(r){n+="body.dom-theme-"+e+".thm-bg"+r+" { background-color: "+t["bg".concat(r)]+" }\n",n+="body.dom-theme-"+e+" .thm-fg"+r+" { color: "+t["fg".concat(r)]+" }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+" { background-color: "+t["bg".concat(r)]+" }\n",n+="body.dom-theme-".concat(e," .thm-bg").concat(r,"-text")+" { background-color: "+t["fg".concat(r)]+" }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-bottom { background: linear-gradient(to top,"+t["bg".concat(r)]+",transparent) }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-top { background: linear-gradient(to bottom,"+t["bg".concat(r)]+",transparent) }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-left { background: linear-gradient(to right,"+t["bg".concat(r)]+",transparent) }\n",n+="body.dom-theme-"+e+" .thm-bg"+r+"-right { background: linear-gradient(to left,"+t["bg".concat(r)]+",transparent) }\n",isNaN(parseInt(r))&&(n+="body.dom-theme-"+e+" .thm-svg-fill"+r+" { fill: "+t["bg".concat(r)]+" }\n",n+="body.dom-theme-"+e+" .thm-svg-stroke"+r+" { stroke: "+t["bg".concat(r)]+" }\n")}),n}(e,n),r+=function(e,t){fe.parse(t.bg2);var n=fe.luminance()<.6?ke(t.white,4):ke(t.black,6),r="";return Object.keys(ge).forEach(function(t){var a=parseInt(t,10);ge[t].forEach(function(t){r+="body.dom-theme-".concat(e," .thm-ele-").concat(t," {\n  box-shadow: 0 ").concat(a,"px ").concat(2*a,"px ").concat(n,"\n}\n")})}),r}(e,n),r+=function(e,t){for(var n="",r=function(r){de.forEach(function(a){for(var i,s,o="fg".concat(a),c="bg".concat(a),u=t[o],l=t[c],h=".thm-bg"+a,p=".thm-fg"+a,f=1;f<=r;f++){for(var d=[],m=[],v=[],b=1;b<=r;b++)v.push(f===b?h:"*"),m.push(f===b?h:"*"),d.push(f===b?p:"*"),b===r&&(v.push(v.pop()+".thm-fg"),d.push(d.pop()+p));n+="body.dom-theme-"+e+" "+v.join(" > ")+" { color: "+u+" }\n",n+="body.dom-theme-"+e+" "+(i=v.join(" > "),s=".thm-fg",i.substr(0,i.length-s.length))+" { color: "+u+" }\n",n+="body.dom-theme-"+e+" "+d.join(" > ")+" { color: "+l+" }\n",n+="body.dom-theme-"+e+" "+m.join(" > ")+" .thm-svg-fill0 { fill: "+u+" }\n",n+="body.dom-theme-"+e+" "+m.join(" > ")+" .thm-svg-stroke0 { stroke: "+u+" }\n"}})},a=1;a<=10;a++)r(a);return n}(e,n);var a=me.css[e];a||(a=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(a),me.css[e]=a),a.textContent=r}var be="123456789ABCDE";var ge={0:["none"],2:["button","card"],4:["bar"],6:["floating"],8:["button:active","button-raised","card-raised"],9:["sunmenu-0"],10:["sunmenu-1"],11:["sunmenu-2"],12:["floating:active"],16:["nav"],24:["dialog"]};function ye(e){var t="string"===typeof e.bg0,n="string"===typeof e.bg1,r="string"===typeof e.bg2,a="string"===typeof e.bg3;if(!(t&&n&&r&&a)){if(!t&&!n&&!r&&!a)return e.bg0="#E0E0E0",e.bg1="#F5F5F5",e.bg2="#FAFAFA",void(e.bg3="#FFF");var i;!t||n||r||a||(e.bg3=(i=e.bg0,fe.parse(i),fe.rgb2hsl(),fe.L=Math.min(1,fe.L+.3),fe.hsl2rgb(),fe.stringify()),a=!0),t||n||r||!a||(e.bg0=function(e){return fe.parse(e),fe.rgb2hsl(),fe.L=Math.max(0,fe.L-.15),fe.hsl2rgb(),fe.stringify()}(e.bg3),a=!0);var s=new te(e.bg0),o=s.R,c=s.G,u=s.B,l=new te(e.bg3),h=l.R,p=l.G,f=l.B,d=te.newRGB((2*o+h)/3,(2*c+p)/3,(2*u+f)/3),m=te.newRGB((o+2*h)/3,(c+2*p)/3,(u+2*f)/3);e.bg1=d.stringify(),e.bg2=m.stringify()}}function we(e){return"undefined"===typeof e&&(e={}),ye(e),"string"!==typeof e.bgP&&(e.bgP="#3E50B4"),"string"!==typeof e.bgPD&&(e.bgPD=Ce(e.bgP)),"string"!==typeof e.bgPL&&(e.bgPL=xe(e.bgP)),"string"!==typeof e.bgS&&(e.bgS=function(e){fe.parse(e),fe.rgb2hsl(),fe.H=fe.H+.5,fe.H>1&&fe.H--;return fe.hsl2rgb(),fe.stringify()}(e.bgP)),"string"!==typeof e.bgSD&&(e.bgSD=Ce(e.bgS)),"string"!==typeof e.bgSL&&(e.bgSL=xe(e.bgS)),"string"!==typeof e.white&&(e.white="#fff"),"string"!==typeof e.black&&(e.black="#000"),de.forEach(function(t){var n=e["bg".concat(t)]||"#000";fe.parse(n);var r=fe.luminance();e["fg".concat(t)]=r<.6?e.white:e.black}),e}function Ce(e){return fe.parse(e),fe.rgb2hsl(),fe.L*=.75,fe.hsl2rgb(),fe.stringify()}function xe(e){return fe.parse(e),fe.rgb2hsl(),fe.L=.4+.6*fe.L,fe.hsl2rgb(),fe.stringify()}function ke(e,t){return e.length<5?e+t:e+t+t}function Le(e){return function(){return me.vars[me.current||"default"][e]}}function He(e){return new te(e).stringify()}ve("default",{bgP:"#1e90ff"});var Ve=function(){};n(46);var Me=function(){function e(t){Object(f.a)(this,e),this._element=void 0,this._enabled=!0,this.color="#000",this.accent=!1,this.onTap=void 0,this.element=t.element,this.enabled=w(t.enabled,!0),this.color=D(t.color,""),this.onTap=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve;return"function"===typeof e?e:t}(t.onTap)}return Object(d.a)(e,[{key:"fire",value:function(){if(this.enabled){var e=this.onTap;"function"===typeof e&&e()}}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}},{key:"element",get:function(){return this._element},set:function(e){var t=this;"undefined"!==typeof e&&ee(e).on({keydown:function(e){if(t.enabled){var n=e.key;" "!==n&&"Enter"!==n||(e.preventDefault(),e.stopPropagation(),t.fire())}},down:function(e){t.enabled},tap:function(n){if(t.enabled){t.fire();var r=e.getBoundingClientRect(),a=window.getComputedStyle(e),i=function(e){var t=document.createElement("div");return t.className="tfw-behavior-touchable",t.style.left="".concat(e.left,"px"),t.style.top="".concat(e.top,"px"),t.style.width="".concat(e.width,"px"),t.style.height="".concat(e.height,"px"),document.body.appendChild(t),t}(r);i.style.borderRadius=a.getPropertyValue("border-radius");var s=n.x||0,o=n.y||0,c=Math.max(s,r.width-s),u=Math.max(o,r.height-o),l=Math.ceil(1.1*Math.sqrt(c*c+u*u)),h=document.createElement("div");i.appendChild(h),h.style.left="".concat(s-l,"px"),h.style.top="".concat(o-l,"px"),h.style.width="".concat(2*l,"px"),h.style.height="".concat(2*l,"px"),t.color.length>0?h.style.background=t.color:h.style.background=pe.isDark()?"#fff":"#000",window.setTimeout(function(){return h.className="open"}),window.setTimeout(function(){return document.body.removeChild(i)},500)}}})}}]),e}();function Ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return"undefined"===typeof e?t:Array.isArray(e)?e:[e]}var Oe,je=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).touchable=void 0,n.ref=void 0,n.handleClick=n.handleClick.bind(Object(F.a)(Object(F.a)(n))),n.touchable=new Me({onTap:n.handleClick}),n.ref=s.createRef(),n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.ref.current;e&&(this.touchable.element=e)}},{key:"handleClick",value:function(){var e=this.props.onClick;"function"===typeof e&&e(this.props.tag)}},{key:"render",value:function(){var e=this.props,t=D(e.label,""),n=D(e.icon,""),r=w(e.wide,!1),a=w(e.wait,!1),i=w(e.flat,!1),o=w(e.small,!1),c=!a&&w(e.enabled,!0),u=w(e.warning,!1),l=["tfw-view-button"].concat(Ae(e.classes));return r&&l.push("wide"),i?(l.push("flat"),l.push(u?"thm-fgS":"thm-fgP")):(c&&l.push("thm-ele-button"),l.push(u?"thm-bgS":"thm-bgP")),o&&l.push("small"),0===t.length&&l.push("floating"),this.touchable.enabled=c,s.createElement("button",{ref:this.ref,className:l.join(" "),disabled:!c},n.length>0?s.createElement(S,{content:n,animate:a,size:"".concat(o?1.375:1.875,"rem")}):null,t.length>0?s.createElement("div",{className:"text"}," ",t," "):null)}}]),t}(s.Component),Ee=n(15),Se=localStorage.getItem("CurrentLanguage")||navigator.language.split("-")[0],Pe=function(){function e(t){Object(f.a)(this,e),this.translations=t}return Object(d.a)(e,[{key:"translate",value:function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.translations[Se]){var a=this.translations[Se][e];if(a)return Te(a,n)}for(var i=Object.keys(this.translations),s=0,o=i;s<o.length;s++){var c=o[s],u=this.translations[c][e];if("string"===typeof u)return Te(u,n)}return console.error('Missing translation for item "'.concat(e,'"!'),n),""}catch(l){throw Error('Error while looking for a translation of "'.concat(e,'":\n').concat(l))}}}],[{key:"make",value:function(t){var n=new e(t);return n.translate.bind(n)}},{key:"toIntl",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?"string"!==typeof t?t:Object(Ee.a)({},n||e.lang,t):Object(Ee.a)({},n||e.lang,"")}},{key:"toText",value:function(t,n){if(!t)return"";if("string"===typeof t)return t;"undefined"===typeof n&&(n=e.lang);var r=t[n];if("string"===typeof r)return r;var a=t[Object.keys(t)[0]];return"string"===typeof a?a:""}},{key:"addTextToIntl",value:function(t,n,r){(r=e.toIntl(r,t))[t]=n;for(var a={},i=0,s=Object.keys(r);i<s.length;i++){var o=s[i],c=r[o];0!==c.trim().length&&(a[o]=c)}return a}},{key:"lang",get:function(){return Se},set:function(e){if("string"===typeof e){var t=e.split("-")[0];Se=t,localStorage.setItem("CurrentLanguage",t)}}}]),e}();function Te(e,t){for(var n="",r=0,a=Oe.Text,i=-1,s=0;s<e.length;s++){var o=e.charAt(s);switch(a){case Oe.Text:"\\"===o?(a=Oe.Escape,n+=e.substr(r,s-r),r=s+1):"$"===o&&(a=Oe.Placeholder,n+=e.substr(r,s-r),r=s+2);break;case Oe.Escape:a=Oe.Text;break;case Oe.Placeholder:if(a=Oe.Text,i=parseInt(o,10),isNaN(i))throw Error("Parsing error at position ".concat(s,' for translation "').concat(e,'"!\nEscape "$" if you don\'t want to use a placeholder.'));n+=t[i-1]||"";break;default:a=Oe.Text}}return n+e.substr(r)}!function(e){e[e.Text=0]="Text",e[e.Escape=1]="Escape",e[e.Placeholder=2]="Placeholder"}(Oe||(Oe={}));var Ie={alert:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(t){var n=new De({onClose:t,content:e,maxWidth:420});n.footer=s.createElement(je,{icon:"close",label:Ne("close"),flat:!0,onClick:t}),n.show()})},confirm:function(e,t){return new Promise(function(n){var r=new De({title:e,content:t,maxWidth:420}),a=function(e){r.hide(),n(e)};r.onClose=function(){return a(!1)};var i=s.createElement(je,{key:"cancel",flat:!0,label:Ne("cancel"),onClick:function(){return a(!1)}}),o=s.createElement(je,{key:"ok",warning:!0,label:e,onClick:function(){return a(!0)}});r.footer=[i,o],r.show()})},show:function(e){var t=new De(e);return t.show(),t},wait:function(e,t){return _e.apply(this,arguments)}},Ne=Pe.make(n(47)),De=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(f.a)(this,e),this._screen=void 0,this._options=void 0,this.footer=null,this._options=Object.assign({closeOnEscape:!0,footer:s.createElement(je,{icon:"close",label:Ne("close"),flat:!0,onClick:function(){return t.hide()}})},n),this._options.closeOnEscape=w(this._options.closeOnEscape,!0),this.footer=this._options.footer||null;var r=document.createElement("div");r.className="tfw-factory-dialog",document.body.appendChild(r),this._screen=r,this.hide=this.hide.bind(this),this._options.closeOnEscape&&q.add(function(){return t._hide()})}return Object(d.a)(e,[{key:"show",value:function(){var e=this,t=this._options,n=D(t.title,"").trim(),r=D(t.icon,"").trim(),a=this.footer?s.createElement("footer",{className:"thm-bg2 thm-ele-button"},this.footer):null,i=null;n.length>0&&(i=s.createElement("header",{className:"thm-bgPD"},r.length>0?s.createElement(S,{content:r}):null,s.createElement("div",null,n))),u.a.render(s.createElement("div",{className:"thm-ele-dialog thm-bg1",style:{maxWidth:"number"===typeof t.maxWidth?"".concat(t.maxWidth,"px"):"auto"}},i,s.createElement("div",null,t.content),a),this._screen),setTimeout(function(){return e._screen.classList.add("show")},10)}},{key:"hide",value:function(){this._options.closeOnEscape?q.fire():this._hide()}},{key:"_hide",value:function(){var e=this._screen;e.classList.remove("show"),setTimeout(function(){document.body.removeChild(e)},200);var t=this._options.onClose;"function"===typeof t&&requestAnimationFrame(t)}},{key:"onClose",set:function(e){this._options.onClose=e}}]),e}();function _e(){return(_e=Object(i.a)(a.a.mark(function e(t,n){var r,i,o,c=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>2&&void 0!==c[2])||c[2]){e.next=5;break}return e.next=4,n;case 4:return e.abrupt("return",e.sent);case 5:return r=s.createElement(B,{dir:"row",justifyContent:"flex-start",alignItems:"center"},s.createElement(S,{content:"wait",animate:!0}),s.createElement("div",null,t)),(i=new De({content:r,footer:null,closeOnEscape:!1})).show(),o=i.hide.bind(i),e.abrupt("return",new Promise(function(e,t){n.then(function(t){o(),e(t)},function(e){console.error(e),o(),t(e)})}));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}n(48),n(49);var Be=function(e){function t(e){return Object(f.a)(this,t),Object(b.a)(this,Object(g.a)(t).call(this,e))}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.label;return"string"!==typeof e||0===e.trim().length?null:o.a.createElement("label",{className:"tfw-view-Label",htmlFor:this.props.htmlFor},this.props.label)}}]),t}(o.a.Component),qe=(Pe.make(n(50)),function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(b.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).input=s.createRef(),n.handleKeyDown=function(e){if("enter"===e.key){e.preventDefault(),e.stopPropagation();var t=n.props,r=t.onEnterPressed,a=t.value;"function"===typeof r&&r(a)}},n.onFocus=function(e){var t=n.input?n.input.current:null;t&&t.classList&&(t.classList.remove("thm-bg3"),t.classList.add("thm-bgSL"),"number"!==n.props.type&&t.setSelectionRange(0,t.value.length))},n.onBlur=function(e){var t=n.input?n.input.current:null;t&&t.classList&&(t.classList.add("thm-bg3"),t.classList.remove("thm-bgSL"))},n.onChange=function(e){var t=n.props.onChange;"function"===typeof t&&(e.preventDefault(),t(e.target.value))},n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=D(e.type,"text"),n=D(e.label,""),r=D(e.value,""),a=D(e.placeholder,""),i=w(e.wide,!1),o=w(e.focus,!1),c=w(e.enabled,!0),u=Math.max(1,C(e.size,8)),l=k(e.width,"auto"),h="tfw-view-input-".concat(Re++),p=["tfw-view-input"];i&&p.push("wide");var f="thm-ele-button "+(c?"thm-bg3":"thm-bg0");return s.createElement("div",{className:p.join(" "),style:{width:l,maxWidth:l}},s.createElement(Be,{htmlFor:h,label:n}),s.createElement("input",{ref:this.input,autoFocus:o,className:f,placeholder:a,disabled:!c,type:t,id:h,size:u,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onKeyDown:this.handleKeyDown,value:r}))}}]),t}(s.Component)),Re=0;var Ze={local:ze(window.localStorage),session:ze(window.sessionStorage)};function ze(e){return{get:function(t,n){var r=e.getItem(t);if(null===r)return n;try{return JSON.parse(r)}catch(a){return console.error('storage["'.concat(t,'"] is not parsable as a JSON object!\n')+'Its value is: "'.concat(r,'".\nThis item will be deleted.')),e.removeItem(t),n}},set:function(t,n){e.setItem(t,JSON.stringify(n))},del:function(t){e.removeItem(t)}}}var Fe=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleChange=function(e){n.setState({hostName:e});var t=n.props.onChange;"function"===typeof t&&(t(e),Ze.local.set("brayns-host-name",e))},n.handleEnterPressed=function(){var e=n.props.onEnterPressed;"function"===typeof e&&e()},n.state={hostName:Ze.local.get("brayns-host-name","http://r1i7n13.bbp.epfl.ch:5000")},n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.handleChange(this.state.hostName)}},{key:"render",value:function(){return o.a.createElement("div",{className:"webBrayns-view-inputHostName"},o.a.createElement(qe,{wide:!0,focus:!0,label:"Brayns host name",value:this.state.hostName,onEnterPressed:this.handleEnterPressed,onChange:this.handleChange}))}}]),t}(o.a.Component),Xe=5e3,Ye={getHostName:function(e){return We.apply(this,arguments)},connect:function(e){return Ge.apply(this,arguments)}};function We(){return(We=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(i.a)(a.a.mark(function e(n){var r,s,c,u,l,h,f;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}if(r=p.parse(),"string"!==typeof(s=r.host)){e.next=6;break}return n(s),e.abrupt("return");case 6:c="",u=!1,l=function(){u=!0,f.hide(),n(c)},h=o.a.createElement(Fe,{onEnterPressed:l,onChange:function(e){return c=e}}),f=Ie.show({closeOnEscape:!0,content:h,footer:o.a.createElement(je,{label:"Connect to Brayns Service",onClick:l,icon:"plug"}),icon:"plug",title:"Connect to Brayns Service",onClose:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ie.alert(o.a.createElement("p",null,"Web-Brayns absolutly needs to be connected to the Brayns server..."));case 4:location.reload(),n("");case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()});case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ge(){return(Ge=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=window.setTimeout(n,Xe),a=new h.a(t);a.ready.subscribe(function(t){console.info("isReady=",t),t&&(window.clearTimeout(r),e(a))},function(e){console.error("err=",e)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ke={addClipPlane:function(e){return Ue.apply(this,arguments)},addLightAmbient:function(e){return Qe.apply(this,arguments)},addLightDirectional:function(e){return Je.apply(this,arguments)},addLightQuad:function(e){return $e.apply(this,arguments)},addLightSphere:function(e){return et.apply(this,arguments)},addLightSpot:function(e){return tt.apply(this,arguments)},addModel:function(e){return nt.apply(this,arguments)},chunk:function(e){return rt.apply(this,arguments)},clearLights:function(){return at.apply(this,arguments)},getAnimationParameters:function(){return it.apply(this,arguments)},getApplicationParameters:function(){return st.apply(this,arguments)},getCamera:function(){return ot.apply(this,arguments)},getCameraParams:function(){return ct.apply(this,arguments)},getClipPlanes:function(){return ut.apply(this,arguments)},getEnvironmentMap:function(){return lt.apply(this,arguments)},getInstances:function(e,t){return ht.apply(this,arguments)},getLights:function(){return pt.apply(this,arguments)},getLoaders:function(){return ft.apply(this,arguments)},getModelProperties:function(e){return dt.apply(this,arguments)},getModelTransferFunction:function(e){return mt.apply(this,arguments)},getRenderer:function(){return vt.apply(this,arguments)},getRendererParams:function(){return bt.apply(this,arguments)},getScene:function(){return gt.apply(this,arguments)},getStatistics:function(){return yt.apply(this,arguments)},getVolumeParameters:function(){return wt.apply(this,arguments)},imageJpeg:function(){return Ct.apply(this,arguments)},inspect:function(e){return xt.apply(this,arguments)},loadersSchema:function(){return kt.apply(this,arguments)},modelPropertiesSchema:function(e){return Lt.apply(this,arguments)},quit:function(){return Ht.apply(this,arguments)},removeClipPlanes:function(e){return Vt.apply(this,arguments)},removeLights:function(e){return Mt.apply(this,arguments)},removeModel:function(e){return At.apply(this,arguments)},requestModelUpload:function(e){return Ot.apply(this,arguments)},resetCamera:function(){return jt.apply(this,arguments)},schema:function(e){return Et.apply(this,arguments)},setAnimationParameters:function(e){return St.apply(this,arguments)},setApplicationParameters:function(e){return Pt.apply(this,arguments)},setCamera:function(e){return Tt.apply(this,arguments)},setCameraParams:function(e){return It.apply(this,arguments)},setEnvironmentMap:function(e){return Nt.apply(this,arguments)},setModelProperties:function(e){return Dt.apply(this,arguments)},setModelTransferFunction:function(e){return _t.apply(this,arguments)},setRenderer:function(e){return Bt.apply(this,arguments)},setRendererParams:function(e){return qt.apply(this,arguments)},setScene:function(e){return Rt.apply(this,arguments)},setVolumeParameters:function(e){return Zt.apply(this,arguments)},snapshot:function(e){return zt.apply(this,arguments)},updateClipPlane:function(e){return Ft.apply(this,arguments)},updateInstance:function(e){return Xt.apply(this,arguments)},updateModel:function(e){return Yt.apply(this,arguments)}};function Ue(){return(Ue=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("add-clip-plane",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qe(){return(Qe=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("add-light-ambient",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Je(){return(Je=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("add-light-directional",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $e(){return($e=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("add-light-quad",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function et(){return(et=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("add-light-sphere",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tt(){return(tt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("add-light-spot",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nt(){return(nt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("add-model",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rt(){return(rt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("chunk",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(){return(at=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("clear-lights");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function it(){return(it=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-animation-parameters");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function st(){return(st=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-application-parameters");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ot(){return(ot=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-camera");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ct(){return(ct=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-camera-params");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ut(){return(ut=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-clip-planes");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function lt(){return(lt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-environment-map");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ht(){return(ht=Object(i.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-instances",t,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pt(){return(pt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-lights");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ft(){return(ft=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-loaders");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dt(){return(dt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-model-properties",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mt(){return(mt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-model-transfer-function",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vt(){return(vt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-renderer");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bt(){return(bt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-renderer-params");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gt(){return(gt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-scene");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(){return(yt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-statistics");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wt(){return(wt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-volume-parameters");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ct(){return(Ct=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("image-jpeg");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xt(){return(xt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("inspect",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kt(){return(kt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("loaders-schema");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Lt(){return(Lt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("model-properties-schema",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(){return(Ht=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("quit");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vt(){return(Vt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("remove-clip-planes",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mt(){return(Mt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("remove-lights",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function At(){return(At=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("remove-model",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ot(){return(Ot=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("request-model-upload",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jt(){return(jt=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("reset-camera");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Et(){return(Et=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("schema",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function St(){return(St=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-animation-parameters",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pt(){return(Pt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-application-parameters",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tt(){return(Tt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-camera",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function It(){return(It=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-camera-params",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nt(){return(Nt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-environment-map",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dt(){return(Dt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-model-properties",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _t(){return(_t=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-model-transfer-function",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bt(){return(Bt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-renderer",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qt(){return(qt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-renderer-params",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rt(){return(Rt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-scene",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zt(){return(Zt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("set-volume-parameters",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(){return(zt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("snapshot",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ft(){return(Ft=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("update-clip-plane",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(){return(Xt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("update-instance",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yt(){return(Yt=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("update-model",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Wt=n(17),Gt={INITIAL_STATE:[],reducer:function(e,t){var n=t.type;if(!n.startsWith("models:"))return e;switch(t.type.substr("models:".length)){case"add":return function(e,t){var n=e.slice();return n.push(t.model),n}(e,t);case"reset":return function(e,t){var n=[];return t.models.filter(function(e){var t=e.id,r=n.includes(t);return!r&&(n.push(t),!0)})}(0,t);case"update":return function(e,t){var n=t.model,r=e.filter(function(e){return e.id!==n.id});return r.push(n),r}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},add:function(e){return{type:"".concat("models:","add"),model:e}},reset:function(e){return{type:"".concat("models:","reset"),models:e}},update:function(e){return{type:"".concat("models:","update"),model:e}}};var Kt={INITIAL_STATE:{panel:"model",showConsole:!1},reducer:function(e,t){var n=t.type;if(!n.startsWith("navigation:"))return e;switch(t.type.substr("navigation:".length)){case"set-panel":return function(e,t){return Object.assign(e,{panel:t.panel})}(e,t);case"toggle-console-visibility":return function(e){return Object.assign(e,{showConsole:!e.showConsole})}(e);default:throw Error('Unknown action "'.concat(n,'"!'))}},setPanel:function(e){return{type:"".concat("navigation:","set-panel"),panel:e}},toggleConsoleVisibility:function(){return{type:"".concat("navigation:","toggle-console-visibility")}}};var Ut={INITIAL_STATE:{activated:!1,minX:0,maxX:1,latitude:0,longitude:0,collageDepth:1},reducer:function(e,t){var n=t.type;if(!n.startsWith("slicer:"))return e;switch(t.type.substr("slicer:".length)){case"update":return function(e,t){return Object.assign(e,t.sliceInfo)}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},update:function(e){return{type:"".concat("slicer:","update"),sliceInfo:e}}};n(51);var Qt=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).touchable=void 0,n.ref=s.createRef(),n.list=s.createRef(),n.button=s.createRef(),n.bigList=void 0,n.keys=[],n.selectedKey="",n.selectedIndex=-1,n.handleClick=n.handleClick.bind(Object(F.a)(Object(F.a)(n))),n.touchable=new Me({onTap:n.handleClick}),n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"handleClick",value:function(e){console.info("tap combo =>",e),this.expand()}},{key:"_swapItems",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,a=this.keys[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value;if(this.props.value!==i){var s=this.props.onChange;return void("function"===typeof s&&s(i))}}}catch(o){t=!0,n=o}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}}},{key:"_computeDimensions",value:function(e,t){var n=e.getBoundingClientRect(),r=n.left,a=n.top,i=n.height,s=t.getBoundingClientRect().width;return a+(i=Math.min(i,window.innerHeight-32))>window.innerHeight&&(a-=32*Math.ceil(window.innerHeight-a-i/32)),a<0&&(a+=32*Math.ceil(-a/32)),{left:r,top:a,width:s,height:i}}},{key:"_showList",value:function(e,t,n,r,a,i){var s=document.createElement("div");s.className="tfw-view-combo-screen";var o=document.createElement("div");return o.className="thm-ele-nav thm-bg3",o.innerHTML=e.innerHTML,o.style.top="".concat(r,"px"),o.style.left="".concat(n,"px"),o.style.width="".concat(a,"px"),o.style.height="".concat(i,"px"),s.appendChild(o),document.body.appendChild(s),this.bigList=o,{screen:s,bigList:o}}},{key:"_ensureSelectionVisible",value:function(){var e=0,t=this.bigList;if(t){var n=t.querySelectorAll("div.item"),r=!0,a=!1,i=void 0;try{for(var s,o=this.keys[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var c=s.value,u=n[e];if(c===this.selectedKey){var l=t.getBoundingClientRect();t.scrollTop=32*e-l.height/2,this.selectedIndex=e,u.classList.add("thm-bgSL")}else u.classList.remove("thm-bgSL");e++}}catch(h){a=!0,i=h}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}}}},{key:"_handleKeyboard",value:function(e){switch(e.key){case"ArrowDown":return this.selectedIndex++,this.selectedKey=this.keys[this.selectedIndex%this.keys.length],this._ensureSelectionVisible(),e.preventDefault(),void e.stopPropagation();case"ArrowUp":return this.selectedIndex=(this.selectedIndex+this.keys.length-1)%this.keys.length,this.selectedKey=this.keys[this.selectedIndex],this._ensureSelectionVisible(),e.preventDefault(),void e.stopPropagation();case"Enter":case" ":var t=this.props.onChange;return"function"===typeof t&&t(this.selectedKey),q.fire(),e.preventDefault(),void e.stopPropagation()}console.log(">>",e.key)}},{key:"expand",value:function(){var e=this;if(this.keys.length<3)this._swapItems();else{var t=this.list.current,n=this.button.current;if(t&&n){var r=this._computeDimensions(t,n),a=r.left,i=r.top,s=r.width,o=r.height,c=this._showList(t,n,a,i,s,o),u=c.screen,l=c.bigList;this.selectedKey=this.props.value||"",window.setTimeout(function(){return e._ensureSelectionVisible(l)},10);var h=this._handleKeyboard.bind(this);document.addEventListener("keydown",h,!0),q.add(function(){document.body.removeChild(u),document.removeEventListener("keydown",h,!0)}),ee(u).on({tap:function(){console.log("EscapeHandler"),q.fire()}}),ee(l).on({tap:function(t){if(console.info("tap bigList =>",t),t&&"undefined"!==typeof t.y){var n=l.scrollTop,r=Math.floor((t.y+n)/32),a=e.keys[r];q.fire(),requestAnimationFrame(function(){"function"===typeof e.props.onChange&&e.props.onChange(a)})}}})}}}},{key:"componentDidMount",value:function(){var e=this.ref.current;e&&(this.touchable.element=e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=D(e.label,"").trim(),r=w(e.wide,!1),a=function(e,t){var n=_(e,[]),r=t.length;for(;n.length<r;)n.push("".concat(n.length));for(var a=0;a<n.length;a++)0===n[a].trim().length&&(n[a]="".concat(a));return t.forEach(function(e,t){var r=e.key;"string"===typeof r?n[t]=r:e.key=n[t]}),n}(e.keys,t),i=D(e.value,a[0]),o=["tfw-view-combo"],c=t.map(function(e){var t=e.key;return s.createElement("div",{className:"item",key:t}," ",e," ")});r&&o.push("wide"),this.keys=a;var u=function(e,t){var n=e.indexOf(t);return Math.max(0,n)}(a,i);return s.createElement("button",{ref:this.ref,className:o.join(" ")},n.length>0?s.createElement(Be,{label:n}):null,s.createElement("div",{ref:this.button,className:"button thm-bg3 thm-ele-button"},s.createElement("div",{className:"list-container",style:{transform:"translateY(-".concat(32*u,"px)")}},s.createElement("div",{ref:this.list,className:"tfw-view-combo-list"},c)),s.createElement("div",{className:"icon"},s.createElement(S,{size:"24px",content:"down"}))))}}]),t}(s.Component);var Jt={fullHD:[1920,1080],thumbnail:[160,120],presentation:[800,600],ultraHD:[3840,2160]},$t={medium:50,quick:1,low:10,high:250,ultra:1250};function en(e){var t=Jt[e];if(!t)return"";var n=Object(m.a)(t,2),r=n[0],a=n[1];return"(".concat(r," x ").concat(a,")")}var tn=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleWidthChange=function(e){var t=parseInt(e,10);isNaN(t)||n.props.onWidthChange(t)},n.handleHeightChange=function(e){var t=parseInt(e,10);isNaN(t)||n.props.onHeightChange(t)},n.handleSizeKeyChange=function(e){n.props.onSizeKeyChange(e)},n.handleSamplesChange=function(e){var t=parseInt(e,10);isNaN(t)||n.props.onSamplesChange(t)},n.handleSamplesKeyChange=function(e){n.props.onSamplesKeyChange(e)},n.handleFilenameChange=function(e){n.props.onFilenameChange(e)},n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props;return o.a.createElement("div",{className:"webBrayns-dialog-screenshot"},o.a.createElement(qe,{wide:!0,label:"File name",value:"".concat(e.filename),onChange:this.handleFilenameChange}),o.a.createElement(Qt,{value:e.sizeKey,wide:!0,onChange:this.handleSizeKeyChange},o.a.createElement("div",{key:"ultraHD"},"Ultra HD ",o.a.createElement("em",null,en("ultraHD"))),o.a.createElement("div",{key:"fullHD"},"Full HD ",o.a.createElement("em",null,en("fullHD"))),o.a.createElement("div",{key:"presentation"},"Presentation ",o.a.createElement("em",null,en("presentation"))),o.a.createElement("div",{key:"thumbnail"},"Thumbnail ",o.a.createElement("em",null,en("thumbnail"))),o.a.createElement("div",{key:"custom"},"Custom...")),o.a.createElement(B,null,o.a.createElement(qe,{label:"Width",value:"".concat(e.width),enabled:"custom"===e.sizeKey,onChange:this.handleWidthChange}),o.a.createElement(qe,{label:"Height",value:"".concat(e.height),enabled:"custom"===e.sizeKey,onChange:this.handleHeightChange})),o.a.createElement(Qt,{value:e.samplesKey,wide:!0,onChange:this.handleSamplesKeyChange},o.a.createElement("div",{key:"quick"},"Quick and dirty"),o.a.createElement("div",{key:"low"},"Low quality"),o.a.createElement("div",{key:"medium"},"Medium quality"),o.a.createElement("div",{key:"high"},"High quality"),o.a.createElement("div",{key:"ultra"},"Very high quality"),o.a.createElement("div",{key:"custom"},"Custom...")),o.a.createElement(qe,{wide:!0,label:"Sampling",value:"".concat(e.samples),enabled:"custom"===e.samplesKey,onChange:this.handleSamplesChange}))}}]),t}(o.a.Component),nn=Object.keys(Jt)[0],rn=Object.keys($t)[0],an={INITIAL_STATE:{snapshot:Ze.local.get("state/dialogs/snapshot",{filename:"snapshot",sizeKey:nn,width:Jt[nn][0],height:Jt[nn][1],samplesKey:rn,samples:$t[rn]})},reducer:function(e,t){var n=t.type;if(!n.startsWith("dialogs:"))return e;switch(t.type.substr("dialogs:".length)){case"update-snapshot":return function(e,t){var n=Object.assign(e,{snapshot:Object.assign(e.snapshot,t.snapshot)});return Ze.local.set("state/dialogs/snapshot",n.snapshot),console.info("state=",e),console.info("action.snapshot=",t.snapshot),console.info("newState=",n),n}(e,t);default:throw Error('Unknown action "'.concat(n,'"!'))}},updateSnapshot:function(e){return{type:"".concat("dialogs:","update-snapshot"),snapshot:e}}};var sn={dialogs:an.INITIAL_STATE,models:Gt.INITIAL_STATE,navigation:Kt.INITIAL_STATE,slicer:Ut.INITIAL_STATE};var on=Object(Wt.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn,t=arguments.length>1?arguments[1]:void 0;return{dialogs:an.reducer(e.dialogs,t),models:Gt.reducer(e.models,t),navigation:Kt.reducer(e.navigation,t),slicer:Ut.reducer(e.slicer,t)}}),cn={store:on,dispatch:on.dispatch,Dialogs:an,Models:Gt,Navigation:Kt,Slicer:Ut};console.info("INITIAL_STATE.dialogs=",sn.dialogs);var un=function(){function e(t){Object(f.a)(this,e),this.params=t,this.brayns=void 0,this.brayns=yn.brayns||new h.a("")}return Object(d.a)(e,[{key:"locate",value:function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.params.transformation.translation=t,e.next=3,this.applyTransfo();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("remove-model",[this.params.id]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setSelected",value:function(){var e=Object(i.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.params.$selected=t,this.params.boundingBox=t,e.next=4,yn.request("update-model",{id:this.params.id,boundingBox:t});case 4:this.updateState();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"show",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("update-model",{id:this.params.id,visible:!0});case 2:this.params.visible=!0,this.updateState();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"hide",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("update-model",{id:this.params.id,visible:!1});case 2:this.params.visible=!1,this.updateState();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"focus",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t,n,r=this;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.request("get-scene");case 2:if(t=e.sent,n=t.models.find(function(e){return e.id===r.params.id})){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,yn.camera.lookAtBounds(n.bounds);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"applyTransfo",value:function(){var e=this;return new Promise(function(t,n){yn.request("update-model",{id:e.params.id,transformation:e.params.transformation}).then(t,n)})}},{key:"updateState",value:function(){cn.dispatch(cn.Models.update(this.params))}},{key:"seleted",get:function(){return this.params.$selected}},{key:"visible",get:function(){return this.params.visible}}]),e}(),ln={addVectors:function(e,t){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]},makeQuaternionAsAxisRotation:function(e,t){var n=.5*e,r=Math.cos(n),a=Math.sin(n),i=Object(m.a)(t,3),s=i[0],o=i[1],c=i[2];return[s*a,o*a,c*a,r]},multiplyQuaternions:hn,normalize:function(e){var t=Object(m.a)(e,3),n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;if(i<1e-9)return[0,0,0];var s=1/Math.sqrt(i);return[n*s,r*s,a*s]},rotateWithQuaternion:function(e,t){var n=t,r=Object(m.a)(e,3),a=r[0],i=r[1],s=r[2],o=Object(m.a)(n,4),c=o[0],u=o[1],l=o[2],h=o[3],p=hn(n,hn([a,i,s,0],[-c,-u,-l,h]));return[p[0],p[1],p[2]]},scalarProduct:function(e,t){var n=Object(m.a)(e,3),r=n[0],a=n[1],i=n[2],s=Object(m.a)(t,3),o=s[0],c=s[1],u=s[2];return r*o+a*c+i*u},scale:function(e,t){return e.map(function(e){return e*t})},vectorFromPoints:function(e,t){return[t[0]-e[0],t[1]-e[1],t[2]-e[2]]}};function hn(e,t){var n=Object(m.a)(e,4),r=n[0],a=n[1],i=n[2],s=n[3],o=Object(m.a)(t,4),c=o[0],u=o[1],l=o[2],h=o[3];return[h*r+c*s-u*i+l*a,h*a+c*i+u*s-l*r,h*i-c*a+u*r+l*s,h*s-c*r-u*a-l*i]}var pn={createModelFromBraynsData:function(e){return{brayns:Object.assign({},e),parent:0,deleted:!1,selected:!1}},getModelsBounds:function(e){var t={min:[0,0,0],max:[0,0,0]};if(0===e.length)return t;for(var n=e[0].brayns.bounds||t,r=1;r<e.length;r++){var a=e[r];if(a.brayns.visible){var i=a.brayns.bounds||t;n.min[0]=Math.min(n.min[0],i.min[0]),n.min[1]=Math.min(n.min[0],i.min[1]),n.min[2]=Math.min(n.min[0],i.min[2]),n.max[0]=Math.max(n.max[0],i.max[0]),n.max[1]=Math.max(n.max[0],i.max[1]),n.max[2]=Math.max(n.max[0],i.max[2])}}return n}};var fn=function(){function e(t){Object(f.a)(this,e),this.params=t}return Object(d.a)(e,[{key:"applyCamera",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t,n,r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.params,n=t.orientation,r=t.position,i=t.target,e.next=3,yn.request("set-camera",{orientation:n,position:r,target:i});case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setPosition",value:function(e){this.params.position=e,this.applyCamera()}},{key:"setOrientation",value:function(e){this.params.orientation=e,this.applyCamera()}},{key:"setPositionAndOrientation",value:function(e,t){this.params.position=e,this.params.orientation=t,this.applyCamera()}},{key:"setTarget",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.direction,r=ln.scalarProduct(ln.vectorFromPoints(this.params.position,t),n),this.params.position=ln.addVectors(t,ln.scale(n,-r)),this.params.target=t,e.next=6,this.applyCamera();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getCloser",value:function(){var e=Object(i.a)(a.a.mark(function e(t,n){var r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.direction,i=ln.scalarProduct(ln.vectorFromPoints(this.params.position,t),r)*n,this.params.position=ln.addVectors(t,ln.scale(r,-i)),this.params.target=t,e.next=6,this.applyCamera();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTargetDistance",value:function(){var e=this.axis.z;return ln.scalarProduct(e,ln.vectorFromPoints(this.params.target,this.params.position))}},{key:"moveForward",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.direction,r=this.params,i=r.position,s=r.target,this.params.position=[i[0]+n[0]*t,i[1]+n[1]*t,i[2]+n[2]*t],this.params.target=[s[0]+n[0]*t,s[1]+n[1]*t,s[2]+n[2]*t],e.next=6,this.applyCamera();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"moveBackward",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.direction,r=this.params,i=r.position,s=r.target,this.params.position=[i[0]-n[0]*t,i[1]-n[1]*t,i[2]-n[2]*t],this.params.target=[s[0]-n[0]*t,s[1]-n[1]*t,s[2]-n[2]*t],e.next=6,this.applyCamera();case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"lookAtWholeScene",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=pn.getModelsBounds(cn.store.getState().models.map(function(e){return{brayns:e}})),e.next=3,this.lookAtBounds(t);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"lookAtBounds",value:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r,i,s,o,c,u,l,h,p,f,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.min[0],r=t.min[1],i=t.min[2],s=t.max[0],o=t.max[1],c=t.max[2],u=(n+s)/2,l=(r+o)/2,h=(i+c)/2,p=s-n,f=o-r,d=c+.5*Math.max(p+f),this.params.orientation=[0,0,0,1],this.params.position=[u,l,d],this.params.target=[u,l,h],e.next=17,this.applyCamera();case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"position",get:function(){return this.params.position.slice()}},{key:"orientation",get:function(){return this.params.orientation.slice()}},{key:"axis",get:function(){var e=Object(m.a)(this.orientation,4),t=e[0],n=e[1],r=e[2],a=e[3],i=a*a,s=t*t,o=n*n,c=r*r,u=2*a*t,l=2*a*n,h=2*a*r,p=2*t*n,f=2*t*r,d=2*n*r;return{x:[i+s+o+c,h+p,f-l],y:[p-h,i-s+o-c,u+d],z:[l+f,d-u,i-s-o+c]}}},{key:"target",get:function(){return this.params.target.slice()}},{key:"direction",get:function(){var e=this.params,t=e.position,n=e.target;return ln.normalize(ln.vectorFromPoints(t,n))}}]),e}(),dn=function(){function e(){var t=this;Object(f.a)(this,e),this._canvas=null,this.ctx=null,this.blob=null,this.blobIndex=0,this.lastRederedBlobIndex=0,this.paint=Object(i.a)(a.a.mark(function e(){var n,r,i,s,o,c,u,l,h,p;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.lastRederedBlobIndex!==t.blobIndex){e.next=3;break}return e.abrupt("return");case 3:if(n=t.blob){e.next=6;break}return e.abrupt("return");case 6:if(r=t.canvas){e.next=9;break}return e.abrupt("return");case 9:if(i=t.ctx){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,mn(n);case 14:s=e.sent,o=s.naturalWidth,c=s.naturalHeight,u=r.width,l=r.height,h=(u-o)/2,p=(l-c)/2,i.drawImage(s,h,p,o,c),t.lastRederedBlobIndex=t.blobIndex;case 23:return e.prev=23,requestAnimationFrame(t.paint),e.finish(23);case 26:case"end":return e.stop()}},e,null,[[0,,23,26]])}))}return Object(d.a)(e,[{key:"init",value:function(e){var t=this;e.observe("image-jpeg").subscribe(function(e){t.blob=e,t.blobIndex++}),requestAnimationFrame(this.paint)}},{key:"canvas",get:function(){return this._canvas},set:function(e){this._canvas=e,e&&(this.ctx=e.getContext("2d"))}}]),e}();function mn(e){var t=URL.createObjectURL(e),n=new Image;return new Promise(function(e){n.src=t,n.decode?n.decode().then(function(){return e(n)}):n.onload=function(){return e(n)}})}var vn=function(e,t){var n=0;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];n&&window.clearTimeout(n),n=window.setTimeout(function(){n=0,e.apply(void 0,a)},t)}},bn=function(){function e(){var t=this;Object(f.a)(this,e),this.savedTarget=[0,0,0],this.savedPosition=[0,0,0],this.savedOrientation=[0,0,0,0],this.savedAxis={x:[0,0,0],y:[0,0,0],z:[0,0,0]},this.savedScreenPoint={screenX:0,screenY:0},this.savedTargetDistance=0,this.handlePanStart=function(e){var n=yn.camera.axis;t.savedTarget=yn.camera.target,t.savedPosition=yn.camera.position,t.savedOrientation=yn.camera.orientation,t.savedAxis=n,t.savedScreenPoint={screenX:e.screenX,screenY:e.screenY,aspect:e.aspect},t.savedTargetDistance=yn.camera.getTargetDistance()},this.handlePan=vn(function(e){4===e.button?t.translateCamera(e):1===e.button?t.orbitCamera(e):t.rotateCamera(e)},10)}return Object(d.a)(e,[{key:"translateCamera",value:function(e){var t=this.savedAxis,n=e.screenX-this.savedScreenPoint.screenX,r=e.screenY-this.savedScreenPoint.screenY,a=this.savedPosition.slice(),i=1*yn.camera.getTargetDistance(),s=ln.addVectors(a,ln.addVectors(ln.scale(t.x,i*n*e.aspect),ln.scale(t.y,i*r)));yn.camera.setPosition(s)}},{key:"orbitCamera",value:function(e){var t=this.savedAxis,n=e.screenX-this.savedScreenPoint.screenX,r=e.screenY-this.savedScreenPoint.screenY,a=this.savedOrientation.slice(),i=-Math.PI*r,s=2*Math.PI*n,o=ln.makeQuaternionAsAxisRotation(i,t.x),c=ln.makeQuaternionAsAxisRotation(s,t.y),u=ln.multiplyQuaternions(o,c),l=ln.multiplyQuaternions(u,a),h=ln.vectorFromPoints(this.savedTarget,this.savedPosition),p=ln.rotateWithQuaternion(h,u),f=ln.addVectors(this.savedTarget,p);yn.camera.setPositionAndOrientation(f,l)}},{key:"rotateCamera",value:function(e){var t=this.savedAxis,n=e.screenX-this.savedScreenPoint.screenX,r=e.screenY-this.savedScreenPoint.screenY,a=this.savedOrientation.slice(),i=2*Math.PI*r,s=-2*Math.PI*n,o=ln.makeQuaternionAsAxisRotation(i,t.x),c=ln.makeQuaternionAsAxisRotation(s,t.y),u=ln.multiplyQuaternions(o,c),l=ln.multiplyQuaternions(u,a);yn.camera.setOrientation(l)}}]),e}(),gn={brayns:null,camera:null,renderer:new dn,gestures:new bn},yn={Api:Ke,clear:function(){return kn.apply(this,arguments)},connect:function(e){return wn.apply(this,arguments)},loadMeshFromPath:function(e){return Hn.apply(this,arguments)},request:Cn,setViewPort:function(e,t){return Ln.apply(this,arguments)},get brayns(){return gn.brayns},get camera(){return gn.camera||new fn({})},get renderer(){return gn.renderer},get gestures(){return gn.gestures}};function wn(){return(wn=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye.connect(t);case 2:return gn.brayns=e.sent,console.info("Scene.brayns=",gn.brayns),e.next=6,Cn("get-camera-params");case 6:return n=e.sent,gn.camera=new fn(n),gn.renderer.init(gn.brayns),e.abrupt("return",gn.brayns);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cn(e){return xn.apply(this,arguments)}function xn(){return(xn=Object(i.a)(a.a.mark(function e(t){var n,r=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},console.info("request(",t,n,")"),e.abrupt("return",new Promise(function(e,r){if(!gn.brayns)return console.error("No BraynsService!"),void r();gn.brayns.request(t,n).then(function(n){console.info("request(",t,") => ",n),e(n)},r)}));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kn(){return(kn=Object(i.a)(a.a.mark(function e(){var t,n,r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn("get-scene");case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:if(n=t.models){e.next=8;break}return e.abrupt("return",!1);case 8:return r=n.map(function(e){return e.id}),e.next=11,Cn("remove-model",r);case 11:return e.next=13,Cn("get-renderer-params",{});case 13:if(!(i=e.sent)){e.next=20;break}return i.pixelAlpha=1.7,i.shadows=1,i.softShadows=.9,e.next=20,Cn("set-renderer-params",i);case 20:return e.next=22,Cn("set-renderer",{accumulation:!0,backgroundColor:[.2,.1,0],current:"advanced_simulation",headLight:!0,maxAccumFrames:1e3,samplesPerPixel:1,subsampling:1});case 22:return e.next=24,Cn("set-environment-map",{filename:"/gpfs/bbp.cscs.ch/project/proj3/resources/envmap/space.jpg"});case 24:return e.abrupt("return",!0);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ln(){return(Ln=Object(i.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn("set-application-parameters",{viewport:[t,n]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Hn(){return(Hn=Object(i.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cn("add-model",{path:t});case 2:return n=e.sent,r=n,cn.dispatch(cn.Models.add(r)),e.abrupt("return",new un(r));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Vn=n(28),Mn={getCanvas:function(){var e=Object(i.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.Api.snapshot({samples_per_pixel:t.samples,size:[t.width,t.height],format:"JPEG"});case 2:return n=e.sent,r="data:;base64,".concat(n.data),e.abrupt("return",new Promise(function(e,t){var n=new Image;n.onload=function(){var r=document.createElement("canvas");r.width=n.width,r.height=n.height;var a=r.getContext("2d");a?(a.drawImage(n,0,0),e(r)):t()},n.onerror=t,n.src=r}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),saveCanvasToFile:function(){var e=Object(i.a)(a.a.mark(function e(t,n){var r,s=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=s.length>2&&void 0!==s[2]?s[2]:"image/jpeg",t.toBlob(function(){var e=Object(i.a)(a.a.mark(function e(t){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(Vn.a)(t,n);case 4:r=e.sent,console.info("result=",r);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r,100);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()};var An=Object(l.b)(function(e){return{filename:e.dialogs.snapshot.filename,sizeKey:e.dialogs.snapshot.sizeKey,width:e.dialogs.snapshot.width,height:e.dialogs.snapshot.height,samplesKey:e.dialogs.snapshot.samplesKey,samples:e.dialogs.snapshot.samples}},function(e){return{onFilenameChange:function(t){e(cn.Dialogs.updateSnapshot({filename:t}))},onSizeKeyChange:function(t){e(cn.Dialogs.updateSnapshot({sizeKey:t}));var n=Jt[t];if(n){var r=Object(m.a)(n,2),a=r[0],i=r[1];e(cn.Dialogs.updateSnapshot({width:a,height:i}))}},onWidthChange:function(t){e(cn.Dialogs.updateSnapshot({width:t}))},onheightChange:function(t){e(cn.Dialogs.updateSnapshot({height:t}))},onSamplesKeyChange:function(t){e(cn.Dialogs.updateSnapshot({samplesKey:t}));var n=$t[t];n&&e(cn.Dialogs.updateSnapshot({samples:n}))},onSamplesChange:function(t){e(cn.Dialogs.updateSnapshot({samples:t}))}}})(tn),On={show:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("SHOW"),e.next=3,Ie.confirm("Take snapshot",o.a.createElement(l.a,{store:cn.store},o.a.createElement(An,null)));case 3:if(e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",cn.store.getState().dialogs.snapshot);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},jn=(n(52),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).canvasRef=o.a.createRef(),n.orientation=[0,0,0,1],n.handleDown=function(e){var t=n.props.onPanStart;"function"===typeof t&&(e.clear(),t(Object.assign({button:e.buttons},n.getScreenPoint(e.x,e.y))))},n.handlePan=function(e){var t=n.props.onPan;"function"===typeof t&&t(Object.assign({button:e.buttons},n.getScreenPoint(e.x,e.y)))},n.updateViewPort=Object(i.a)(a.a.mark(function e(){var t,r,i,s;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.canvasRef.current){e.next=3;break}return e.abrupt("return");case 3:return r=t.getBoundingClientRect(),i=Math.floor(r.width),s=Math.floor(r.height),t.width=i,t.height=s,e.next=10,yn.setViewPort(i,s);case 10:case"end":return e.stop()}},e)})),n.handleScreenShot=Object(i.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("handleScreenShot"),e.next=3,On.show();case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Mn.getCanvas(t);case 8:return n=e.sent,e.next=11,Mn.saveCanvasToFile(n,"".concat(t.filename,".jpg"));case 11:case"end":return e.stop()}},e)})),n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){if(this.canvas){yn.renderer.canvas=this.canvas;var e=this;ee(this.canvas).on({down:this.handleDown,tap:function(){var t=Object(i.a)(a.a.mark(function t(n){var r,i,s,o,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.info("doubletap=",n),r=e.canvas){t.next=4;break}return t.abrupt("return");case 4:return i=r.getBoundingClientRect(),s=n.x/i.width,o=1-n.y/i.height,t.next=9,yn.request("inspect",[s,o]);case 9:!0===(c=t.sent).hit&&yn.camera.getCloser(c.position,.5);case 11:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),wheel:function(e){yn.camera&&(e.deltaY<0?yn.camera.moveForward(10):e.deltaY>0&&yn.camera.moveBackward(10))},pan:this.handlePan}),this.updateViewPort(),window.onfocus=this.updateViewPort}}},{key:"getScreenPoint",value:function(e,t){if(!this.canvas)return{screenX:-1,screenY:-1,aspect:1};var n=this.canvas.clientWidth,r=this.canvas.clientHeight;return{screenX:e/n,screenY:1-t/r,aspect:n/r}}},{key:"render",value:function(){return o.a.createElement("div",{className:"webBrayns-view-ImageStream"},o.a.createElement("canvas",{ref:this.canvasRef,className:"","moz-opaque":"true"}),o.a.createElement("div",{className:"icons"},o.a.createElement(je,{icon:"camera",onClick:this.handleScreenShot,warning:!0})))}},{key:"canvas",get:function(){return this.canvasRef.current}}]),t}(o.a.Component)),En=(n(53),function(e){function t(){return Object(f.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=Ae(this.props.children),n=w(this.props.scrollable,!1),r=w(this.props.fullscreen,!1),a=["tfw-layout-stack"];return a.push.apply(a,Object(N.a)(_(this.props.classNames))),n&&a.push("scrollable"),r&&a.push("fullscreen"),o.a.createElement("div",{className:a.join(" ")},t.filter(function(t){return t.key==e.props.value}))}}]),t}(o.a.Component)),Sn=(n(54),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleMethodChange=function(e){n.setState({method:e})},n.handleParamsChange=function(e){n.setState({params:e.target.value})},n.handleExecute=Object(i.a)(a.a.mark(function e(){var t,r,i,s,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,r=t.method,i=t.params,In("method",r),In("params",i),n.setState({querying:!0,output:"".concat(Date.now()),error:null}),e.prev=4,s=Nn(i),e.next=8,yn.request(r,s);case 8:o=e.sent,n.setState({error:null,output:JSON.stringify(o,null,"  ")}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error("WebSocket console error:",e.t0),n.setState({error:Dn(e.t0)});case 16:return e.prev=16,n.setState({querying:!1}),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[4,12,16,19]])})),n.state={method:Tn("method","get-renderer-params"),params:Tn("params","{}"),output:"",error:null,querying:!1},n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=["webBrayns-view-WebsocketConsole","thm-bg0"];return this.props.visible&&e.push("visible"),o.a.createElement("div",{className:e.join(" ")},o.a.createElement("div",{className:"head"},o.a.createElement(qe,{label:"Method",value:this.state.method,onChange:this.handleMethodChange,onEnterPressed:this.handleExecute,wide:!0})),o.a.createElement("textarea",{className:"input",onChange:this.handleParamsChange,defaultValue:this.state.params}),o.a.createElement("div",{className:"button"},o.a.createElement(je,{label:"Execute request",wide:!0,wait:this.state.querying,icon:"gear",onClick:this.handleExecute})),this.state.error?o.a.createElement("div",{className:"error"},this.state.error):o.a.createElement("textarea",{className:"output thm-bgPL",readOnly:!0,value:this.state.output}))}}]),t}(o.a.Component)),Pn="websocket-console::";function Tn(e,t){return Ze.local.get("".concat(Pn).concat(e),t)}function In(e,t){return Ze.local.set("".concat(Pn).concat(e),t)}function Nn(e){try{return JSON.parse(e)}catch(t){throw Error("This parameter is not in valid JSON format:\n".concat(e,"\n\nReason: ").concat(t,"!"))}}function Dn(e){var t=JSON.stringify(e,null,"  ");return e&&"function"===typeof e.toString&&(t+="\n\n"+e.toString()),t}var _n=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(f.a)(this,e),this.prefix=t}return Object(d.a)(e,[{key:"get",value:function(e,t){return Ze.local.get(this.key(e),t)}},{key:"set",value:function(e,t){Ze.local.set(this.key(e),t)}},{key:"key",value:function(e){return 0===this.prefix.length?e:"".concat(this.prefix,":\t").concat(e)}}]),e}())("input-path"),Bn=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleChange=function(e){var t=n.props.onChange;n.setState({path:e}),_n.set("path",e),"function"===typeof t&&t(e)},n.state={path:""},n.handleChange(_n.get("path","/gpfs/bbp.cscs.ch/project/proj3/resources/meshes/astrocytes/GLIA_000099.h5_decimated.off")),n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement(qe,{label:"Please type a model path",size:100,value:this.state.path,onChange:this.handleChange,wide:!0})}}]),t}(o.a.Component),qn=(n(55),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).touchable=void 0,n.ref=s.createRef(),n.handleClick=n.handleClick.bind(Object(F.a)(Object(F.a)(n))),n.touchable=new Me({onTap:n.handleClick,color:e.color}),n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.ref.current;e&&(this.touchable.element=e)}},{key:"handleClick",value:function(){var e=this.props.onClick;"function"===typeof e&&e()}},{key:"render",value:function(){var e=this.props,t=w(e.enabled,!0),n=["tfw-view-touchable"].concat(Ae(e.classNames));return t&&n.push("enabled"),s.createElement("div",{ref:this.ref,tabIndex:0,className:n.join(" "),title:e.title},e.children)}}]),t}(s.Component)),Rn=(n(56),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleToggleSelection=function(){var e=n.props.onToggleSelection;"function"===typeof e&&e(n.props.model),console.info("this.props.model=",n.props.model)},n.handleFocus=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new un(n.props.model),e.next=3,t.focus();case 3:case"end":return e.stop()}},e)})),n.handleShow=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new un(n.props.model),e.next=3,t.show();case 3:case"end":return e.stop()}},e)})),n.handleHide=Object(i.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new un(n.props.model),e.next=3,t.hide();case 3:case"end":return e.stop()}},e)})),n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.model,t=["webBrayns-view-ModelButton","thm-ele-button"];return e.visible?t.push(e.$selected?"thm-bgSL":"thm-bg2"):t.push(e.$selected?"thm-bgSD":"thm-bg0"),o.a.createElement(qn,{classNames:t.join(" "),onClick:this.handleToggleSelection,title:e.path},o.a.createElement("div",{className:"name"},o.a.createElement("div",{className:e.visible?"visible":"invisible"},e.name),o.a.createElement("div",{className:"id"},"#".concat(e.id))),o.a.createElement("div",{className:"icons"},o.a.createElement("div",null,o.a.createElement(je,{small:!0,icon:"gps",onClick:this.handleFocus}),o.a.createElement(je,{enabled:!1,small:!0,icon:"more"})),e.visible?o.a.createElement(je,{small:!0,icon:"hide",onClick:this.handleHide}):o.a.createElement(je,{small:!0,icon:"show",onClick:this.handleShow}),o.a.createElement(je,{enabled:!1,small:!0,icon:"delete",warning:!0})))}}]),t}(o.a.Component)),Zn=(n(57),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).refMain=void 0,n.refHead=void 0,n.refBody=void 0,n.refTail=void 0,n.lastFirstItemIndex=void 0,n.lastVisibleItemsCount=void 0,n.lastItemsArray=void 0,n.itemHeight=36,n.refMain=s.createRef(),n.refHead=s.createRef(),n.refBody=s.createRef(),n.refTail=s.createRef(),n.onScroll=vn(n.onScroll.bind(Object(F.a)(Object(F.a)(n))),30),n.onPanDown=n.onPanDown.bind(Object(F.a)(Object(F.a)(n))),n.lastFirstItemIndex=-1,n.lastVisibleItemsCount=-1,n.lastItemsArray=[],n.state={items:[]},n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"onPanDown",value:function(){var e=this.refMain.current;if(e&&!(e.scrollTop>0)){var t=this.props.onRefreshAsked;"function"===typeof t&&t()}}},{key:"onScroll",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this.refMain.current,t=this.refHead.current,n=this.refBody.current,r=this.refTail.current;if(e&&t&&n&&r){this.props.animateRefresh&&(e.scrollTop=0);var a=e.getBoundingClientRect(),i=Math.floor(e.scrollTop),s=Math.floor(a.height),o=this.props.items.length,c=Math.min(o,Math.floor(i/this.itemHeight)),u=Math.min(o-c,1+Math.ceil(s/this.itemHeight)),l=this.props.items.length-c-u;t.style.height="".concat(this.itemHeight*c,"px"),n.style.height="".concat(this.itemHeight*u,"px"),r.style.height="".concat(this.itemHeight*l,"px"),e.scrollTop=i,this.lastFirstItemIndex===c&&this.lastVisibleItemsCount===u||(this.lastFirstItemIndex=c,this.lastVisibleItemsCount=u,this.setState({items:this.props.items.slice(c,c+u)}));var h="".concat(e.clientWidth,"px ").concat(this.itemHeight,"px");t.style.backgroundSize=h,r.style.backgroundSize=h}}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.onScroll,!1);var t=this.refMain.current;t&&ee(t).on({pandown:function(e){t.scrollTop>0||(e.clear(),t.classList.add("animate-refresh"))},swipedown:function(n){t.scrollTop>0||(n.clear(),e.onPanDown())},up:function(){return t.classList.remove("animate-refresh")}})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onScroll,!1)}},{key:"render",value:function(){var e=this;if(this.itemHeight=C(this.props.itemHeight,36),this.lastItemsArray!==this.props.items&&(this.lastVisibleItemsCount=-1,this.lastItemsArray=this.props.items),this.onScroll(),"function"!==typeof this.props.mapper)throw console.error("props =",this.props),Error('<List mapper="..." ...> Attribute mapper must be a function which returns a ReactElement!');var t=null;try{t=this.state.items.map(this.props.mapper).map(function(t){return s.createElement("div",{className:"item",key:t.key,style:{height:"".concat(e.itemHeight,"px"),minHeight:"".concat(e.itemHeight,"px"),maxHeight:"".concat(e.itemHeight,"px")}},t)})}catch(i){throw Error('<List mapper="..." ...> Attribute mapper returns an exception:\n'.concat(i))}var n=k(this.props.width,"auto"),r=k(this.props.height,"auto"),a=["tfw-view-list","thm-bg2"];return w(this.props.animateRefresh,!1)&&a.push("animate-refresh","refreshing"),s.createElement("div",{className:a.join(" "),style:{width:n,height:r},onScroll:this.onScroll,ref:this.refMain},s.createElement("div",{className:"space",ref:this.refHead}),s.createElement("div",{className:"body",ref:this.refBody},t),s.createElement("div",{className:"space",ref:this.refTail}))}}]),t}(s.Component)),zn=/[ \t\n\r,.|<>:]+/g,Fn=function(){function e(t){Object(f.a)(this,e),this.items=void 0,this.items=t.split(zn).map(function(e){return e.trim().toLowerCase()}).filter(function(e){return e.length>0})}return Object(d.a)(e,[{key:"matches",value:function(e){if(0===this.items.length)return!0;var t=e.toLowerCase(),n=!0,r=!1,a=void 0;try{for(var i,s=this.items[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;if(-1===t.indexOf(o))return!1}}catch(c){r=!0,a=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return!0}}]),e}(),Xn=(n(58),function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).handleToggleSelection=function(e){var t=n.props.models.find(function(e){return e.$selected});t&&new un(t).setSelected(!1);e!==t&&new un(e).setSelected(!0)},n.handleFilterChange=function(e){var t=e.trim().toLowerCase();n.setState({filter:t})},n.handleSortChange=function(e){n.setState({sort:e})},n.state={filter:"",sort:"name"},n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"filter",value:function(){var e=this.state.filter,t=this.props.models,n=new Fn(e);return t.filter(function(e){return n.matches(e.name)}).sort("name"===this.state.sort?Yn:Wn)}},{key:"render",value:function(){var e=this,t=this.props.models,n=this.filter();return o.a.createElement("div",{className:"webBrayns-view-ModelList"},o.a.createElement("header",null,o.a.createElement(qe,{label:"Filter by name (".concat(n.length," / ").concat(t.length,")"),onChange:this.handleFilterChange,wide:!0}),o.a.createElement(Qt,{label:"Sorting",value:this.state.sort,onChange:this.handleSortChange},o.a.createElement("div",{key:"name"},"Name"),o.a.createElement("div",{key:"volume"},"Volume"))),o.a.createElement(Zn,{itemHeight:100,items:n,width:"100%",mapper:function(t){return o.a.createElement(Rn,{key:t.id,onToggleSelection:e.handleToggleSelection,model:t})}}))}}]),t}(o.a.Component));function Yn(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return n<r?-1:n>r?1:0}function Wn(e,t){return Gn(t.bounds)-Gn(e.bounds)}function Gn(e){var t=e.max,n=e.min;return(t[0]-n[0])*(t[1]-n[1])*(t[2]-n[2])}var Kn=Object(l.b)(function(e){return{models:e.models}},function(e){return{}})(Xn),Un=(n(59),function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(n=Object(b.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).handleClip=function(){cn.dispatch(cn.Navigation.setPanel("clip"))},n.handleLoadMesh=Object(i.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,Ie.confirm("Load Mesh",o.a.createElement(Bn,{onChange:function(e){return t=e}}));case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,yn.loadMeshFromPath(t);case 8:n=e.sent,console.info("model=",n);case 10:case"end":return e.stop()}},e)})),n.toggleConsoleVisibility=function(){cn.dispatch(cn.Navigation.toggleConsoleVisibility())},n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"webBrayns-view-panel-Model"},o.a.createElement("header",{className:"thm-bgPD thm-ele-nav"},o.a.createElement("p",null,"Web-Brayns"),o.a.createElement("div",null,o.a.createElement(S,{content:"cut",onClick:this.handleClip}),o.a.createElement(S,{content:"import",onClick:this.handleLoadMesh}),o.a.createElement(S,{content:"gps",onClick:function(){return yn.camera.lookAtWholeScene()}}),o.a.createElement(S,{content:"bug",onClick:this.toggleConsoleVisibility}))),o.a.createElement(Kn,null))}}]),t}(o.a.Component)),Qn={padNumber:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",r="".concat(e);r.length<t;)r=n.charAt(0)+r;return r},clamp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e}};function Jn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;switch(typeof e){case"boolean":return e?1:0;case"number":return e;case"string":var n=e.trim().toLowerCase();if(n.startsWith("0x")){var r=parseInt(n.substr(2),16);return isNaN(r)?t:r}if(n.startsWith("0b")){var a=parseInt(n.substr(2),2);return isNaN(a)?t:a}if(n.startsWith("0o")){var i=parseInt(n.substr(2),8);return isNaN(i)?t:i}var s=parseFloat(n);return isNaN(s)?t:s;default:return t}}n(60);var $n=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(n=Object(b.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).ref=o.a.createRef(),n.handleTapOrMove=function(e){var t=n.ref.current;if(t){var r=t.getBoundingClientRect(),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e}(e.x/r.width),i=n.props,s=C(i.min,0),o=C(i.max,100),c=Math.min(s,o),u=Math.max(s,o),l=Math.max(1e-9,Jn(i.step,(u-c)/1e3)),h=n.constrainValue(c+(u-c)*a,c,u,l);console.info("evt, rect, value, percent=",e,r,h,a),i.onChange(h)}},n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.ref.current;e&&ee(e).on({tap:this.handleTapOrMove,pan:this.handleTapOrMove})}},{key:"render",value:function(){var e=this.props,t=C(e.min,0),n=C(e.max,100),r=Math.min(t,n),a=Math.max(t,n),i=Math.max(1e-9,Jn(e.step,(a-r)/1e3)),s=D(e.label,""),c=this.constrainValue(e.value,r,a,i),u=D(e.text,"".concat(c));return o.a.createElement("div",{className:"tfw-view-Slider",ref:this.ref},o.a.createElement(Be,{label:s}),o.a.createElement("div",{className:"thm-ele-button thm-bgPD"},o.a.createElement("div",{className:"thm-ele-nav thm-bgPL thm-fg",style:{marginLeft:"calc(".concat(100*(c-r)/(a-r),"% - 16px)")}},u)))}},{key:"constrainValue",value:function(e,t,n,r){var a=Math.max(t,Math.min(e,n));return r>0?t+r*Math.floor(r/2+(a-t)/r):a}}]),t}(o.a.Component);n(61);var er=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(b.a)(this,Object(g.a)(t).call(this,e))).refCanvas=o.a.createRef(),n.ctx=null,n.selection=0,n.handleDown=function(e){var t=n.getX(e),r=n.props,a=r.min,i=r.max,s=(r.onChange,Math.abs(a-t)),o=Math.abs(i-t),c=Math.abs(t-(i+a)/2);n.selection=s<c?s<o?-1:1:c<=o?0:1,n.moveTo(t)},n.handlePan=function(e){var t=n.getX(e);n.moveTo(t)},n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.refCanvas.current;if(e){this.ctx=e.getContext("2d");var t=e.getBoundingClientRect();e.setAttribute("width","".concat(t.width)),ee(e).on({down:this.handleDown,pan:this.handlePan}),this.paint()}}},{key:"moveTo",value:function(e){var t=this.props,n=t.min,r=t.max,a=t.onChange,i=this.selection;if(-1===i)a(tr(e,0,r),r);else if(1===i)a(n,tr(e,n,1));else{var s=(r-n)/2,o=e-s,c=e+s;o<0?(c-=o,o=0):c>1&&(o+=c-1,c=1),a(o,c)}}},{key:"getX",value:function(e){var t=this.refCanvas.current;if(!t)return 0;var n=t.getBoundingClientRect();return(e.x-16)/(n.width-32)}},{key:"paint",value:function(){var e=this.ctx;if(e){var t=e.canvas,n=t.getBoundingClientRect(),r=n.width,a=n.height;t.width=r,t.height=a,e.clearRect(0,0,r,a);var i=r-32;if(!(i<16)){e.strokeStyle="#333",e.fillStyle="#999",e.beginPath(),e.rect(16,0,i,a),e.fill(),e.stroke();var s=function(e,t){var n=tr(e),r=tr(t);if(n>r){var a=n;n=r,r=a}return{min:n,max:r}}(this.props.min,this.props.max),o=16+i*s.min,c=16+i*s.max,u=e.createLinearGradient(0,0,0,a);u.addColorStop(0,"#000"),u.addColorStop(1,this.props.color),e.fillStyle=u,e.beginPath(),e.rect(o,0,c-o,a),e.fill(),e.stroke(),e.save(),e.beginPath(),e.fillStyle="#fff5",e.rect(o,0,c-o,.5*a),e.fill(),e.restore(),e.beginPath(),e.moveTo(0,0),e.lineTo(r,0),e.moveTo(0,a),e.lineTo(r,a),e.stroke()}}}},{key:"componentDidUpdate",value:function(){this.paint()}},{key:"render",value:function(){return o.a.createElement("div",{className:"webBrayns-view-Range"},o.a.createElement("div",{style:{margin:"0 ".concat(16,"px")}},o.a.createElement(Be,{label:this.props.label})),o.a.createElement("canvas",{ref:this.refCanvas,height:"32"}))}}]),t}(o.a.Component);function tr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e}var nr=function(e,t){var n=0,r=0,a=function(){},i=[],s=function(){n=0,a.apply(void 0,Object(N.a)(i))};return function(){a=e;for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];i=c;var l=Date.now(),h=l-r;r=l,h>t?s():0===n&&(n=window.setTimeout(s,t-h))}},rr=(n(62),function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=Object(b.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).minPlaneIndex=0,n.maxPlaneIndex=0,n.indexOfFrameToShow=0,n.sceneCenter=[0,0,0],n.sceneRadius=1,n.resetIndexOfFrameToShow=vn(function(){n.indexOfFrameToShow=0,n.updatePlanes()},600),n.updatePlanes=nr(function(){yn.Api.updateClipPlane({id:n.minPlaneIndex,plane:n.getDefOfMinPlaneX()}),yn.Api.updateClipPlane({id:n.maxPlaneIndex,plane:n.getDefOfMaxPlaneX()})},100),n.handleBack=function(){cn.dispatch(cn.Navigation.setPanel("model"))},n.handleActivatedChange=function(e){cn.dispatch(cn.Slicer.update({activated:e}))},n.handleLatitudeChange=function(e){console.info("latitude=",e),cn.dispatch(cn.Slicer.update({latitude:e}))},n.handleLongitudeChange=function(e){cn.dispatch(cn.Slicer.update({longitude:e}))},n.handleCollageDepthChange=function(e){n.indexOfFrameToShow=e,n.resetIndexOfFrameToShow(),cn.dispatch(cn.Slicer.update({collageDepth:e}))},n.clear=Object(i.a)(a.a.mark(function e(){var t,r,i,s,o,c,u,l,h,p,f,d,v,b,g;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=cn.store.getState(),r=t.models.filter(function(e){return e.visible}).map(pn.createModelFromBraynsData),i=pn.getModelsBounds(r),s=Object(m.a)(i.min,3),o=s[0],c=s[1],u=s[2],l=Object(m.a)(i.max,3),h=l[0],p=l[1],f=l[2],d=o-h,v=o-h,b=o-h,n.sceneRadius=Math.sqrt(d*d+v*v+b*b),n.sceneCenter[0]=(o+h)/2,n.sceneCenter[1]=(c+p)/2,n.sceneCenter[2]=(u+f)/2,e.next=14,yn.Api.getClipPlanes();case 14:return g=e.sent,e.next=17,yn.Api.removeClipPlanes(g.map(function(e){return e.id}));case 17:return e.next=19,ar(n.getDefOfMinPlaneX());case 19:return n.minPlaneIndex=e.sent,e.next=22,ar(n.getDefOfMaxPlaneX());case 22:n.maxPlaneIndex=e.sent,cn.dispatch(cn.Slicer.update({maxX:1,minX:0}));case 24:case"end":return e.stop()}},e)})),n.handleMovieClick=Object(i.a)(a.a.mark(function e(){var t,r,i,s,o,c,u,l,h,p,f,d;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=yn.Api.getClipPlanes(),e.next=3,On.show();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,t;case 8:if(i=e.sent,s=i.find(function(e){return e.id===n.minPlaneIndex})){e.next=12;break}return e.abrupt("return");case 12:if(o=i.find(function(e){return e.id===n.maxPlaneIndex})){e.next=15;break}return e.abrupt("return");case 15:c=n.getPlanesPerFrame(s,o),u=0;case 17:if(!(u<n.props.collageDepth)){e.next=34;break}return l=Object(m.a)(c[u],2),h=l[0],p=l[1],console.info("frame, planeA, planeB=",u,h,p),e.next=22,yn.Api.updateClipPlane(h);case 22:return e.next=24,yn.Api.updateClipPlane(p);case 24:return e.next=26,Mn.getCanvas(r);case 26:return f=e.sent,d="".concat(r.filename,"-").concat(Qn.padNumber(u),".jpg"),console.info("filename=",d),e.next=31,Mn.saveCanvasToFile(f,d);case 31:u++,e.next=17;break;case 34:n.updatePlanes();case 35:case"end":return e.stop()}},e)})),n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"removeAllClipPlanes",value:function(){var e=Object(i.a)(a.a.mark(function e(){var t,n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.Api.getClipPlanes();case 2:if(0!==(t=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:n=t.map(function(e){return e?e.id:0}),yn.Api.removeClipPlanes(n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.clear(),this.updatePlanes();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.updatePlanes();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"computePlaneDirection",value:function(){var e=Math.PI*this.props.latitude/180,t=Math.PI*this.props.longitude/180,n=Math.sin(t),r=Math.cos(t);return[Math.cos(e)*r,n,Math.sin(e)*r]}},{key:"computeThickness",value:function(){var e=this.sceneRadius,t=this.props;return e*Math.abs(t.maxX-t.minX)}},{key:"getDefOfMinPlaneX",value:function(){var e=this.sceneRadius,t=this.sceneCenter,n=this.computeThickness(),r=e*(this.props.minX-.5)+n*this.indexOfFrameToShow,a=this.computePlaneDirection(),i=Object(m.a)(a,3),s=i[0],o=i[1],c=i[2],u=ln.addVectors(t,ln.scale([s,o,c],-r));return[s,o,c,ln.scalarProduct(u,[s,o,c])]}},{key:"getDefOfMaxPlaneX",value:function(){var e=this.sceneRadius,t=this.sceneCenter,n=this.computeThickness(),r=e*(this.props.maxX-.5)+n*this.indexOfFrameToShow,a=ln.scale(this.computePlaneDirection(),-1),i=Object(m.a)(a,3),s=i[0],o=i[1],c=i[2],u=ln.addVectors(t,ln.scale([s,o,c],r));return[s,o,c,ln.scalarProduct(u,[s,o,c])]}},{key:"componentWillUnmount",value:function(){}},{key:"handleXChange",value:function(e,t){cn.dispatch(cn.Slicer.update({minX:e,maxX:t}))}},{key:"getPlanesPerFrame",value:function(e,t){for(var n=[],r=0;r<this.props.collageDepth;r++)this.indexOfFrameToShow=r,n.push([{id:e.id,plane:this.getDefOfMinPlaneX()},{id:t.id,plane:this.getDefOfMaxPlaneX()}]);return this.indexOfFrameToShow=0,console.info("minPlane, maxPlane, planesPerFrame=",e,t,n),n}},{key:"render",value:function(){return console.info("this.props.latitude=",this.props.latitude),o.a.createElement("div",{className:"webBrayns-view-panel-Clip"},o.a.createElement("header",{className:"thm-bgPD thm-ele-nav"},o.a.createElement("div",null,o.a.createElement(S,{content:"back",onClick:this.handleBack})),o.a.createElement("p",null,"Slicing")),o.a.createElement("div",null,o.a.createElement(je,{wide:!0,warning:!0,label:"Remove all clipping planes",icon:"delete",onClick:this.clear}),o.a.createElement("p",null,"Slide the colored bar below to set the thickness and position of the main slice."),o.a.createElement(er,{label:"Main slice",color:pe.bgS(),min:this.props.minX,max:this.props.maxX,onChange:this.handleXChange}),o.a.createElement("p",null,"Orientation can be set by latitude/longitude."),o.a.createElement($n,{min:-180,max:180,onChange:this.handleLatitudeChange,step:1,label:"Latitude: ".concat(this.props.latitude),text:"".concat(this.props.latitude),value:this.props.latitude}),o.a.createElement($n,{min:-90,max:90,onChange:this.handleLongitudeChange,step:1,label:"Longitude: ".concat(this.props.longitude),text:"".concat(this.props.longitude),value:this.props.longitude}),o.a.createElement("br",null),o.a.createElement(je,{wide:!0,flat:!0,label:"Make camera face the slice",icon:"camera"}),o.a.createElement("p",null,"Make snapshots of each adjacent slice."),o.a.createElement($n,{min:1,max:20,onChange:this.handleCollageDepthChange,step:1,label:"Frames count: ".concat(this.props.collageDepth),text:"".concat(this.props.collageDepth),value:this.props.collageDepth}),o.a.createElement(je,{wide:!0,label:"Create Filmstrip",onClick:this.handleMovieClick,icon:"movie"})))}}]),t}(o.a.Component));function ar(e){return ir.apply(this,arguments)}function ir(){return(ir=Object(i.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn.Api.addClipPlane(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",0);case 5:return e.abrupt("return",n.id);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var sr=Object(l.b)(function(e){return{activated:e.slicer.activated,minX:e.slicer.minX,maxX:e.slicer.maxX,minY:e.slicer.minY,maxY:e.slicer.maxY,minZ:e.slicer.minZ,maxZ:e.slicer.maxZ,latitude:e.slicer.latitude,longitude:e.slicer.longitude,collageDepth:e.slicer.collageDepth}},function(e){return{}})(rr),or=(n(63),function(e){function t(e){return Object(f.a)(this,t),Object(b.a)(this,Object(g.a)(t).call(this,e))}return Object(y.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{yn.camera.lookAtWholeScene()}catch(t){console.error(t)}case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"panel"},o.a.createElement(En,{value:this.props.panel},o.a.createElement(Un,{key:"model"}),o.a.createElement(sr,{key:"clip"}))),o.a.createElement("div",{className:"view"},o.a.createElement(jn,{onPan:yn.gestures.handlePan,onPanStart:yn.gestures.handlePanStart}),o.a.createElement(Sn,{visible:this.props.showConsole})))}}]),t}(o.a.Component));var cr=Object(l.b)(function(e){return{panel:e.navigation.panel,showConsole:e.navigation.showConsole}},function(e){return{}})(or);n(64);function ur(){return(ur=Object(i.a)(a.a.mark(function e(){var t,n,r,i,s,c,h;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye.getHostName(!1);case 2:return t=e.sent,console.info("hostName=",t),e.prev=4,e.next=7,Ie.wait("Contacting Brayns...",yn.connect(t),!1);case 7:return n=e.sent,e.next=10,Ie.wait("Loading models...",yn.Api.getScene(),!1);case 10:return r=e.sent,e.next=13,yn.Api.getClipPlanes();case 13:i=e.sent,s=i.map(function(e){return e.id}),yn.Api.removeClipPlanes(s),cn.dispatch(cn.Models.reset(r.models)),c=document.getElementById("root"),u.a.render(o.a.createElement(l.a,{store:cn.store},o.a.createElement(cr,{brayns:n})),c),(h=document.getElementById("splash-screen"))&&(h.classList.add("vanish"),window.setTimeout(function(){return document.body.removeChild(h)},600)),e.next=28;break;case 23:return e.prev=23,e.t0=e.catch(4),e.next=27,Ie.alert("Seems like Brayns is not reachable on ".concat(t,"!"));case 27:location.reload();case 28:case"end":return e.stop()}},e,null,[[4,23]])}))).apply(this,arguments)}pe.apply("default"),function(){ur.apply(this,arguments)}()}]),[[29,1,2]]]);
//# sourceMappingURL=main.483d7788.chunk.js.map